@model ContractManagementSystem.Models.tblContractModification
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
    string CurrentUserID()
    {
        string userName = string.Empty;

        if (HttpContext.Current.Request.IsAuthenticated)
        {
            userName = HttpContext.Current.User.Identity.Name.Split('|')[1];
        }
        return userName;
    }
    string CurrentUserLoggedID = CurrentUserID();
    string CurrentUserName()
    {
        string userName = string.Empty;

        if (HttpContext.Current.Request.IsAuthenticated)
        {
            userName = HttpContext.Current.User.Identity.Name.Split('|')[0];
        }

        return userName;

    }
    int CurrentLoggedUserID = Convert.ToInt32(CurrentUserID());
    string CurrentLoggedUserName = CurrentUserName();
}
}


<div class="main-panel">
    <div class="content">
        <div class="page-inner">
            <div class="page-header">
                <h4 class="page-title">Contract ID :&nbsp;@Model.OriginalContractID</h4>
                <ul class="breadcrumbs">
                    <li class="nav-home">
                        <a href="~/Home/Dashboard">
                            <i class="flaticon-home"></i>
                        </a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href="~/Contract/Repository">Contract</a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        Details
                    </li>
                    <li class="nav-item" style="padding-left:5em"></li>
                    <li class="nav-item">
                        @{
                            if (Model.Status == "Approved")
                            {

                                if ((Model.Initiator.ToString() == CurrentUserLoggedID.ToString()))
                                {
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#SignedContractModal"><i class="flaticon-archive"></i>&nbsp; Upload Signed Contract</button>
                                }

                            }
                            if (Model.Status == "In Effect")
                            {
                                using (Html.BeginForm("DownloadModifiedFinalContract", "Contract", FormMethod.Post))
                                {
                                    <input type="hidden" name="ContractID" value="@Model.ContractID" />
                                    <button type="submit" class="btn btn-primary"><i class="flaticon-inbox"></i>&nbsp; Download Signed Contract</button>
                                }
                            }
                        }
                    </li>
                </ul>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="row align-items-center form-inline">
                                <div class="col-sm-7">
                                    <h2>
                                        <b id="ChangeContractNameOnEdit">@Model.ContractName Details</b> &nbsp;

                                        @{

                                            if (Model.Status == "Draft")
                                            {
                                                <span class='badge Legal shadow draft'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Draft</span>
                                                </span>
                                            }
                                            if (Model.Status == "Approved")
                                            {
                                                <span class='badge Legal shadow draft'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Approved</span>
                                                </span>


                                            }
                                            if (Model.Status == "Pending Approval")
                                            {
                                                <span class='badge Legal shadow  Pennding_Approvals'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Pending Approvals</span>
                                                </span>
                                            }
                                            if (Model.Status == "Rejected")
                                            {
                                                <span class='badge Legal shadow Rework'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Rework</span>
                                                </span>
                                            }
                                            if (Model.Status == "In Effect")
                                            {
                                                <span class='badge Legal shadow Ineffect'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Executed</span>
                                                </span>


                                            }
                                            if (Model.Status == "Expired")
                                            {
                                                <span class='badge Legal shadow Expired'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Expired</span>
                                                </span>
                                            }
                                            if (Model.ContractModificationType == "Cloning")
                                            {
                                                <span class='badge Legal_icon shadow'> Cloned from : @Model.OriginalContractID </span>
                                            }
                                            if (Model.ContractModificationType == "Amendments")
                                            {
                                                <span class='badge Amendments_badge shadow'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Amendments</span>
                                                </span>
                                            }
                                            if (Model.ContractModificationType == "Extension")
                                            {
                                                <span class='badge Extension_badge shadow'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Extension</span>
                                                </span>
                                            }
                                            if (Model.ContractModificationType == "Termination")
                                            {
                                                <span class='badge Termination_badge shadow'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Termination</span>
                                                </span>
                                            }
                                        }
                                    </h2>
                                </div>
                                <div class="col-sm-5 text-right">
                                    <button onclick="Back();" class="btn btn-sm btn-light" id="BackButton" title="Back to Repository"><i class="flaticon-back" aria-hidden="true"></i> &nbsp;Back</button>

                                    @if (((Model.Status == "Draft") && ("" + Model.Initiator == CurrentUserLoggedID)) || (((Model.Status == "Pending Approval") || (Model.Status == "Reject")) && ("" + Model.NextApprover == CurrentUserLoggedID)))
                                    {

                                        <button class="btn btn-sm btn-light" title="Edit" id="editalert">
                                            <i class="flaticon-pencil" aria-hidden="true"></i>&nbsp;Edit
                                        </button>
                                    }

                                    <input type="hidden" id="hiddenID" class="form-control" name="ContractID" value="@Model.ContractID">
                                    <input type="hidden" id="UserID" class="form-control" value="@CurrentUserID()" />
                                    @if ((Model.Status == "Draft") && ("" + Model.Initiator == CurrentUserLoggedID))
                                    {
                                        <button type="button" class="btn btn-sm btn-light" id="deletealert" title="Delete"><i class="flaticon-interface-5" aria-hidden="true"></i>&nbsp; Delete</button>
                                    }

                                    <button class="btn btn-sm btn-light" title="History" data-toggle="modal" data-target="#LogModel"><i class="flaticon-clock-1" aria-hidden="true"></i>&nbsp;&nbsp;History</button>
                                </div>
                            </div>

                        </div>
                        <div class="card-body">
                            <form>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="Cluster">Contract Name<span class="asteriskicon"> *</span></label>
                                            <input type="text" maxlength="65" title="Numbers and Special characters not allowed" class="form-control" name="ContractName" onkeyup="this.value = this.value.replace(/[^a-zA-Z\s]/g, '');" id="contractname" value="@Model.ContractName" placeholder="Enter Contract Name" required="required" readonly>
                                            <input type="hidden" class="form-control" id="Initiator" name="Initiator" value="@CurrentUserID()" />
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="Finance">Contract Type<span class="asteriskicon"> *</span></label>
                                            @*<input type="text" maxlength="180" title="Numbers and Special characters not allowed" class="form-control" onkeyup="this.value = this.value.replace(/[^a-zA-Z\s]/g, '');" name="ContractType" id="contracttype" value="@Model.ContractType" placeholder="Enter Contract Type" required="required" disabled>*@
                                            <select class="form-control" id="contracttype" name="ContractType" required="required" disabled style="padding-bottom:3px;padding-top:3px;">
                                                <option>Critical</option>
                                                <option>Non Critical</option>
                                            </select>
                                            <input type="hidden" class="form-control" id="contractid" name="ContractID" value="@Model.ContractID">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="description">Contract Description</label>
                                            <textarea class="form-control text_area input_text" maxlength="180" title="Special characters not allowed" onkeyup="this.value = this.value.replace(/[^a-zA-Z0-9.,\s]/g, '');" name="Description" id="contractdescription" placeholder="Enter Contract Description" disabled>@Model.Description</textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="Cluster">Department<span class="asteriskicon"> *</span></label>
                                            @*@if (Model.Status == "Draft")
                                            {
                                                <select class="form-control input_text" onchange="ApproverTable();" id="Contractcategory" disabled name="ContractCategory" required="required" style="padding-bottom:3px;padding-top:3px;">
                                                    <option>@Model.Department</option>
                                                </select>
                                            }
                                            else
                                            {*@
                                                <input type="text" class="form-control" maxlength="180" id="Contractcategory" disabled name="ContractCategory" required="required" value="@Model.Department" />
                                            @*}*@
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="Finance">Sub Department<span class="asteriskicon"> *</span></label>
                                            @*@if (Model.Status == "Draft")
                                            {
                                                <select class="form-control input_text" onchange="ApproverTable();" id="Contractsubcategory" name="ContractSubCategory" disabled required="required" style="padding-bottom:3px;padding-top:3px;">
                                                    <option>@Model.SubDepartment</option>
                                                </select>
                                            }
                                            else
                                            {*@
                                                <input class="form-control" maxlength="180" id="Contractsubcategory" name="ContractSubCategory" value="@Model.SubDepartment" disabled required="required" />
                                            @*}*@
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="Category">Create Contract Using <span class="asteriskicon"> *</span></label>
                                            <select class="form-control" id="typeformtemplate" name="TemplateType" required="required" disabled style="padding-bottom:3px;padding-top:3px;">
                                                <option>@Model.TemplateType</option>
                                                @*<option>From Template</option>
                                                    <option>Upload Existing Contract</option>
                                                    <option>Fresh Contract</option>*@
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="Cluster">Category <span class="asteriskicon"> *</span></label>
                                            <input type="text" maxlength="180" class="form-control" id="Contractcategory_temp" value="@Model.ContractCategory" disabled name="ContractCategory" required="required">

                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="Finance">Sub Category <span class="asteriskicon"> *</span></label>
                                            <input type="text" maxlength="180" class="form-control" value="@Model.ContractSubCategory" id="Contractsubcategory_temp" disabled name="ContractSubCategory" required="required">

                                        </div>
                                    </div>
                                </div>
                                <br>
                                <br />

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header CardHeader_Approvers">
                                                <div class="row align-items-center">
                                                    <div class="col-sm-6">
                                                        <div class="card-title"><h5><b>Approver (s) <span class="asteriskicon"> *</span></b></h5></div>
                                                    </div>
                                                    <div class="col-sm-6 text-right">
                                                        @*<button type="button" id="btnRemoveApprover" class="btn btn-sm btn-danger" title="Remove Approvers from List" disabled><i class="far fa-trash-alt" aria-hidden="true"></i>&nbsp; Remove</button>
                                                            &nbsp;&nbsp;<button type="button" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#searchmodal" disabled> <i class="flaticon-search" aria-hidden="true"></i>&nbsp; Search User</button>*@

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-body">

                                                <div class="row">
                                                    <div class="col-lg-12 text-right">
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="table-responsive">
                                                                    <table id="ApproversTable" class="display table table-bordered  appoverTabel">
                                                                        <thead>
                                                                            <tr>
                                                                                <th><center>Approval Level</center></th>
                                                                                @if (Model.Status == "Draft")
                                                                                {
                                                                                    <th><center>Select Approvers</center></th>
                                                                                }
                                                                                <th><center>Employee ID</center></th>
                                                                                <th><center>Employee Name</center></th>
                                                                                <th><center>Employee Email Address</center></th>
                                                                                <th><center>Employee Designation</center></th>
                                                                                <th><center>Employee Role (s)</center></th>
                                                                                @if (Model.Status.ToLower() != "draft")
                                                                                {
                                                                                    <th><center>Approval Status</center></th>
                                                                                }
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="aprrovallist">
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-action text-right card_footer_button saverecord">
                                    <div class="row form-inline">
                                        <div class="col-sm-12 text-right">
                                            <button type="button" id="Save" onclick="updated();" class="btn  btn-success saverecord" style="display:none;font-size:17px;width:180px;"><b>Save Changes</b></button>&nbsp;
                                            <button type="button" id="Discard" onclick="DiscardChanges();" class="btn  btn-danger" style="display:none;font-size:17px;width:180px;"><b>Discard Changes</b></button>&nbsp;
                                           
                                            <a class="btn btn-success btn_SaveClearDiscard" id="nextbutton" href="@Url.Action("ContractDraftExtension", "Contract", new { id = Model.ContractID })">Next</a>
                                               
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="LogModel" role="dialog" tabindex="-1">

    <div class="modal-dialog modal-dialog-centered" style="max-width: 80%;">

        <div class="modal-content">

            <div class="modal-header modalheadercolor websitecolour">
                <label style="font-size: 20px !important;"><b>Contract Modified History</b></label>
                <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
            </div>
            <div class="modal-body" style="height:450px; overflow: auto;">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="tableFixHead_LogHistory">
                            <table class="table table-bordered">

                                <thead>

                                    <tr>
                                        <th><center>Date and Time</center></th>
                                        <th><center>Modified By</center></th>
                                        <th><center>Activity</center></th>
                                        <th><center>Changed From</center></th>
                                        <th><center>Changed To</center></th>

                                    </tr>

                                </thead>

                                <tbody id="tblContractLogList">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                @*<hr />

                    <div class="card-action text-right card_footer_button">
                        <input type="submit" class="btn btn-success" value="Select" id="CaptureHodList">
                        <input type="button" class="btn btn-danger" data-dismiss="modal" value="Cancel" />

                    </div>*@
            </div>
        </div>

    </div>
</div>


<div class="modal fade" id="SignedContractModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">

    <div class="modal-dialog modal-dialog-centered" style="max-width:50%;">
        <div class="modal-content">
            <div class="modal-header">
                <label style="font-size: 20px !important;">
                    <b>Upload Signed Contract</b>
                </label>
                <div class="text-right model_body_position">
                    <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                </div>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-9">
                                <div class="form-group">
                                    <input type="file" name="UploadSignOffContractFile" id="UploadSignOffContractFile" class="file" accept=".pdf">
                                    <div class="input-group col-xs-10">
                                        <span class="input-group-addon "><i class="glyphicon glyphicon-picture"></i></span>
                                        <input type="text" class="form-control input-lg browse" name="UploadSignOffContractFile" placeholder="Choose File">
                                        <span class="input-group-btn ">
                                            <button class="browse btn btn-primary uploadbtnsizing" type="button"><i class="glyphicon glyphicon-search"></i><i class="flaticon-search-2" aria-hidden="true"></i>&nbsp;&nbsp;Browse </button>&nbsp;
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <button type="button" id="UploadButton" style="display:none;" class="btn btn-primary uploadbtnsizing" data-dismiss="modal" data-toggle="modal" onclick="UploadSignOff();"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp;&nbsp;Upload</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modalload"><!-- Place at bottom of page --></div>



<script src="../../Content/assets/js/core/jquery.3.2.1.min.js"></script>



<script>
    function expandTextarea(Class) {
        var x = document.getElementsByClassName(Class);
        for (i = 0; i < x.length; i++) {
            x[i].addEventListener('keyup', function () {
                this.style.overflow = 'hidden';
                this.style.height = 0;
                this.style.height = this.scrollHeight + 'px';
            }, false);
        }
    }
    expandTextarea("text_area");
</script>

<script>
    $(document).on('click', '.browse', function () {
        var file = $(this).parent().parent().parent().find('.file');
        file.trigger('click');
    });
    $(document).on('change', '.file', function () {
        $(this).parent().find('.form-control').val($(this).val().replace(/C:\\fakepath\\/i, ''));
        var data = $(this).parent().find('.form-control').val();
        var extension = data.substr(data.lastIndexOf('.') + 1).toLowerCase();

        var allowedExtensions = ['pdf'];
        if (data.length > 0) {
            if (allowedExtensions.indexOf(extension) === -1) {
                //alert('Invalid file Format. Only ' + allowedExtensions.join(', ') + ' are allowed.');
               swal({
                    title: "Upload Signed Contract",
                     text: "Invalid file Format. Only Pdf allowed.",
                                icon: "error",
                            }).then(function (result) {
                                if (result) {
                                    $('.file').parent().find('.form-control').val('');
                                    $("#UploadButton").hide();
                                }
                            });
            }
        }
        else {
            $(this).parent().find('.form-control').val('');

        }
    });

</script>
<script>
    $(".file").change(function () {
        var file = $(".file").val();
        if (file != "") {
            $("#UploadButton").show();
        }
        else {
            $("#UploadButton").hide();
        }
    });
</script>




<script>
    function DataTable() {
        var currentuserid = "@CurrentUserID()";
        var Approver1ID = "@Model.Approver1ID";
        var Approver2ID = "@Model.Approver2ID";
        var Approver3ID = "@Model.Approver3ID";
        var Approver4ID = "@Model.Approver4ID";
        var Approver5ID = "@Model.Approver5ID";
        var Approver6ID = "@Model.Approver6ID";
        var Approver7ID = "@Model.Approver7ID";
        var Approver8ID = "@Model.Approver8ID";
        var Approver9ID = "@Model.Approver9ID";
        var Approver10ID = "@Model.Approver10ID";

        var ContractDept = "@Model.Department";
        var ContractSubDept = "@Model.SubDepartment";
        var Type = "@Model.TemplateType";

      //  alert("Called on Load");
        var ApproverTableData = "";

              //alert("@Model.Approver1ID".length);
             if (Approver1ID > 0) {
                var EmployeeID = Approver1ID;
                 $.ajax({
                     async: false,
                   url: '/Contract/GetUserById',
                    type: 'POST',
                     data: { EmployeeID: EmployeeID },

                    dataType: 'json',
                     success: function (response) {
                         // console.log(response);
                         var Approvestatus = "";
                          if ("@Model.Status" != "Draft") {
                             var statusCheck = "@Model.Approver1Status";
                             //if ($(statusCheck).length < 0) {
                             if ("@string.IsNullOrWhiteSpace(@Model.Approver1Status)"=="True") {
                                // alert("sdfgh @Model.Approver1Status");
                                  Approvestatus = "<td> Review Pending  </td>";
                             }
                             else {
                                 Approvestatus = Approvestatus + "<td> @Model.Approver1Status  </td>";
                             }

                         }
                         var selectlist = "";
                         if ("@Model.Status" == "Draft") {
                             selectlist = selectlist + "<td><select class='form-control select_level' id='Level1_Id' disabled onchange='SelectApprover1(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                         }
                         if (currentuserid != EmployeeID) {
                            ApproverTableData = ApproverTableData + "<tr><td id='LevelColumn1'>Approver 1</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID1'>" + Approver1ID + "</td><td id='Name1'>" + response[1] + "</td><td id='Email1'>" + response[2] + "</td><td id='Desg1'>" + response[3] + "</td><td id='Role1'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                              //alert(ApproverTableData);
                             $("#aprrovallist").html(ApproverTableData);

                         }
                         if (Approver2ID > 0) {
              //  alert("2ND Approver");
                            var EmployeeID = Approver2ID;
                             $.ajax({
                                 async: false,
                               url: '/Contract/GetUserById',
                                type: 'POST',
                                 data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                 success: function (response) {
                                    var Approvestatus = "";
                         if ("@Model.Status" != "Draft") {
                             var statusCheck = "@Model.Approver2Status";
                             //if ($(statusCheck).length < 0) {
                             if ("@string.IsNullOrWhiteSpace(@Model.Approver2Status)"=="True") {
                                // alert("sdfgh @Model.Approver2Status");
                                  Approvestatus = "<td> Review Pending  </td>";
                             }
                             else {
                                 Approvestatus = Approvestatus + "<td> @Model.Approver2Status  </td>";
                             }

                                     }
                                     var selectlist = "";
                         if ("@Model.Status" == "Draft") {
                             selectlist = selectlist + "<td><select class='form-control select_level' id='Level2_Id' disabled onchange='SelectApprover2(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                         }
                                   // console.log(response);
                                     if (currentuserid != EmployeeID) {
                                        ApproverTableData = ApproverTableData + "<tr><td id='LevelColumn2'>Approver 2</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID2'>" + Approver2ID + "</td><td id='Name2'>" + response[1] + "</td><td id='Email2'>" + response[2] + "</td><td id='Desg2'>" + response[3] + "</td><td id='Role2'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                       //alert(ApproverTableData);
                                         $("#aprrovallist").html(ApproverTableData);

                                     }
                                       if (Approver3ID > 0) {
                                            var EmployeeID = Approver3ID;
                                           $.ajax({
                                               async: false,
                                               url: '/Contract/GetUserById',
                                                type: 'POST',
                                                 data: { EmployeeID: EmployeeID },

                                                dataType: 'json',
                                                 success: function (response) {
                                                      var Approvestatus = "";
                                                     if ("@Model.Status" != "Draft") {
                                                         var statusCheck = "@Model.Approver3Status";
                                                         //if ($(statusCheck).length < 0) {
                                                         if ("@string.IsNullOrWhiteSpace(@Model.Approver3Status)"=="True") {
                                                             //alert("sdfgh @Model.Approver3Status");
                                                              Approvestatus = "<td> Review Pending  </td>";
                                                         }
                                                         else {
                                                             Approvestatus = Approvestatus + "<td> @Model.Approver3Status  </td>";
                                                         }

                                                     }
                                                     var selectlist = "";
                         if ("@Model.Status" == "Draft") {
                             selectlist = selectlist + "<td><select class='form-control select_level' id='Level3_Id' disabled onchange='SelectApprover3(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                         }
                                                     if (currentuserid != EmployeeID) {
                                                           ApproverTableData = ApproverTableData + "<tr><td id='LevelColumn3'>Approver 3</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID3'>" + Approver3ID + "</td><td id='Name3'>" + response[1] + "</td><td id='Email3'>" + response[2] + "</td><td id='Desg3'>" + response[3] + "</td><td id='Role3'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                       //alert(ApproverTableData);
                                                    $("#aprrovallist").html(ApproverTableData);

                                                     }
                                                     if (Approver4ID > 0) {
                                                        var EmployeeID = Approver4ID;
                                                         $.ajax({
                                                             async: false,
                                                           url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                             data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                             success: function (response) {
                                                                  var Approvestatus = "";
                                                                 if ("@Model.Status" != "Draft") {
                                                                     var statusCheck = "@Model.Approver4Status";
                                                                     //if ($(statusCheck).length < 0) {
                                                                     if ("@string.IsNullOrWhiteSpace(@Model.Approver4Status)"=="True") {
                                                                         ///alert("sdfgh @Model.Approver4Status");
                                                                          Approvestatus = "<td> Review Pending  </td>";
                                                                     }
                                                                     else {
                                                                         Approvestatus = Approvestatus + "<td> @Model.Approver4Status  </td>";
                                                                     }

                                                                 }
                                                                  var selectlist = "";
                                                                 if ("@Model.Status" == "Draft") {
                                                                     selectlist = selectlist + "<td><select class='form-control select_level' id='Level4_Id' disabled onchange='SelectApprover4(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                 }
                                                               // console.log(response);
                                                                 if (currentuserid != EmployeeID) {
                                                                 ApproverTableData = ApproverTableData + "<tr><td>Approver 4</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID4'>" + Approver4ID + "</td><td id='Name4'>" + response[1] + "</td><td id='Email4'>" + response[2] + "</td><td id='Desg4'>" + response[3] + "</td><td id='Role4'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                               //alert(ApproverTableData);
                                                                $("#aprrovallist").html(ApproverTableData);

                                                            }
                                                                 if (Approver5ID > 0) {
                                                                        var EmployeeID = Approver5ID;
                                                                     $.ajax({
                                                                         async: false,
                                                                           url: '/Contract/GetUserById',
                                                                            type: 'POST',
                                                                             data: { EmployeeID: EmployeeID },

                                                                            dataType: 'json',
                                                                             success: function (response) {
                                                                                   var Approvestatus = "";
                                                                         if ("@Model.Status" != "Draft") {
                                                                             var statusCheck = "@Model.Approver5Status";
                                                                             //if ($(statusCheck).length < 0) {
                                                                             if ("@string.IsNullOrWhiteSpace(@Model.Approver5Status)"=="True") {
                                                                                // alert("sdfgh @Model.Approver5Status");
                                                                                  Approvestatus = "<td> Review Pending  </td>";
                                                                             }
                                                                             else {
                                                                                 Approvestatus = Approvestatus + "<td> @Model.Approver5Status  </td>";
                                                                             }

                                                                                 }
                                                                                  var selectlist = "";
                                                                 if ("@Model.Status" == "Draft") {
                                                                     selectlist = selectlist + "<td><select class='form-control select_level' id='Level5_Id' disabled onchange='SelectApprover5(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                 }
                                                                                  // console.log(response);
                                                                                 if (currentuserid != EmployeeID) {
                                                                                     ApproverTableData = ApproverTableData + "<tr><td>Approver 5</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID5'>" + Approver5ID + "</td><td id='Name5'>" + response[1] + "</td><td id='Email5'>" + response[2] + "</td><td id='Desg5'>" + response[3] + "</td><td id='Role5'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                               //alert(ApproverTableData);
                                                                            $("#aprrovallist").html(ApproverTableData);

                                                                                 }
                                                                                 if (Approver6ID > 0) {
                                                                                    var EmployeeID = Approver6ID;
                                                                                     $.ajax({
                                                                                         async: false,
                                                                                       url: '/Contract/GetUserById',
                                                                                        type: 'POST',
                                                                                         data: { EmployeeID: EmployeeID },

                                                                                        dataType: 'json',
                                                                                         success: function (response) {
                                                                                              var Approvestatus = "";
                                                                                                 if ("@Model.Status" != "Draft") {
                                                                                                     var statusCheck = "@Model.Approver6Status";
                                                                                                     //if ($(statusCheck).length < 0) {
                                                                                                     if ("@string.IsNullOrWhiteSpace(@Model.Approver6Status)"=="True") {
                                                                                                        // alert("sdfgh @Model.Approver6Status");
                                                                                                          Approvestatus = "<td> Review Pending  </td>";
                                                                                                     }
                                                                                                     else {
                                                                                                         Approvestatus = Approvestatus + "<td> @Model.Approver6Status  </td>";
                                                                                                     }

                                                                                             }

                                                                                             var selectlist = "";
                                                                                             if ("@Model.Status" == "Draft") {
                                                                                                 selectlist = selectlist + "<td><select class='form-control select_level' id='Level6_Id' disabled onchange='SelectApprover6(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                             }
                                                                                           // console.log(response);
                                                                                             if (currentuserid != EmployeeID) {
                                                                                                 ApproverTableData = ApproverTableData + "<tr><td>Approver 6</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID6'>" + Approver6ID + "</td><td id='Name6'>" + response[1] + "</td><td id='Email6'>" + response[2] + "</td><td id='Desg6'>" + response[3] + "</td><td id='Role6'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                        //alert(ApproverTableData);
                                                                                        $("#aprrovallist").html(ApproverTableData);

                                                                                             }
                                                                                            if (Approver7ID > 0) {
                                                                                                var EmployeeID = Approver7ID;
                                                                                                $.ajax({
                                                                                                    async: false,
                                                                                                   url: '/Contract/GetUserById',
                                                                                                    type: 'POST',
                                                                                                     data: { EmployeeID: EmployeeID },

                                                                                                    dataType: 'json',
                                                                                                     success: function (response) {
                                                                                                          var Approvestatus = "";
                                                                                                         if ("@Model.Status" != "Draft") {
                                                                                                             var statusCheck = "@Model.Approver7Status";
                                                                                                             //if ($(statusCheck).length < 0) {
                                                                                                             if ("@string.IsNullOrWhiteSpace(@Model.Approver7Status)"=="True") {
                                                                                                                // alert("sdfgh @Model.Approver7Status");
                                                                                                                  Approvestatus = "<td> Review Pending  </td>";
                                                                                                             }
                                                                                                             else {
                                                                                                                 Approvestatus = Approvestatus + "<td> @Model.Approver7Status  </td>";
                                                                                                             }

                                                                                                         }

                                                                                                         var selectlist = "";
                                                                                                             if ("@Model.Status" == "Draft") {
                                                                                                                 selectlist = selectlist + "<td><select class='form-control select_level' id='Level7_Id' disabled onchange='SelectApprover7(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                             }
                                                                                                       // console.log(response);
                                                                                                         if (currentuserid != EmployeeID) {
                                                                                                             ApproverTableData = ApproverTableData + "<tr><td>Approver 7</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID7'>" + Approver7ID + "</td><td id='Name7'>" + response[1] + "</td><td id='Email7'>" + response[2] + "</td><td id='Desg7'>" + response[3] + "</td><td id='Role7'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                      //alert(ApproverTableData);
                                                                                                        $("#aprrovallist").html(ApproverTableData);
                                                                                                       }
                                                                                                        if (Approver8ID > 0) {
                                                                                                                var EmployeeID = Approver8ID;
                                                                                                            $.ajax({
                                                                                                                async: false,
                                                                                                                   url: '/Contract/GetUserById',
                                                                                                                    type: 'POST',
                                                                                                                     data: { EmployeeID: EmployeeID },

                                                                                                                    dataType: 'json',
                                                                                                                     success: function (response) {
                                                                                                                          var Approvestatus = "";
                                                                                                                                 if ("@Model.Status" != "Draft") {
                                                                                                                                     var statusCheck = "@Model.Approver8Status";
                                                                                                                                     //if ($(statusCheck).length < 0) {
                                                                                                                                     if ("@string.IsNullOrWhiteSpace(@Model.Approver8Status)"=="True") {
                                                                                                                                         //alert("sdfgh @Model.Approver8Status");
                                                                                                                                          Approvestatus = "<td> Review Pending  </td>";
                                                                                                                                     }
                                                                                                                                     else {
                                                                                                                                         Approvestatus = Approvestatus + "<td> @Model.Approver8Status  </td>";
                                                                                                                                     }

                                                                                                                         }
                                                                                                                         var selectlist = "";
                                                                                                             if ("@Model.Status" == "Draft") {
                                                                                                                 selectlist = selectlist + "<td><select class='form-control select_level' id='Level8_Id' disabled onchange='SelectApprover8(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                             }
                                                                                                                       // console.log(response);
                                                                                                                         if (currentuserid != EmployeeID) {
                                                                                                                            ApproverTableData = ApproverTableData + "<tr><td>Approver 8</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID8'>" + Approver8ID + "</td><td id='Name8'>" + response[1] + "</td><td id='Email8'>" + response[2] + "</td><td id='Desg8'>" + response[3] + "</td><td id='Role8'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                                    //alert(ApproverTableData);
                                                                                                                    $("#aprrovallist").html(ApproverTableData);

                                                                                                                         }
                                                                                                                        if (Approver9ID > 0) {
                                                                                                                            var EmployeeID = Approver9ID;
                                                                                                                            $.ajax({
                                                                                                                                async: false,
                                                                                                                               url: '/Contract/GetUserById',
                                                                                                                                type: 'POST',
                                                                                                                                 data: { EmployeeID: EmployeeID },

                                                                                                                                dataType: 'json',
                                                                                                                                 success: function (response) {
                                                                                                                                      var Approvestatus = "";
                                                                                                                                                 if ("@Model.Status" != "Draft") {
                                                                                                                                                     var statusCheck = "@Model.Approver9Status";
                                                                                                                                                     //if ($(statusCheck).length < 0) {
                                                                                                                                                     if ("@string.IsNullOrWhiteSpace(@Model.Approver9Status)"=="True") {
                                                                                                                                                        // alert("sdfgh @Model.Approver9Status");
                                                                                                                                                          Approvestatus = "<td> Review Pending  </td>";
                                                                                                                                                     }
                                                                                                                                                     else {
                                                                                                                                                         Approvestatus = Approvestatus + "<td> @Model.Approver9Status  </td>";
                                                                                                                                                     }

                                                                                                                                                 }
                                                                                                                                   // console.log(response);
                                                                                                                                     var selectlist = "";
                                                                                                             if ("@Model.Status" == "Draft") {
                                                                                                                 selectlist = selectlist + "<td><select class='form-control select_level' id='Level9_Id' disabled onchange='SelectApprover9(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                             }
                                                                                                                                     if (currentuserid != EmployeeID) {
                                                                                                                                      ApproverTableData = ApproverTableData + "<tr><td>Approver 9</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID9'>" + Approver9ID + "</td><td id='Name9'>" + response[1] + "</td><td id='Email9'>" + response[2] + "</td><td id='Desg9'>" + response[3] + "</td><td id='Role9'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                                                 //alert(ApproverTableData);
                                                                                                                                $("#aprrovallist").html(ApproverTableData);

                                                                                                                                     }
                                                                                                                                     if (Approver10ID > 0) {
                                                                                                                                            var EmployeeID = Approver10ID;
                                                                                                                                         $.ajax({
                                                                                                                                             async: false,
                                                                                                                                               url: '/Contract/GetUserById',
                                                                                                                                                type: 'POST',
                                                                                                                                                 data: { EmployeeID: EmployeeID },

                                                                                                                                                dataType: 'json',
                                                                                                                                                 success: function (response) {
                                                                                                                                                      var Approvestatus = "";
                                                                                                                                                     if ("@Model.Status" != "Draft") {
                                                                                                                                                         var statusCheck = "@Model.Approver10Status";
                                                                                                                                                         //if ($(statusCheck).length < 0) {
                                                                                                                                                         if ("@string.IsNullOrWhiteSpace(@Model.Approver10Status)"=="True") {
                                                                                                                                                             //alert("sdfgh @Model.Approver10Status");
                                                                                                                                                              Approvestatus = "<td> Review Pending  </td>";
                                                                                                                                                         }
                                                                                                                                                         else {
                                                                                                                                                             Approvestatus = Approvestatus + "<td> @Model.Approver10Status  </td>";
                                                                                                                                                         }

                                                                                                                                                     }
                                                                                                                                                      var selectlist = "";
                                                                                                             if ("@Model.Status" == "Draft") {
                                                                                                                 selectlist = selectlist + "<td><select class='form-control select_level' id='Level10_Id' disabled onchange='SelectApprover10(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                             }
                                                                                                                                                   // console.log(response);
                                                                                                                                                     if (currentuserid != EmployeeID) {
                                                                                                                                                          // console.log(response);
                                                                                                                                             ApproverTableData = ApproverTableData + "<tr><td>Approver 10</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID10'>" + Approver10ID + "</td><td id='Name10'>" + response[1] + "</td><td id='Email10'>" + response[2] + "</td><td id='Desg10'>" + response[3] + "</td><td id='Role10'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                                                              //alert(ApproverTableData);
                                                                                                                                             $("#aprrovallist").html(ApproverTableData);

                                                                                                                                                     }


                                                                                                                                                }
                                                                                                                                             });

                                                                                                                                        }


                                                                                                                                }
                                                                                                                             });

                                                                                                                        }

                                                                                                                    }
                                                                                                                 });

                                                                                                            }

                                                                                                    }
                                                                                                 });

                                                                                                }

                                                                                        }
                                                                                     });

                                                                                }

                                                                            }
                                                                         });

                                                                    }

                                                            }
                                                         });

                                                    }


                                                }
                                             });
                                            }


                                }
                             });
               // $("#aprrovallist").html(ApproverTableData)
                        }

                     }

                 });

            }
    }
</script>

@if (Model.Status == "Draft")
{

    <script>
    function LevelFunction() {
        var ContractDept = "@Model.Department";
        var ContractSubDept = "@Model.SubDepartment";
        var currentuserid = "@CurrentUserID()";
        var Type = "@Model.TemplateType";
        
            var LevelNumber = 1;
            Approver1ID = "@Model.Approver1ID";
        $.ajax({
            async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber, Type: Type },

                dataType: 'json',
            success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;
                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level1_Id");
                                    var option = document.createElement("option");

                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver1ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}


                                }
                            });
                        }


                    });
                var SelectBoxValue = $("#Level1_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level1_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
            });

            var LevelNumber = 2;
            Approver2ID = "@Model.Approver2ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level2_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver2ID) {
                                        option.defaultSelected = true;
                                    }
                                  try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });


                        }
                    });
                    var SelectBoxValue = $("#Level2_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level2_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

         var LevelNumber = 3;
            Approver3ID = "@Model.Approver3ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level3_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver3ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });
                        }


                    });
                    var SelectBoxValue = $("#Level3_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level3_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 4;
            Approver4ID = "@Model.Approver4ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level4_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver4ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level4_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level4_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 5;
            Approver5ID = "@Model.Approver5ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level5_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver5ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });


                        }
                    });
                    var SelectBoxValue = $("#Level5_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level5_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 6;
            Approver6ID = "@Model.Approver6ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level6_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver6ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });
                        }


                    });
                    var SelectBoxValue = $("#Level7_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level7_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 7;
            Approver7ID = "@Model.Approver7ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level7_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver7ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });
                        }


                    });
                    var SelectBoxValue = $("#Level7_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level7_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 8;
            Approver8ID = "@Model.Approver8ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level8_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver8ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level8_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level8_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 9;
            Approver9ID = "@Model.Approver9ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level9_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver9ID) {
                                        option.defaultSelected = true;
                                    }
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level9_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level9_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 10;
            Approver10ID = "@Model.Approver10ID";
        $.ajax({
                async: false,
                url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type: Type  },

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Contract/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level10_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver10ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });
                        }


                    });
                    var SelectBoxValue = $("#Level10_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level10_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
            });

    }
    </script>

}
<script>
    $(function () {
        DataTable();

        var Data = document.getElementsByClassName("EmployeeIdDetails");
        if (Data.length > 0) {
            try {
                 LevelFunction();
            } catch{}

        }
    });
</script>
<script>
     $('#deletealert').click(function (e) {

        swal({
            title: 'Are you sure?',
            text: "You won't be able to revert this !",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel !',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes, Delete it !',
                    className: 'btn btn-danger'
                }
            }
        }).then(function (value) {
            if (value == true) {
               // _form.submit();
                var ContractID = $("#hiddenID").val();
                var CurrentUserID = @CurrentUserID();
                $.ajax({
                    url: '/Addendum/DeleteContractFromDB',
                    type: 'POST',
                    data: { ContractID: ContractID, CurrentUserID: CurrentUserID },

                    dataType: 'json',
                    success: function (response) {
                        // console.log(response);
                        if (response == "success") {
                            swal("Successfully removed the record", {

                                icon: "success",
                                buttons: {
                                    confirm: {
                                        visible: true
                                    }
                                }
                            }).then(function (value) {
                                if (value == true) {
                                    window.location = "/Addendum/Repository";
                                }
                            });

                        }
                        else {
                            swal("Error in Deleting the record", {

                                icon: "error",
                                buttons: {
                                    confirm: {
                                        visible: true
                                    }
                                }
                            });
                        }

                    }
                });

            } else {
                swal("Your Data is safe", {
                    buttons: {
                        confirm: {
                            className: 'btn btn-success'
                        }
                    }
                });
            }
        });
    })
</script>

<script>
    //Edit button alert design
    $('#editalert').click(function (e) {
        //alert("helo");
        e.preventDefault();
        swal(" Are you sure you want to Edit !", {
            icon: "warning",
          buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel !',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Edit it !',
                    className: 'btn btn-success'
                    //className: 'btn btn-success'
                }
            }
        }).then(function (value) {
            if (value == true) {
                $('.input_text').removeAttr('readonly');
                $('.input_text').removeAttr('disabled');
                // $('input[type=checkbox]').removeAttr('disabled');
                $('textarea').removeAttr('readonly');
                $('textarea').removeAttr('disabled');
                //$('select').removeAttr('disabled');
                $('datalist').removeAttr('disabled');
                $('button').removeAttr('disabled');
                try {
                    $('#Save').show();
                } catch (error) { }
                try {
                    $('#Discard').show();
                } catch (error) { }
                try {
                    document.getElementById("deletealert").disabled = true;
                    document.getElementById("BackButton").disabled = true;
                } catch (error) { }
                try {
                    $("#nextbutton").hide();
                } catch (error) { }
                try {
                    document.getElementById("editalert").disabled = true;
                } catch (error) { }
                if ("@Model.Status" == "Draft") {
                    $('.select_level').removeAttr('disabled');
                } else {
                    $('.select_level').attr('disabled', 'disabled');
                }

            } else {
                //swal("Cancelled", " ", "error");
            }
        });
    });
</script>

<script>
    function Back() {
        window.location = "/Addendum/Repository";
    }
</script>
<script>
    function updated() {
        var ContractName = $("#contractname").val();
        var ContractId = $("#hiddenID").val();
        var ContractType = $("#contracttype").val();
        var ContractDescription = $("#contractdescription").val();

        var ContractCluster = $("#Contractcategory_temp").val();
        var ContractFunction = $("#Contractsubcategory_temp").val();
        var ContractDepartment = $("#Contractcategory").val();
        var ContractSubDepartment = $("#Contractsubcategory").val();
        var ContractTemplateType = $("#typeformtemplate").val();
        var CuurrentUserID = $("#Initiator").val();
        //var ContractIDforTemplate = $("#ContractIDforTemplate").val();

        //alert("1");

        //alert(ContractType);
        //alert(ContractDescription);
        //alert(ContractCluster);
        //alert(ContractFunction);
        //alert(ContractTemplateType);
        // alert(CuurrentUserID);
        //alert(ContractIDforTemplate);




        var UID = [];
        var Userlist = document.getElementsByClassName("EmployeeIdDetails");
        for (var i = 0; i < Userlist.length; i++) {
            UID.push(Userlist[i].innerHTML);
            //AppUsers.push(UID);
        }

        //alert("2");
        if ((ContractName.length > 0) && (ContractType.length > 0)) {
            //alert("3");
            if (Userlist.length > 1) {
                //alert("4");
                $.ajax({
                    url: '/Addendum/UpdateContractInDB',
                    type: 'POST',
                    data: { ContractId: ContractId, UID: UID, ContractName: ContractName, ContractType: ContractType, ContractDescription: ContractDescription, ContractCluster: ContractCluster, ContractFunction: ContractFunction, ContractTemplateType: ContractTemplateType, CuurrentUserID: CuurrentUserID, ContractDepartment: ContractDepartment, ContractSubDepartment: ContractSubDepartment },

                    dataType: 'json',
                    success: function (response) {
                        // console.log(response);
                        if (response[0] = "success") {
                            // window.location = '/Contract/Details/' + response[1];

                            swal("Contract details updated Successfully", {
                                icon: "success",
                            }).then(function (result) {
                                if (result) {
                                    window.location.reload();
                                }
                            });

                        }
                        else {
                            swal("Error in updating the record", {
                                icon: "error",

                                //}).then((error) => {
                                //    if (error) {

                                //    }
                            });
                        }

                    }
                });
            }
            else {
                swal("Minimum of two Approvers Required", {
                    icon: "warning",
                });
            }
        }
        else {
            //alert("else");
            swal("All fields are required", {
                icon: "warning",
            });
        }

    }

</script>



<script>
    $(function () {
        // alert("hello");

        var tblLog = "";
       // var ID = $("#hiddenID").val();
        var ID = "@Model.ContractID";
        $.ajax({
            type: "POST",
            url: "/Contract/getLogDetail",
            data: { ID: ID },


            success: function (response) {

                //alert(response.LogUserID);
                $.each($(response), function (index, value) {
                    tblLog = tblLog + '<tr><td><center>' + value.DateandTime + '</center></td><td><center>' + value.ModifiedBy + '</center></td><td style="text-align: left;">' + value.LogActivity + '</td><td style="text-align: left;">' + value.ChangedFrom + '</td><td style="text-align: left;">' + value.ChangedTo + '</td></tr>';
                });
                $("#tblContractLogList").html(tblLog);
            },

        });
    });
</script>


@*<script>
        $(function () {
             var USerID = "@CurrentLoggedUserID - @CurrentLoggedUserName";

            $("#contractname").focus(function () {
                $(this).data('nameval', $(this).val());
            });
            $("#contractname").change(function () {
                var initialvalue = "Name : " + $(this).data('nameval');
                var details = "Name : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",
                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },


                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });

            $("#contracttype").focus(function () {
                $(this).data('typeval', $(this).val());
            });
            $("#contracttype").change(function () {
                var initialvalue = "Type : " + $(this).data('typeval');
                var details = "Type : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",
                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },


                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });

            $("#contractdescription").focus(function () {
                $(this).data('desval', $(this).val());
            });
            $("#contractdescription").change(function () {
                var initialvalue = "Description : " + $(this).data('desval');
                var details = "Description : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",
                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },


                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });

            $("#Contractcategory_temp").focus(function () {
                $(this).data('catval', $(this).val());
            });
            $("#Contractcategory_temp").change(function () {
                var initialvalue = "Category : " + $(this).data('catval');
                var details = "Category : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",
                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },

                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });

            $("#Contractsubcategory_temp").focus(function () {
                $(this).data('subval', $(this).val());
            });
            $("#Contractsubcategory_temp").change(function () {
                var initialvalue = "SubCategory : " + $(this).data('subval');
                var details = "SubCategory : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",
                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },

                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);


                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });

            $("#typeformtemplate").focus(function () {
                $(this).data('tempval', $(this).val());
            });
            $("#typeformtemplate").change(function () {
                var initialvalue = "Template Type : " + $(this).data('tempval');
                var details = "Template Type : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",
                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },

                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });

            $("#supportingfiles").focus(function () {
                $(this).data('suppval', $(this).val());
            });
            $("#supportingfiles").change(function () {
                var initialvalue = "Supporting File : " + $(this).data('suppval');
                var details = "Supporting File : " + $(this).val();
                var ID = $("#contractid").val();

                $.ajax({
                    type: "POST",
                    url: "/Contract/SaveLog",

                    data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },


                    success: function (response) {

                        //alert(response.LogUserID);
                        // alert(called);
                    },
                    failure: function (response) {
                        alert(response);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    }
                });
            });


        });
    </script>*@



<script>
    function SelectFunctionPreview(TemplateID) {
        //alert(TemplateID);
        var TemplateName = "";
        var TemplateID_Contract = "";
        $.ajax({
            type: "POST",
            url: "/Contract/getTemplateModalDetails",
            data: { TemplateID: TemplateID },


            success: function (response) {
                // alert(response.Name);
                $.each(response, function (index, value) {
                    TemplateName = TemplateName + value.Name;
                    TemplateID_Contract = TemplateID_Contract + value.TemplateID;
                });
                $("#Template_Name").val(TemplateName);
                $("#ContractIDforTemplate").val(TemplateID_Contract);
            },

            error: function (response) {
                alert(response.responseText);
            }

        });
    }
</script>





<script>

    function UploadSignOff() {
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        $.ajax({
            url: "/Contract/UploadModifiedForSignOff",
            type: "POST",
            data: function () {
                var data = new FormData();
                data.append("ID", ID);
                data.append("UploadSignOffContractFile", jQuery("#UploadSignOffContractFile").get(0).files[0]);
                return data;
            }(),
            contentType: false,
            processData: false,
            success: function (response) {
                if (response == "success") {
                    swal("Uploaded for SignOff", {
                        icon: "success",
                    }).then(function (result) {
                        if (result) {
                            window.location = '/Addendum/Details/' + ID;
                            //$("#SignedContractModal").hide();

                        }
                    });
                }
                else
                    swal("Error", {
                        icon: "error",
                    });
            },
            error: function (jqXHR, textStatus, errorMessage) {
                console.log(errorMessage);
            }
        });
    }
</script>



<script>
    function SelectApprover1(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID1").html(EmployeeID);
                        $("#Name1").html(response[1]);
                        $("#Email1").html(response[2]);
                        $("#Desg1").html(response[3]);
                        $("#Role1").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover2(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID2").html(EmployeeID);
                        $("#Name2").html(response[1]);
                        $("#Email2").html(response[2]);
                        $("#Desg2").html(response[3]);
                        $("#Role2").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover3(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID3").html(EmployeeID);
                        $("#Name3").html(response[1]);
                        $("#Email3").html(response[2]);
                        $("#Desg3").html(response[3]);
                        $("#Role3").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover4(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID4").html(EmployeeID);
                        $("#Name4").html(response[1]);
                        $("#Email4").html(response[2]);
                        $("#Desg4").html(response[3]);
                        $("#Role4").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover5(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID5").html(EmployeeID);
                        $("#Name5").html(response[1]);
                        $("#Email5").html(response[2]);
                        $("#Desg5").html(response[3]);
                        $("#Role5").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover6(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID6").html(EmployeeID);
                        $("#Name6").html(response[1]);
                        $("#Email6").html(response[2]);
                        $("#Desg6").html(response[3]);
                        $("#Role6").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover7(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID7").html(EmployeeID);
                        $("#Name7").html(response[1]);
                        $("#Email7").html(response[2]);
                        $("#Desg7").html(response[3]);
                        $("#Role7").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover8(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID8").html(EmployeeID);
                        $("#Name8").html(response[1]);
                        $("#Email8").html(response[2]);
                        $("#Desg8").html(response[3]);
                        $("#Role8").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover9(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID9").html(EmployeeID);
                        $("#Name9").html(response[1]);
                        $("#Email9").html(response[2]);
                        $("#Desg9").html(response[3]);
                        $("#Role9").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover10(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Contract/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID10").html(EmployeeID);
                        $("#Name10").html(response[1]);
                        $("#Email10").html(response[2]);
                        $("#Desg10").html(response[3]);
                        $("#Role10").html(response[4]);
                    }

                }
            });

        }
    }
</script>


<script>
    function ApproverTable() {
        var currentuserid = "@CurrentUserID()";
         var ContractDept = $("#Contractcategory").val();;
        var ContractSubDept = $("#Contractsubcategory").val();
        var Type = $("#typeformtemplate").val();
      
        //alert(TemplateCluster);
                    if ((ContractDept).length > 1 && (ContractSubDept).length > 1 && (Type).length > 1) {


                        $.ajax({
                            async: false,
                            type: "POST",
                            url: "/Contract/GetApprovalLevel",
                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, Type:Type },
                            dataType: "json",


                            success: function (response) {

                                var Level1 = response[1];
                                var Level2 = response[2];
                                var Level3 = response[3];
                                var Level4 = response[4];
                                var Level5 = response[5];
                                var Level6 = response[6];
                                var Level7 = response[7];
                                var Level8 = response[8];
                                var Level9 = response[9];
                                var Level10 = response[10];

                                $("#ApproversTable tbody").html("");

                                if (Level1 == "Level1") {
                                    var selectlist = "";
                                    if("@Model.Status" == "Draft")
                                    {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level1_Id' onchange='SelectApprover1(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }
                                    var htmlData = "<tr><td>Approver 1</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID1'></td><td id='Name1'></td><td id='Email1'></td><td id='Desg1'></td><td id='Role1'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 1;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber, Type:Type  },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {
                                                    var EmployeeID = value;
                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level1_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });

                                                        var EmpId = $('#Level1_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID1").html(EmployeeID);
                                                                $("#Name1").html(response[1]);
                                                                $("#Email1").html(response[2]);
                                                                $("#Desg1").html(response[3]);
                                                                $("#Role1").html(response[4]);
                                                            }
                                                        });
                                                    }

                                                });
                                            }

                                        });
                                    }
                                }
                                if (Level2 == "Level2") {
                                    var selectlist = "";
                                    if("@Model.Status" == "Draft")
                                    {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level2_Id' onchange='SelectApprover2(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }
                                    var htmlData = "<tr><td>Approver 2</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID2'></td><td id='Name2'></td><td id='Email2'></td><td id='Desg2'></td><td id='Role2'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 2;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {
                                                    var EmployeeID = value;

                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level2_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });
                                                        var EmpId = $('#Level2_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID2").html(EmployeeID);
                                                                $("#Name2").html(response[1]);
                                                                $("#Email2").html(response[2]);
                                                                $("#Desg2").html(response[3]);
                                                                $("#Role2").html(response[4]);
                                                            }
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level3 == "Level3") {
                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level3_Id' onchange='SelectApprover3(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }
                                    var htmlData = "<tr><td>Approver 3</td>" + selectlist + "<td class = 'EmployeeIdDetails' id='EmpID3'></td><td id='Name3'></td><td id='Email3'></td><td id='Desg3'></td><td id='Role3'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 3;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;
                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level3_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });
                                                        var EmpId = $('#Level3_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID3").html(EmployeeID);
                                                                $("#Name3").html(response[1]);
                                                                $("#Email3").html(response[2]);
                                                                $("#Desg3").html(response[3]);
                                                                $("#Role3").html(response[4]);
                                                            }
                                                        });
                                                    }

                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level4 == "Level4") {

                                     var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level4_Id' onchange='SelectApprover4(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }
                                    var htmlData = "<tr><td>Approver 4</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID4'></td><td id='Name4'></td><td id='Email4'></td><td id='Desg4'></td><td id='Role4'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 4;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber, Type:Type  },

                                            dataType: 'json',
                                            success: function (response) {

                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;

                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level4_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });

                                                        var EmpId = $('#Level4_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID4").html(EmployeeID);
                                                                $("#Name4").html(response[1]);
                                                                $("#Email4").html(response[2]);
                                                                $("#Desg4").html(response[3]);
                                                                $("#Role4").html(response[4]);
                                                            }
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level5 == "Level5") {

                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level5_Id' onchange='SelectApprover5(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }
                                    var htmlData = "<tr><td>Approver 5</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID5'></td><td id='Name5'></td><td id='Email5'></td><td id='Desg5'></td><td id='Role5'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 5;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;

                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level5_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });
                                                        var EmpId = $('#Level5_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID5").html(EmployeeID);
                                                                $("#Name5").html(response[1]);
                                                                $("#Email5").html(response[2]);
                                                                $("#Desg5").html(response[3]);
                                                                $("#Role5").html(response[4]);
                                                            }
                                                        });
                                                    }

                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level6 == "Level6") {


                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level6_Id' onchange='SelectApprover6(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }
                                    var htmlData = "<tr><td>Approver 6</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID6'></td><td id='Name6'></td><td id='Email6'></td><td id='Desg6'></td><td id='Role6'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 6;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;
                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level6_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });
                                                        var EmpId = $('#Level6_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID6").html(EmployeeID);
                                                                $("#Name6").html(response[1]);
                                                                $("#Email6").html(response[2]);
                                                                $("#Desg6").html(response[3]);
                                                                $("#Role6").html(response[4]);
                                                            }
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level7 == "Level7") {

                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level7_Id' onchange='SelectApprover7(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }

                                    var htmlData = "<tr><td>Approver 7</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID7'></td><td id='Name7'></td><td id='Email7'></td><td id='Desg7'></td><td id='Role7'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 7;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber, Type:Type  },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;
                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level7_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });
                                                        var EmpId = $('#Level7_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID7").html(EmployeeID);
                                                                $("#Name7").html(response[1]);
                                                                $("#Email7").html(response[2]);
                                                                $("#Desg7").html(response[3]);
                                                                $("#Role7").html(response[4]);
                                                            }
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level8 == "Level8") {

                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level8_Id' onchange='SelectApprover8(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }

                                    var htmlData = "<tr><td>Approver 8</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID8'></td><td id='Name8'></td><td id='Email8'></td><td id='Desg8'></td><td id='Role8'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 8;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;

                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level8_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });

                                                        var EmpId = $('#Level8_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID8").html(EmployeeID);
                                                                $("#Name8").html(response[1]);
                                                                $("#Email8").html(response[2]);
                                                                $("#Desg8").html(response[3]);
                                                                $("#Role8").html(response[4]);
                                                            }
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level9 == "Level9") {

                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level9_Id' onchange='SelectApprover9(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }

                                    var htmlData = "<tr><td>Approver 9</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID9'></td><td id='Name9'></td><td id='Email9'></td><td id='Desg9'></td><td id='Role9'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 9;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;

                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level9_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });

                                                        var EmpId = $('#Level9_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID9").html(EmployeeID);
                                                                $("#Name9").html(response[1]);
                                                                $("#Email9").html(response[2]);
                                                                $("#Desg9").html(response[3]);
                                                                $("#Role9").html(response[4]);
                                                            }
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                }
                                if (Level10 == "Level10") {

                                    var selectlist = "";
                                    if ("@Model.Status" == "Draft") {
                                        selectlist = selectlist + "<td><select class='form-control' id='Level10_Id' onchange='SelectApprover10(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                    }

                                    var htmlData = "<tr><td>Approver 10</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID10'></td><td id='Name10'></td><td id='Email10'></td><td id='Desg10'></td><td id='Role10'></td></tr>";
                                    $("#ApproversTable tbody").append(htmlData);

                                    var LevelNumber = 10;
                                    if ("@Model.Status" == "Draft") {
                                        $.ajax({

                                            async: false,
                                            url: '/Contract/GetApproversBasedOnDeptAndSubDept',
                                            type: 'POST',
                                            data: { ContractDept: ContractDept, ContractSubDept: ContractSubDept, LevelNumber: LevelNumber , Type:Type },

                                            dataType: 'json',
                                            success: function (response) {
                                                $.each(response, function (index, value) {

                                                    var EmployeeID = value;

                                                    if (currentuserid != EmployeeID) {
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Contract/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                var ApproverDetail = EmployeeID + " - " + response[1];
                                                                var x = document.getElementById("Level10_Id");
                                                                var option = document.createElement("option");
                                                                option.text = ApproverDetail;
                                                                option.value = EmployeeID;
                                                                x.add(option);
                                                            }
                                                        });
                                                        var EmpId = $('#Level10_Id').val();
                                                        var EmployeeID = EmpId;
                                                        $.ajax({

                                                            async: false,
                                                            url: '/Template/GetUserById',
                                                            type: 'POST',
                                                            data: { EmployeeID: EmployeeID },

                                                            dataType: 'json',
                                                            success: function (response) {
                                                                $("#EmpID10").html(EmployeeID);
                                                                $("#Name10").html(response[1]);
                                                                $("#Email10").html(response[2]);
                                                                $("#Desg10").html(response[3]);
                                                                $("#Role10").html(response[4]);
                                                            }
                                                        });
                                                    }

                                                });
                                            }
                                        });
                                    }

                                }
                            }
                        });

                    }
    }

</script>

<script>
    function DiscardChanges() {
        swal({
            title: 'Are you sure?',
            text: "You want to Discard !",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Keep it !',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes, Discard it !',
                    className: 'btn btn-danger'
                },
            }
        }).then(function (value) {
            if (value == true) {
                window.location.reload();
            }
        });
    }
</script>
<script>
    $(function () {
        $("#contracttype").val("@Model.ContractType");
    });
</script>