@model ContractManagementSystem.Models.tblTemplateMaster
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
    string CurrentUserID()
    {
        string userName = string.Empty;

        if (HttpContext.Current.Request.IsAuthenticated)
        {
            userName = HttpContext.Current.User.Identity.Name.Split('|')[1];
        }

        return userName;

    }
    string CurrentUserName()
    {
        string userName = string.Empty;

        if (HttpContext.Current.Request.IsAuthenticated)
        {
            userName = HttpContext.Current.User.Identity.Name.Split('|')[0];
        }

        return userName;

    }
    string CurrentUserLoggedID = CurrentUserID();
    int CurrentLoggedUserID = Convert.ToInt32(CurrentUserID());
    string CurrentLoggedUserName = CurrentUserName();
}

<div class="main-panel">
    <div class="content">
        <div class="page-inner">
            <div class="page-header">
                <h4 class="page-title">Template ID :&nbsp;@Model.TemplateID</h4>
                <ul class="breadcrumbs">
                    <li class="nav-home">
                        <a href="~/Home/Dashboard">
                            <i class="flaticon-home"></i>
                        </a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href="~/Template/Repository">Template</a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        Details
                    </li>
                </ul>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="row align-items-center form-inline">
                                <div class="col-sm-7">
                                    <h2>
                                        <b id="ChangeNameOnEdit">@Model.Name Details</b> &nbsp;

                                        @{ if (Model.Status == "Draft")
                                            {
                                                <span class='badge Legal shadow draft'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Draft</span>
                                                </span>
                                            }
                                            if (Model.Status == "Pending Approval")
                                            {
                                                <span class='badge Legal shadow  Pennding_Approvals'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Pending Approvals</span>
                                                </span>
                                            }
                                            if (Model.Status == "Rejected")
                                            {
                                                <span class='badge Legal shadow Rework'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Reject / Rework</span>
                                                </span>
                                            }
                                            if (Model.Status == "In Effect")
                                            {
                                                <span class='badge Legal shadow Ineffect'>
                                                    <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                                    <span>Approved</span>
                                                </span>
                                            }
                                        }
                                    </h2>
                                </div>
                                <div class="col-sm-5 text-right">
                                    <button onclick="Back();" class="btn btn-sm btn-light" id="BackButton" title="Back to Repository"><i class="flaticon-back" aria-hidden="true"></i>&nbsp; Back</button>
                                    @if (((Model.Status == "Draft") && ("" + Model.Initiator == CurrentUserLoggedID)) || (((Model.Status == "Pending Approval") || (Model.Status == "Rejected")) && ("" + Model.NextApprover == CurrentUserLoggedID)))
                                    {
                                        <button type="button" class="btn btn-sm btn-light" title="Edit" id="editalert"><i class="flaticon-pencil" aria-hidden="true"></i>&nbsp; Edit</button>
                                    }
                                    @if ((Model.Status == "Draft") && ("" + Model.Initiator == CurrentUserLoggedID))
                                    {
                                        <button type="button" class="btn btn-sm btn-light" id="deletealert" title="Delete"><i class="flaticon-interface-5" aria-hidden="true"></i> &nbsp;Delete</button>
                                    }
                                    <input type="hidden" id="hiddenID" class="form-control" name="TemplateID" value="@Model.TemplateID" readonly />
                                    <input type="hidden" id="UserID" class="form-control" name="UserID" value="@CurrentUserID()" />
                                    <button class="btn btn-sm btn-light" title="History" data-toggle="modal" data-target="#LogModel"><i class="flaticon-clock-1" aria-hidden="true"></i>&nbsp;&nbsp;History</button>
                                </div>
                            </div>

                        </div>

                        <div class="card-body">
                            <form>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="Cluster">Template Name<span class="asteriskicon"> *</span></label>
                                            <input type="text" maxlength="65" class="form-control input_text" title="Numbers and Special characters not allowed" onkeyup="this.value = this.value.replace(/[^a-zA-Z\s]/g, '');" name="Name" id="templatename" value="@Model.Name" placeholder="Enter Template Name" required="required" readonly />
                                            <input type="hidden" class="form-control" id="templateid" name="TemplateID" value="@Model.TemplateID" readonly />
                                            <input type="hidden" id="Initiator" value="@CurrentUserID()" />
                                        </div>
                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="description">Template Description</label>
                                            <textarea class="form-control text_area input_text" maxlength="180" title="Special characters not allowed" onkeyup="this.value = this.value.replace(/[^a-zA-Z0-9.,\s]/g, '');" name="Description" id="templatedescription" placeholder="Enter Template Description" disabled>@Model.Description</textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    @*<div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="Cluster">Department <span class="asteriskicon"> *</span></label>
                                                @if (Model.Status == "Draft")
                                                {
                                                    <select class="form-control input_text" onchange="ApproverTable();" id="Contractcategory" disabled required="required" style="padding-bottom:3px;padding-top:3px;">
                                                        <option>@Model.Department</option>

                                                    </select>
                                                }
                                                else
                                                {
                                                    <input type="text" class="form-control" id="Contractcategory" maxlength="180" value="@Model.Department" required="required" disabled />
                                                }
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label for="Finance">Sub Department <span class="asteriskicon"> *</span></label>
                                                @if (Model.Status == "Draft")
                                                {
                                                    <select class="form-control input_text" onchange="ApproverTable();" id="Contractsubcategory" disabled required="required" style="padding-bottom:3px;padding-top:3px;">
                                                        <option>@Model.SubDepartment</option>

                                                    </select>
                                                }
                                                else
                                                {
                                                    <input type="text" class="form-control" id="Contractsubcategory" maxlength="180" value="@Model.SubDepartment" required="required" disabled />
                                                }
                                            </div>
                                        </div>*@

                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <label for="entity">Template Type<span class="asteriskicon"> *</span></label>

                                            <select class="form-control input_text" id="type_of_entities" name="UserCategory" disabled required="required" style="padding-bottom:3px;padding-top:3px;">

                                                <option value="Category">Category</option>
                                                <option value="Sub Category"> Sub Category</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-3">
                                        <div class="form-group">
                                            <label>Template Sequence<span class="asteriskicon"> *</span></label>
                                            <input type="number" value="@Model.TemplateSequence" maxlength="3" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" min="1" max="300" onkeyup="this.value = this.value.replace(/[^0-9]/g, '');" class="form-control input_text" disabled id="TemplateSequence" />
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label for="Category">Template Category<span class="asteriskicon"> *</span></label>
                                            <select class="form-control input_text" onchange="selectsubcategory(this.value);" id="templatecategory" disabled required="required" style="padding-bottom:3px;padding-top:3px;">
                                                <option>@Model.Category</option>

                                            </select>

                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label for="Category">Template Sub - Category<span class="asteriskicon" id="SubCategoryStar"> *</span></label>
                                            <select class="form-control input_text_subcategory" id="templatesubcategory" disabled required="required" style="padding-bottom:3px;padding-top:3px;">
                                                <option>@Model.SubCategory</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <br />
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header CardHeader_Approvers">
                                                <div class="row align-items-center">
                                                    <div class="col-sm-6">
                                                        <div class="card-title"><h5><b>Approver (s) <span class="asteriskicon"> *</span></b></h5></div>
                                                    </div>
                                                    @if (User.IsInRole("legal"))
                                                    {
                                                        if (Model.Status == "Draft")
                                                        {
                                                            <div class="col-sm-6 text-right">
                                                                <button type="button" onclick="OnLoadButton();" style="color:blue;" id="Load_button" disabled class="btn btn-sm btn-light" data-toggle="modal">Load Approvers</button>
                                                                &nbsp;<button type="button" onclick="RemoveApproverButton();" style="color:red;" disabled id="Remove_button" class="btn btn-sm btn-light">Remove Approvers</button>

                                                            </div>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-lg-12 text-right">

                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <div class="table-responsive">
                                                                    <table id="ApproversTable" class="display table table-bordered  appoverTabel">
                                                                        <thead>
                                                                            <tr>
                                                                                <th><center>Approval Level</center></th>
                                                                                @if (Model.Status.ToLower() == "draft")
                                                                                {
                                                                                    <th><center>Select Approvers</center></th>
                                                                                }
                                                                                <th><center>Employee ID</center></th>
                                                                                <th><center>Employee Name</center></th>
                                                                                <th><center>Employee Email Address</center></th>
                                                                                <th><center>Employee Designation</center></th>
                                                                                <th><center>Employee Role (s)</center></th>
                                                                                @if (Model.Status.ToLower() != "draft")
                                                                                {
                                                                                    <th><center>Approval Status</center></th>
                                                                                }
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="aprrovallist">
                                                                        </tbody>
                                                                    </table>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-action text-right card_footer_button saverecord">
                                    <div class="row form-inline">
                                        <div class="col-sm-12 text-right">
                                            <button type="button" id="Save" onclick="updated();" class="btn btn-success saverecord" style="display:none;font-size:17px;width:180px;"><b>Save Changes</b></button>&nbsp;
                                            <button type="button" id="Discard" onclick="DiscardChanges();" class="btn btn-danger" style="display:none;font-size:17px;width:180px;"><b>Discard Changes</b></button>&nbsp;
                                            <a class="btn btn-success btn_SaveClearDiscard" id="Next_Button" href="@Url.Action("DraftView", "Template", new { id = Model.TemplateID })">Next</a>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="LogModel" role="dialog" tabindex="-1">
    @*<div class="text-right model_body_position">
            <a href="" data-dismiss="modal" class="modaldismissarrow"><i class="flaticon-error fa-3x " aria-hidden="true"></i></a>
        </div>*@

    <div class="modal-dialog" style="max-width: 80%;">

        <div class="modal-content">

            <div class="modal-header modalheadercolor websitecolour">
                <label style="font-size: 20px !important;"><b>Template Modified History</b></label>
                <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
            </div>
            <div class="modal-body" style="height:450px; overflow: auto;">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="tableFixHead_LogHistory">
                            <table class="table table-bordered">

                                <thead>

                                    <tr>
                                        <th><center>Date and Time</center></th>
                                        <th><center>Modified By</center></th>
                                        <th><center>Activity</center></th>
                                        <th><center>Changed From</center></th>
                                        <th><center>Changed To</center></th>

                                    </tr>

                                </thead>

                                <tbody id="tblTemplateLogList">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                @*<hr />

                    <div class="card-action text-right card_footer_button">
                        <input type="submit" class="btn btn-success" value="Select" id="CaptureHodList">
                        <input type="button" class="btn btn-danger" data-dismiss="modal" value="Cancel" />

                    </div>*@
            </div>
        </div>

    </div>
</div>
@*<div class="modal fade" id="searchmodal" role="dialog" tabindex="-1">
        <div class="text-right model_body_position">
            <a href="" data-dismiss="modal" class="modaldismissarrow"><i class="flaticon-error fa-3x " aria-hidden="true"></i></a>
        </div>

        <div class="modal-dialog" style="max-width:80%;">

            <div class="modal-content">


                <div class="modal-header modalheadercolor websitecolour">
                    <label style="font-size: 20px !important;"><b>Search Employee</b></label>
                    <button href="" data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-danger" style="color:white; font-size:13px;"><i class="flaticon-error"></i> &nbsp; Close</button>
                </div>
                <div class="modal-body" style="height:450px; overflow: auto;">
                    <div class="row">

                        <div class="col-sm-12">
                            <div class="form-group form-inline">
                                <div class="col-md-2">
                                    <label class="col-form-label"><b>Search By :</b></label>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-control" id="UserSearchOption" name="UserSearchType" style="padding-bottom:3px;padding-top:3px;">
                                        <option> Employee ID </option>
                                        <option> Employee Name </option>
                                        <option> Employee Email Address </option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <input type="text" onkeyup="this.value = this.value.replace(/[^a-zA-Z0-9@('@')\s]/g, '');" class="form-control input-full" placeholder="Type here and click search" id="EmployeeDetail" />
                                </div>
                                <div class="col-md-2">
                                    <center>
                                        <button class="btn btn-primary" id="valbtn" onclick="UserID();">&nbsp;&nbsp;<i class="fa fa-search" aria-hidden="true"></i>&nbsp; Search&nbsp;&nbsp;</button>
                                    </center>
                                </div>
                            </div>
                        </div>

                    </div>

                    <br />
                    <div class="row">
                        <div class="col-lg-12">
                            <center><h3><b id="UsererrorCode"></b></h3></center>
                        </div>
                    </div>

                    <br />


                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="Approvers_Table" class="display table table-bordered  appoverTabel">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th><center>Employee ID</center></th>
                                            <th><center>Employee Name</center></th>
                                            <th><center>Employee Email Address</center></th>
                                            <th><center>Cluster</center></th>
                                            <th><center>Function</center></th>
                                            <th><center>Employee Desgination</center></th>
                                            <th><center>Employee Role (s)</center></th>
                                        </tr>
                                    </thead>
                                    <tbody id="tblUsersSearchList"></tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
            </div>



        </div>
    </div>*@
<div class="modalload"><!-- Place at bottom of page --></div>



<script src="../../Content/assets/js/core/jquery.3.2.1.min.js"></script>

<script>
    function expandTextarea(Class) {
        var x = document.getElementsByClassName(Class);
        for (i = 0; i < x.length; i++) {
            x[i].addEventListener('keyup', function () {
                this.style.overflow = 'hidden';
                this.style.height = 0;
                this.style.height = this.scrollHeight + 'px';
            }, false);
        }
    }
    expandTextarea("text_area");
</script>


<script>

   $('#deletealert').click(function (e) {

        swal({
            title: 'Are you sure ?',
            text: "You won't be able to revert this !",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel it !',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes, Delete it !',
                    className: 'btn btn-danger'
                }
            }
        }).then(function (value) {
            if (value == true) {
               // _form.submit();
                var TemplateID = $("#hiddenID").val();
                var CurrentUserID = @CurrentUserID();
                $.ajax({
                    url: '/Template/DeleteTemplateFromDB',
                    type: 'POST',
                    data: { TemplateID: TemplateID, CurrentUserID: CurrentUserID },

                    dataType: 'json',
                    success: function (response) {
                        // console.log(response);
                        if (response == "success") {
                            swal("Successfully deleted the Template", {

                                icon: "success",
                                buttons: {
                                    confirm: {
                                        visible: true
                                    }
                                }
                            }).then(function (value) {
                                if (value == true) {
                                    window.location = "/Template/Repository";
                                }
                            });

                        }
                        else {
                            swal("Error in Deleting the template", {

                                icon: "error",
                                buttons: {
                                    confirm: {
                                        visible: true
                                    }
                                }
                            });
                        }

                    }
                });

            } else {
                swal("Your Data is safe", {
                    buttons: {
                        confirm: {
                            className: 'btn btn-success'
                        }
                    }
                });
            }
        });
    })

    //Edit button alert design
    $('#editalert').click(function (e) {
        //alert("helo");
        e.preventDefault();
        swal(" Are you sure you want to Edit !", {
            icon: "warning",
        buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel it !',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Edit it !',
                    className: 'btn btn-success'
                    //className: 'btn btn-success'
                }
            }
        }).then(function (value) {
            if (value == true) {
                $('.input_text').removeAttr('readonly');
                $('.input_text').removeAttr('disabled');
                $('input[type=checkbox]').removeAttr('disabled');
                $('textarea').removeAttr('readonly');
                $('textarea').removeAttr('disabled');
                $('select').removeAttr('disabled');
                $('datalist').removeAttr('disabled');
                $('button').removeAttr('disabled');
                try {
                    $('#Load_button').removeAttr('disabled');
                    $('#Remove_button').removeAttr('disabled');
                } catch (error) { }

                try {
                    $('#Save').show();
                } catch (error) { }
                try {
                    $('#Discard').show();
                    $('#Next_Button').hide();
                } catch (error) { }
                try {
                    document.getElementById("editalert").disabled = true;
                    document.getElementById("deletealert").disabled = true;
                    document.getElementById("BackButton").disabled = true;
                } catch (error) { }

                if ("@Model.Status" == "Draft") {
                    $('.select_level').removeAttr('disabled');
                } else {
                    $('.select_level').attr('disabled', 'disabled');
                }

                var TemplateFor = "@Model.Type";

                if (TemplateFor == "Category") {
                    $(".input_text_subcategory").attr('disabled','disabled');
                }
                else {
                    $(".input_text_subcategory").removeAttr('disabled');
                }

            } else {
                //swal("Cancelled", " ", "error");
            }
        });
    });
</script>

<script>
    function Back() {
        window.location = "/Template/Repository";
    }
</script>

<script>
    function updated() {
        var CurrentUserName = "@CurrentUserName()";
        var TemplateName = $("#templatename").val();
        var TemplateID = $("#hiddenID").val();
        var TemplateType = $("#type_of_entities").val();
        var TemplateDescription = $("#templatedescription").val();
        var CurrentUserID = $("#Initiator").val();
        var Category = $("#templatecategory").val();
        var SubCategory = $("#templatesubcategory").val();
        //var Department = $("#Contractcategory").val();
        //var SubDepartment = $("#Contractsubcategory").val();
        var TemplateSequence = $("#TemplateSequence").val();

        var UID = [];
        var Userlist = document.getElementsByClassName("EmployeeIdDetails");
        for (var i = 0; i < Userlist.length; i++) {
            UID.push(Userlist[i].innerHTML);
            //AppUsers.push(UID);
        }
        if ("@User.IsInRole("legal")" == "True") {

            if ((TemplateName.length > 0) && (TemplateType.length > 0)) {
                
                    if (TemplateType == "Category") {
                        if (Category.length > 0) {
                            $.ajax({
                                url: '/Template/UpdateTemplateInDB',
                                type: 'POST',
                                data: { UID: UID, TemplateName: TemplateName, TemplateID: TemplateID, TemplateType: TemplateType, TemplateDescription: TemplateDescription, CurrentUserID: CurrentUserID, Category: Category, SubCategory: SubCategory, TemplateSequence: TemplateSequence },

                                dataType: 'json',
                                success: function (response) {
                                    // console.log(response);
                                    if (response[0] = "success") {

                                        swal("Template details updated Successfully", {
                                            icon: "success",
                                        }).then(function (result) {
                                            if (result) {
                                                window.location = '/Template/Details/' + response[1];
                                            }
                                        });

                                    }
                                    else {
                                        swal("Error in updating the record", {
                                            icon: "error",

                                            //}).then((error) => {
                                            //    if (error) {

                                            //    }
                                        });
                                    }

                                }
                            });
                        }
                        else {
                            swal("All fields are required", {
                                icon: "warning",
                            });
                        }
                    }
                    else if (TemplateType == "Sub Category") {
                        if ((Category.length > 0) && (SubCategory.length > 0)) {
                            $.ajax({
                                url: '/Template/UpdateTemplateInDB',
                                type: 'POST',
                                data: { UID: UID, TemplateName: TemplateName, TemplateID: TemplateID, TemplateType: TemplateType, TemplateDescription: TemplateDescription, CurrentUserID: CurrentUserID, Category: Category, SubCategory: SubCategory, TemplateSequence: TemplateSequence },

                                dataType: 'json',
                                success: function (response) {
                                    // console.log(response);
                                    if (response[0] = "success") {

                                        swal("Template details updated Successfully", {
                                            icon: "success",
                                        }).then(function (result) {
                                            if (result) {
                                                window.location = '/Template/Details/' + response[1];
                                            }
                                        });

                                    }
                                    else {
                                        swal("Error in updating the record", {
                                            icon: "error",

                                            //}).then((error) => {
                                            //    if (error) {

                                            //    }
                                        });
                                    }

                                }
                            });
                        }
                        else {
                            swal("All fields are required", {
                                icon: "warning",
                            });
                        }
                    }
               
            }
            else {
                swal("All fields are required", {
                    icon: "warning",
                });
            }
        }
        else {
            if ((TemplateName.length > 0) && (TemplateType.length > 0)) {
                if (Userlist.length > 0) {
                    
                        if (TemplateType == "Category") {
                            if (Category.length > 0) {
                                 $.ajax({
                    url: '/Template/UpdateTemplateInDB',
                    type: 'POST',
                    data: { UID: UID, TemplateName: TemplateName, TemplateID: TemplateID, TemplateType: TemplateType, TemplateDescription: TemplateDescription, CurrentUserID: CurrentUserID, Category: Category, SubCategory: SubCategory, TemplateSequence: TemplateSequence },

                    dataType: 'json',
                    success: function (response) {
                        // console.log(response);
                        if (response[0] = "success") {

                            swal("Template details updated Successfully", {
                                icon: "success",
                            }).then(function (result) {
                                if (result) {
                                    window.location = '/Template/Details/' + response[1];
                                }
                            });

                        }
                        else {
                            swal("Error in updating the record", {
                                icon: "error",

                                //}).then((error) => {
                                //    if (error) {

                                //    }
                            });
                        }

                    }
                 });
                            }
                            else {
                                swal("All fields are required", {
                                        icon: "warning",
                                    });
                            }
                        }
                        else if((TemplateType == "Sub Category"))
                        {
                            if ((Category.length > 0) && (SubCategory.length > 0)) {
                                 $.ajax({
                    url: '/Template/UpdateTemplateInDB',
                    type: 'POST',
                    data: { UID: UID, TemplateName: TemplateName, TemplateID: TemplateID, TemplateType: TemplateType, TemplateDescription: TemplateDescription, CurrentUserID: CurrentUserID, Category: Category, SubCategory: SubCategory, TemplateSequence: TemplateSequence },

                    dataType: 'json',
                    success: function (response) {
                        // console.log(response);
                        if (response[0] = "success") {

                            swal("Template details updated Successfully", {
                                icon: "success",
                            }).then(function (result) {
                                if (result) {
                                    window.location = '/Template/Details/' + response[1];
                                }
                            });

                        }
                        else {
                            swal("Error in updating the record", {
                                icon: "error",

                                //}).then((error) => {
                                //    if (error) {

                                //    }
                            });
                        }

                    }
                 });
                            }
                            else {
                                swal("All fields are required", {
                                        icon: "warning",
                                    });
                            }
                        }
                  
                }
                else {
                    swal("Minimum of one approver is required !", {
                        icon: "warning",
                    });
                }

            }
            else {
                swal("All fields are required", {
                    icon: "warning",
                });
            }
        }


    }
</script>




<script>
    $(function () {
        // alert("hello");

        var tblLog = "";
        //var ID = $("#hiddenID").val();
        var ID = "@Model.TemplateID";
        //alert(ID);
        $.ajax({
            type: "POST",
            url: "/Template/getLogDetail",
            data: { ID: ID },

            dataType: 'json',
            success: function (response) {

                //alert(response.LogUserID);
               $.each($(response), function (index, value) {
                    tblLog = tblLog + '<tr><td><center>' + value.DateandTime + '</center></td><td><center>' + value.ModifiedBy + '</center></td><td style="text-align: left;">' + value.LogActivity + '</td><td style="text-align: left;">' + value.ChangedFrom + '</td><td style="text-align: left;">' + value.ChangedTo + '</td></tr>';
                });
                $("#tblTemplateLogList").html(tblLog);
            }
        });
    });
</script>




@* *****************Changes done on 11/3/2020 at 10:15 pm ******************* *@
<script>
    $("#templatename").keyup(function () {
        var TemplateName = $(this).val();
        //  var TemplateID = $(this).val();

        $("#ChangeNameOnEdit").html(TemplateName + " Details");
    });
</script>
@* ************************************************************************** *@

@**************************Integrated*****************************@


<script>
    function DataTable() {
        var currentuserid = "@CurrentUserID()";
        var Approver1ID = "@Model.Approver1ID";
        var Approver2ID = "@Model.Approver2ID";
        var Approver3ID = "@Model.Approver3ID";
        var Approver4ID = "@Model.Approver4ID";
        var Approver5ID = "@Model.Approver5ID";
        var Approver6ID = "@Model.Approver6ID";
        var Approver7ID = "@Model.Approver7ID";
        var Approver8ID = "@Model.Approver8ID";
        var Approver9ID = "@Model.Approver9ID";
        var Approver10ID = "@Model.Approver10ID";

        var TemplateDept = "@Model.Department";
        var TemplateSubDept = "@Model.SubDepartment";
       //   var Approver1Counter = 0;
      //  alert("Called on Load");
        var ApproverTableData = "";

              //alert("@Model.Approver1ID".length);
        if (Approver1ID > 0) {
                var EmployeeID = Approver1ID;
            $.ajax({
                async: false,
                   url: '/Template/GetUserById',
                    type: 'POST',
                     data: { EmployeeID: EmployeeID },

                     dataType: 'json',
                     success: function (response) {
                         // console.log(response);
                         var Approvestatus = "";
                         var selectlist = "";
                          if ("@Model.Status" != "Draft") {
                             var statusCheck = "@Model.Approver1Status";
                             //if ($(statusCheck).length < 0) {
                             if ("@string.IsNullOrWhiteSpace(@Model.Approver1Status)"=="True") {
                                // alert("sdfgh @Model.Approver1Status");
                                 Approvestatus = "<td> Review Pending  </td>";
                             }
                             else {
                                 Approvestatus = Approvestatus + "<td> @Model.Approver1Status  </td>";

                             }

                         }
                         if ("@Model.Status" == "Draft") {
                             selectlist = selectlist + "<td><select class='form-control select_level' id='Level1_Id' disabled onchange='SelectApprover1(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";

                         }
                         if (currentuserid != EmployeeID) {
                             ApproverTableData = ApproverTableData + "<tr><td id='LevelColumn1'>Approver 1</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID1'>" + Approver1ID + "</td><td id='Name1'>" + response[1] + "</td><td id='Email1'>" + response[2] + "</td><td id='Desg1'>" + response[3] + "</td><td id='Role1'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                             //alert(ApproverTableData);
                             $("#aprrovallist").html(ApproverTableData);

                         }



                         if (Approver2ID > 0) {
              //  alert("2ND Approver");
                            var EmployeeID = Approver2ID;
                             $.ajax({
                                 async: false,
                               url: '/Template/GetUserById',
                                type: 'POST',
                                 data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                   // console.log(response);
                                    var Approvestatus = "";
                                    var selectlist = "";
                                          if ("@Model.Status" != "Draft") {
                                             var statusCheck = "@Model.Approver2Status";
                                             //if ($(statusCheck).length < 0) {
                                             if ("@string.IsNullOrWhiteSpace(@Model.Approver2Status)"=="True") {
                                                // alert("sdfgh @Model.Approver2Status");
                                                 Approvestatus = "<td> Review Pending  </td>";
                                             }
                                             else {
                                                 Approvestatus = Approvestatus + "<td> @Model.Approver2Status  </td>";
                                             }

                                    }
                                    if ("@Model.Status" == "Draft") {
                             selectlist = selectlist + "<td><select class='form-control select_level' id='Level2_Id' disabled onchange='SelectApprover2(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";

                         }
                                    if (currentuserid != EmployeeID) {
                                        ApproverTableData = ApproverTableData + "<tr><td id='LevelColumn2'>Approver 2</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID2'>" + Approver2ID + "</td><td id='Name2'>" + response[1] + "</td><td id='Email2'>" + response[2] + "</td><td id='Desg2'>" + response[3] + "</td><td id='Role2'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                        //alert(ApproverTableData);
                                        $("#aprrovallist").html(ApproverTableData);

                                    }



                                    if (Approver3ID > 0) {
                                        var EmployeeID = Approver3ID;
                                        $.ajax({
                                             async: false,
                                           url: '/Template/GetUserById',
                                            type: 'POST',
                                             data: { EmployeeID: EmployeeID },

                                            dataType: 'json',
                                            success: function (response) {
                                               // console.log(response);
                                                var Approvestatus = "";
                                                var selectlist = "";
                                                      if ("@Model.Status" != "Draft") {
                                                         var statusCheck = "@Model.Approver3Status";
                                                         //if ($(statusCheck).length < 0) {
                                                         if ("@string.IsNullOrWhiteSpace(@Model.Approver3Status)"=="True") {
                                                            // alert("sdfgh @Model.Approver3Status");
                                                              Approvestatus = "<td> Review Pending  </td>";
                                                         }
                                                         else {
                                                             Approvestatus = Approvestatus + "<td> @Model.Approver3Status  </td>";
                                                         }

                                                }
                                                 if ("@Model.Status" == "Draft") {
                             selectlist = selectlist + "<td><select class='form-control select_level' id='Level3_Id' disabled onchange='SelectApprover3(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";

                         }
                                                if (currentuserid != EmployeeID) {
                                                    ApproverTableData = ApproverTableData + "<tr><td id='LevelColumn3'>Approver 3</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID3'>" + Approver3ID + "</td><td id='Name3'>" + response[1] + "</td><td id='Email3'>" + response[2] + "</td><td id='Desg3'>" + response[3] + "</td><td id='Role3'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                    //alert(ApproverTableData);
                                                    $("#aprrovallist").html(ApproverTableData);

                                                }

                                                if (Approver4ID > 0) {
                                                    var EmployeeID = Approver4ID;
                                                    $.ajax({
                                                         async: false,
                                                       url: '/Template/GetUserById',
                                                        type: 'POST',
                                                       data: { EmployeeID: EmployeeID },
                                                        dataType: 'json',
                                                        success: function (response) {
                                                           // console.log(response);
                                                            var Approvestatus = "";
                                                            var selectlist = "";
                                                             if ("@Model.Status" == "Draft") {
                                                                     selectlist = selectlist + "<td><select class='form-control select_level' id='Level4_Id' disabled onchange='SelectApprover4(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                  }
                                                                  if ("@Model.Status" != "Draft") {
                                                                     var statusCheck = "@Model.Approver4Status";
                                                                     //if ($(statusCheck).length < 0) {
                                                                     if ("@string.IsNullOrWhiteSpace(@Model.Approver4Status)"=="True") {
                                                                        // alert("sdfgh @Model.Approver4Status");
                                                                          Approvestatus = "<td> Review Pending  </td>";
                                                                     }
                                                                     else {
                                                                         Approvestatus = Approvestatus + "<td> @Model.Approver4Status  </td>";
                                                                     }

                                                            }
                                                            if (currentuserid != EmployeeID) {
                                                                ApproverTableData = ApproverTableData + "<tr><td>Approver 4</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID4'>" + Approver4ID + "</td><td id='Name4'>" + response[1] + "</td><td id='Email4'>" + response[2] + "</td><td id='Desg4'>" + response[3] + "</td><td id='Role4'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                //alert(ApproverTableData);
                                                                $("#aprrovallist").html(ApproverTableData);


                                                            }
                                                            if (Approver5ID > 0) {
                                                                var EmployeeID = Approver5ID;
                                                                $.ajax({
                                                                     async: false,
                                                                   url: '/Template/GetUserById',
                                                                    type: 'POST',
                                                                    data: { EmployeeID: EmployeeID },
                                                                    dataType: 'json',
                                                                    success: function (response) {
                                                                       // console.log(response);
                                                                        var Approvestatus = "";
                                                                        var selectlist = "";
                                                             if ("@Model.Status" == "Draft") {
                                                                     selectlist = selectlist + "<td><select class='form-control select_level' id='Level5_Id' disabled onchange='SelectApprover5(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                  }
                                                                              if ("@Model.Status" != "Draft") {
                                                                                 var statusCheck = "@Model.Approver5Status";
                                                                                 //if ($(statusCheck).length < 0) {
                                                                                 if ("@string.IsNullOrWhiteSpace(@Model.Approver5Status)"=="True") {
                                                                                    // alert("sdfgh @Model.Approver5Status");
                                                                                      Approvestatus = "<td> Review Pending  </td>";
                                                                                 }
                                                                                 else {
                                                                                     Approvestatus = Approvestatus + "<td> @Model.Approver5Status  </td>";
                                                                                 }

                                                                        }
                                                                        if (currentuserid != EmployeeID) {
                                                                            ApproverTableData = ApproverTableData + "<tr><td>Approver 5</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID5'>" + Approver5ID + "</td><td id='Name5'>" + response[1] + "</td><td id='Email5'>" + response[2] + "</td><td id='Desg5'>" + response[3] + "</td><td id='Role5'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                            //alert(ApproverTableData);
                                                                            $("#aprrovallist").html(ApproverTableData);


                                                                        }
                                                                        if (Approver6ID > 0) {
                                                                            var EmployeeID = Approver6ID;
                                                                            $.ajax({
                                                                                 async: false,
                                                                               url: '/Template/GetUserById',
                                                                                type: 'POST',
                                                                                data: { EmployeeID: EmployeeID },
                                                                                dataType: 'json',
                                                                                success: function (response) {
                                                                                   // console.log(response);
                                                                                     var Approvestatus = "";
                                                                                          if ("@Model.Status" != "Draft") {
                                                                                             var statusCheck = "@Model.Approver6Status";
                                                                                             //if ($(statusCheck).length < 0) {
                                                                                             if ("@string.IsNullOrWhiteSpace(@Model.Approver6Status)"=="True") {
                                                                                                // alert("sdfgh @Model.Approver6Status");
                                                                                                  Approvestatus = "<td> Review Pending  </td>";
                                                                                             }
                                                                                             else {
                                                                                                 Approvestatus = Approvestatus + "<td> @Model.Approver6Status  </td>";
                                                                                             }

                                                                                    }
                                                                                     var selectlist = "";
                                                             if ("@Model.Status" == "Draft") {
                                                                     selectlist = selectlist + "<td><select class='form-control select_level' disabled id='Level6_Id' onchange='SelectApprover6(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                  }
                                                                                    if (currentuserid != EmployeeID) {
                                                                                        ApproverTableData = ApproverTableData + "<tr><td>Approver 6</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID6'>" + Approver6ID + "</td><td id='Name6'>" + response[1] + "</td><td id='Email6'>" + response[2] + "</td><td id='Desg6'>" + response[3] + "</td><td id='Role6'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                        //alert(ApproverTableData);
                                                                                        $("#aprrovallist").html(ApproverTableData);

                                                                                    }
                                                                                     if (Approver7ID > 0) {
                                                                                            var EmployeeID = Approver7ID;
                                                                                         $.ajax({
                                                                                                 async: false,
                                                                                               url: '/Template/GetUserById',
                                                                                                type: 'POST',
                                                                                                data: { EmployeeID: EmployeeID },
                                                                                                dataType: 'json',
                                                                                                success: function (response) {
                                                                                                   // console.log(response);
                                                                                                     var Approvestatus = "";
                                                                                                              if ("@Model.Status" != "Draft") {
                                                                                                                 var statusCheck = "@Model.Approver7Status";
                                                                                                                 //if ($(statusCheck).length < 0) {
                                                                                                                 if ("@string.IsNullOrWhiteSpace(@Model.Approver7Status)"=="True") {
                                                                                                                    // alert("sdfgh @Model.Approver7Status");
                                                                                                                      Approvestatus = "<td> Review Pending  </td>";
                                                                                                                 }
                                                                                                                 else {
                                                                                                                     Approvestatus = Approvestatus + "<td> @Model.Approver7Status  </td>";
                                                                                                                 }

                                                                                                    }
                                                                                                     var selectlist = "";
                                                                                                     if ("@Model.Status" == "Draft") {
                                                                                                             selectlist = selectlist + "<td><select class='form-control select_level' disabled id='Level7_Id' onchange='SelectApprover7(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                          }
                                                                                                    if (currentuserid != EmployeeID) {
                                                                                                        ApproverTableData = ApproverTableData + "<tr><td>Approver 7</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID7'>" + Approver7ID + "</td><td id='Name7'>" + response[1] + "</td><td id='Email7'>" + response[2] + "</td><td id='Desg7'>" + response[3] + "</td><td id='Role7'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                        //alert(ApproverTableData);
                                                                                                        $("#aprrovallist").html(ApproverTableData);

                                                                                                    }
                                                                                                    if (Approver8ID > 0) {
                                                                                                        var EmployeeID = Approver8ID;
                                                                                                        $.ajax({
                                                                                                             async: false,
                                                                                                           url: '/Template/GetUserById',
                                                                                                            type: 'POST',
                                                                                                            data: { EmployeeID: EmployeeID },
                                                                                                            dataType: 'json',
                                                                                                            success: function (response) {
                                                                                                               // console.log(response);
                                                                                                                 var Approvestatus = "";
                                                                                                                      if ("@Model.Status" != "Draft") {
                                                                                                                         var statusCheck = "@Model.Approver8Status";
                                                                                                                         //if ($(statusCheck).length < 0) {
                                                                                                                         if ("@string.IsNullOrWhiteSpace(@Model.Approver8Status)"=="True") {
                                                                                                                            // alert("sdfgh @Model.Approver8Status");
                                                                                                                              Approvestatus = "<td> Review Pending  </td>";
                                                                                                                         }
                                                                                                                         else {
                                                                                                                             Approvestatus = Approvestatus + "<td> @Model.Approver8Status  </td>";
                                                                                                                         }

                                                                                                                }
                                                                                                                var selectlist = "";
                                                                                                     if ("@Model.Status" == "Draft") {
                                                                                                             selectlist = selectlist + "<td><select class='form-control select_level' disabled id='Level8_Id' onchange='SelectApprover8(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                          }
                                                                                                                if (currentuserid != EmployeeID) {
                                                                                                                    ApproverTableData = ApproverTableData + "<tr><td>Approver 8</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID8'>" + Approver8ID + "</td><td id='Name8'>" + response[1] + "</td><td id='Email8'>" + response[2] + "</td><td id='Desg8'>" + response[3] + "</td><td id='Role8'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                                    //alert(ApproverTableData);
                                                                                                                    $("#aprrovallist").html(ApproverTableData);

                                                                                                                }
                                                                                                                 if (Approver9ID > 0) {
                                                                                                                    var EmployeeID = Approver9ID;
                                                                                                                     $.ajax({
                                                                                                                         async: false,
                                                                                                                       url: '/Template/GetUserById',
                                                                                                                        type: 'POST',
                                                                                                                        data: { EmployeeID: EmployeeID },
                                                                                                                        dataType: 'json',
                                                                                                                        success: function (response) {
                                                                                                                           // console.log(response);
                                                                                                                             var Approvestatus = "";
                                                                                                                                      if ("@Model.Status" != "Draft") {
                                                                                                                                         var statusCheck = "@Model.Approver9Status";
                                                                                                                                         //if ($(statusCheck).length < 0) {
                                                                                                                                         if ("@string.IsNullOrWhiteSpace(@Model.Approver9Status)"=="True") {
                                                                                                                                            // alert("sdfgh @Model.Approver9Status");
                                                                                                                                              Approvestatus = "<td> Review Pending  </td>";
                                                                                                                                         }
                                                                                                                                         else {
                                                                                                                                             Approvestatus = Approvestatus + "<td> @Model.Approver9Status  </td>";
                                                                                                                                         }

                                                                                                                            }
                                                                                                                             var selectlist = "";
                                                                                                     if ("@Model.Status" == "Draft") {
                                                                                                             selectlist = selectlist + "<td><select class='form-control select_level' disabled id='Level9_Id' onchange='SelectApprover9(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                          }
                                                                                                                            if (currentuserid != EmployeeID) {
                                                                                                                                ApproverTableData = ApproverTableData + "<tr><td>Approver 9</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID9'>" + Approver9ID + "</td><td id='Name9'>" + response[1] + "</td><td id='Email9'>" + response[2] + "</td><td id='Desg9'>" + response[3] + "</td><td id='Role9'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                                                //alert(ApproverTableData);
                                                                                                                                $("#aprrovallist").html(ApproverTableData);

                                                                                                                            }
                                                                                                                            if (Approver10ID > 0) {
                                                                                                                                var EmployeeID = Approver10ID;
                                                                                                                                $.ajax({
                                                                                                                                     async: false,
                                                                                                                                   url: '/Template/GetUserById',
                                                                                                                                    type: 'POST',
                                                                                                                                    data: { EmployeeID: EmployeeID },
                                                                                                                                    dataType: 'json',
                                                                                                                                     success: function (response) {
                                                                                                                                         var Approvestatus = "";
                                                                                                                                              if ("@Model.Status" != "Draft") {
                                                                                                                                                 var statusCheck = "@Model.Approver10Status";
                                                                                                                                                 //if ($(statusCheck).length < 0) {
                                                                                                                                                 if ("@string.IsNullOrWhiteSpace(@Model.Approver10Status)"=="True") {
                                                                                                                                                    // alert("sdfgh @Model.Approver10Status");
                                                                                                                                                      Approvestatus = "<td> Review Pending  </td>";
                                                                                                                                                 }
                                                                                                                                                 else {
                                                                                                                                                     Approvestatus = Approvestatus + "<td> @Model.Approver10Status  </td>";
                                                                                                                                                 }

                                                                                                                                         }
                                                                                                                                          var selectlist = "";
                                                                                                     if ("@Model.Status" == "Draft") {
                                                                                                             selectlist = selectlist + "<td><select class='form-control select_level' disabled id='Level10_Id' onchange='SelectApprover10(this.value);' style='padding-bottom:3px;padding-top:3px;'></select></td>";
                                                                                                          }
                                                                                                                                         if (currentuserid != EmployeeID) {
                                                                                                                                             // console.log(response);
                                                                                                                                             ApproverTableData = ApproverTableData + "<tr><td>Approver 10</td>"+ selectlist +"<td class = 'EmployeeIdDetails' id='EmpID10'>" + Approver10ID + "</td><td id='Name10'>" + response[1] + "</td><td id='Email10'>" + response[2] + "</td><td id='Desg10'>" + response[3] + "</td><td id='Role10'>" + response[4] + "</td>" + Approvestatus + "</tr>";
                                                                                                                                             //alert(ApproverTableData);
                                                                                                                                             $("#aprrovallist").html(ApproverTableData);


                                                                                                                                         }
                                                                                                                                    }
                                                                                                                                 });

                                                                                                                            }

                                                                                                                        }
                                                                                                                     });

                                                                                                                }

                                                                                                            }
                                                                                                         });

                                                                                                    }

                                                                                                }
                                                                                             });

                                                                                            }

                                                                                }
                                                                             });

                                                                        }

                                                                    }
                                                                 });

                                                            }

                                                        }
                                                     });

                                                }

                                            }
                                         });
                                        }
                                }
                             });
                           // $("#aprrovallist").html(ApproverTableData)

                         }

                       //  Approver1Counter = 1;
                     }
                 });

        }


    }
</script>

@if (Model.Status == "Draft")
{
    <script>
    function LevelFunction() {
        @*var TemplateDept = "@Model.Department";
        var TemplateSubDept = "@Model.SubDepartment";*@
        var currentuserid = "@CurrentUserID()";

            var LevelNumber = 1;
            Approver1ID = "@Model.Approver1ID";
        $.ajax({
            async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;
                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level1_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver1ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });


                        }
                    });
                    var SelectBoxValue = $("#Level1_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level1_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
            });

            var LevelNumber = 2;
            Approver2ID = "@Model.Approver2ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;
                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level2_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver2ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });
                        }


                    });
                    var SelectBoxValue = $("#Level2_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level2_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

         var LevelNumber = 3;
            Approver3ID = "@Model.Approver3ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;
                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level3_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver3ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}


                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level3_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level3_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 4;
            Approver4ID = "@Model.Approver4ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level4_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver4ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}


                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level4_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level4_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 5;
            Approver5ID = "@Model.Approver5ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level5_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver5ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}



                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level5_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level5_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 6;
            Approver6ID = "@Model.Approver6ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level6_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver6ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level6_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level6_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 7;
            Approver7ID = "@Model.Approver7ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level7_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver7ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}


                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level7_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level7_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 8;
            Approver8ID = "@Model.Approver8ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level8_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver8ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}

                                }
                            });
                        }


                    });
                    var SelectBoxValue = $("#Level8_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level8_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 9;
            Approver9ID = "@Model.Approver9ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level9_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver9ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}



                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level9_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level9_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
        });

          var LevelNumber = 10;
            Approver10ID = "@Model.Approver10ID";
        $.ajax({
                async: false,
                url: '/Template/GetApproversBasedOnDeptAndSubDept',
                type: 'POST',
                data: {LevelNumber: LevelNumber},

                dataType: 'json',
                success: function (response) {
                    $.each(response, function (index, value) {
                        var EmployeeID = value;

                        if (currentuserid != EmployeeID) {
                            $.ajax({
                                async: false,
                                url: '/Template/GetUserById',
                                type: 'POST',
                                data: { EmployeeID: EmployeeID },

                                dataType: 'json',
                                success: function (response) {
                                    var ApproverDetail = EmployeeID + " - " + response[1];
                                    var x = document.getElementById("Level10_Id");
                                    var option = document.createElement("option");
                                    option.text = ApproverDetail;
                                    option.value = EmployeeID;
                                    if (option.value == Approver10ID) {
                                        option.defaultSelected = true;
                                    }
                                    try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}


                                }
                            });

                        }

                    });
                    var SelectBoxValue = $("#Level10_Id").val();
                //alert(SelectBoxValue);
                    if (SelectBoxValue == null) {
                        var x = document.getElementById("Level10_Id");
                        var option = document.createElement("option");
                                    option.text = "Approval workflow modified by the admin.";
                                    option.value = "";
                                   try {
                                        if (option == null) {

                                        }
                                        else {
                                            x.add(option);
                                        }
                                    } catch{}
                    }
                }
            });

    }
    </script>
}

<script>
    $(function () {
        DataTable();

        var Data = document.getElementsByClassName("EmployeeIdDetails");
        if (Data.length > 0) {
            try {
                LevelFunction();
            } catch{ }
        }
    });
</script>

<script>
    function OnLoadButton() {
        $("#ApproversTable tbody").html("");

        DataTable();

        var Data = document.getElementsByClassName("EmployeeIdDetails");
        if (Data.length > 0) {
          try {
                LevelFunction();
            } catch{}
        }

        if ("@Model.Status" == "Draft") {
                    $('.select_level').removeAttr('disabled');
                } else {
                    $('.select_level').attr('disabled', 'disabled');
                }

    }
    function RemoveApproverButton() {
        $("#ApproversTable tbody").html("");
    }
</script>

<script>
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "/Template/GetType_List",
            data: '{name: "' + $("#txtName").val() + '" }',

            success: function (response) {
                //alert(response)
                str = "";
                for (var i = 0; i < response.length; ++i) {
                    //alert(response[i]);
                    str += '<option value="' + response[i] + '" />'; // Storing options in variable
                }

                //var my_list = document.getElementById("type_of_entity");
                //my_list.innerHTML = str;

            },


        });
    });

</script>


<script>
    var Flag = 0
    $(function () {

        if (Flag == 0) {
            $.ajax({
                type: "POST",
                url: "/Template/getCategory",
                data: '{name: "' + $("#txtName").val() + '" }',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    //alert(response);
                    var x = document.getElementById("templatecategory");
                    x.innerHTML = "";
                    var option = document.createElement("option");

                    option.text = "-- Select --";
                     option.disabled = true;
                    x.add(option);
                    $.each(response, function (index, value) {
                        var option = document.createElement("option");
                        option.text = value;
                        if (option.text == "@Model.Category") {
                            option.defaultSelected = true;
                        }
                        x.add(option);
                    });
                }
            });
            Flag += 1;

        }

    });

    $(function () {
        var user_category_id = "@Model.Category";
          $.ajax({
            url: '/Template/getSubCategory',
            type: 'post',
            data: { user_category_id: user_category_id },

            dataType: 'json',
            success: function (response) {
                //alert(response);

                $('#templatesubcategory')
                        .find('option')
                        .remove();

                    var x = document.getElementById("templatesubcategory");

                    var option = document.createElement("option");
                //option.text = "-- Select SubCategory --";
                option.text = "-- Select --";
                option.value = "";
                 //option.disabled = true;
                    x.add(option);
                    $.each(response, function (index, value) {
                        var option = document.createElement("option");
                        option.text = value;
                        if (option.text == "@Model.SubCategory") {
                            option.defaultSelected = true;
                        }
                        x.add(option);
                    });
            },

        });
    });

    function selectsubcategory(user_category_id) {
        // alert(user_category_id)

        //var user_category_id = $(this).val();
        //alert("data :" + deptid);
        $.ajax({
            url: '/Template/getSubCategory',
            type: 'post',
            data: { user_category_id: user_category_id },

            dataType: 'json',
            success: function (response) {
                //alert(response);

                $('#templatesubcategory')
                        .find('option')
                        .remove();

                    var x = document.getElementById("templatesubcategory");

                    var option = document.createElement("option");
                option.text = "-- Select --";
                option.value = "";
                    x.add(option);
                    $.each(response, function (index, value) {
                        var option = document.createElement("option");
                        option.text = value;
                        x.add(option);
                    });
            },

        });
    }
</script>

@*@if (Model.Status == "Draft") {
      <script>
     $(function() {
            Flag1 = 0;
            if (Flag1 == 0) {
            $.ajax({
                async: false,
                type: "POST",
                url: "/Template/getDepartment",
                data: '{name: "' + $("#txtName").val() + '" }',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(response) {

                        var x = document.getElementById("Contractcategory");
                        x.innerHTML = "";
                        var option = document.createElement("option");

                        option.text = "-- Select --";
                        option.disabled = true;
                        x.add(option);
                    $.each(response, function(index, value) {

                            var option = document.createElement("option");
                            option.text = value;
                            if (option.text == "@Model.Department") {
                                option.defaultSelected = true;
                            }
                            x.add(option);
                        });
                    }
                });
                Flag1 += 1;

            }

        });

    $(function() {
            var user_category_id = "@Model.Department";
        $.ajax({
            async: false,
            url: '/Template/getSubDepartment',
            type: 'post',
            data: { user_category_id: user_category_id },

            dataType: 'json',
            success: function(response) {
                //alert(response);

                $('#Contractsubcategory')
                        .find('option')
                        .remove();

                    var x = document.getElementById("Contractsubcategory");

                    var option = document.createElement("option");
                    //option.text = "-- Select SubCategory --";
                    option.text = "-- Select --";
                    option.value = "";
                    //option.disabled = true;
                    x.add(option);
                    $.each(response, function(index, value) {
                        var option = document.createElement("option");
                        option.text = value;
                        if (option.text == "@Model.SubDepartment") {
                            option.defaultSelected = true;
                        }
                        x.add(option);
                    });
                },

        });
        });

    $("#Contractcategory").change(function() {
            // alert(user_category_id)

            var user_category_id = $(this).val();
        //alert("data :" + deptid);
        $.ajax({
            async: false,
            url: '/Template/getSubDepartment',
            type: 'post',
            data: { user_category_id: user_category_id },

            dataType: 'json',
            success: function(response) {
                //alert(response);

                $('#Contractsubcategory')
                    .find('option')
                    .remove();

                    var x = document.getElementById("Contractsubcategory");

                    var option = document.createElement("option");
                    option.text = "-- Select --";
                    option.value = "";
                    x.add(option);
                $.each(response, function(index, value) {
                        var option = document.createElement("option");
                        option.text = value;
                        x.add(option);
                    });
                },

        });
        });
      </script>
    }*@



<script>
    $("#TemplateSequence").keyup(function () {
        number = $("#TemplateSequence").val()
        if (number < 1 || number > 300) {
            $("#TemplateSequence").val("");
            //alert("0 - 100");
        }
    });
</script>
<script>
    function SelectApprover1(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID1").html(EmployeeID);
                        $("#Name1").html(response[1]);
                        $("#Email1").html(response[2]);
                        $("#Desg1").html(response[3]);
                        $("#Role1").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover2(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID2").html(EmployeeID);
                        $("#Name2").html(response[1]);
                        $("#Email2").html(response[2]);
                        $("#Desg2").html(response[3]);
                        $("#Role2").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover3(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID3").html(EmployeeID);
                        $("#Name3").html(response[1]);
                        $("#Email3").html(response[2]);
                        $("#Desg3").html(response[3]);
                        $("#Role3").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover4(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID4").html(EmployeeID);
                        $("#Name4").html(response[1]);
                        $("#Email4").html(response[2]);
                        $("#Desg4").html(response[3]);
                        $("#Role4").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover5(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID5").html(EmployeeID);
                        $("#Name5").html(response[1]);
                        $("#Email5").html(response[2]);
                        $("#Desg5").html(response[3]);
                        $("#Role5").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover6(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID6").html(EmployeeID);
                        $("#Name6").html(response[1]);
                        $("#Email6").html(response[2]);
                        $("#Desg6").html(response[3]);
                        $("#Role6").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover7(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID7").html(EmployeeID);
                        $("#Name7").html(response[1]);
                        $("#Email7").html(response[2]);
                        $("#Desg7").html(response[3]);
                        $("#Role7").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover8(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID8").html(EmployeeID);
                        $("#Name8").html(response[1]);
                        $("#Email8").html(response[2]);
                        $("#Desg8").html(response[3]);
                        $("#Role8").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover9(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID9").html(EmployeeID);
                        $("#Name9").html(response[1]);
                        $("#Email9").html(response[2]);
                        $("#Desg9").html(response[3]);
                        $("#Role9").html(response[4]);
                    }

                }
            });

        }
    }
    function SelectApprover10(EmployeeID) {

        if (EmployeeID.length > 0) {
            $.ajax({
                url: '/Template/GetUserById',
                type: 'POST',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (response) {
                    if (response[0] == "success") {
                        $("#EmpID10").html(EmployeeID);
                        $("#Name10").html(response[1]);
                        $("#Email10").html(response[2]);
                        $("#Desg10").html(response[3]);
                        $("#Role10").html(response[4]);
                    }

                }
            });

        }
    }
</script>


<script>
    $("#type_of_entities").change(function () {
        var TemplateType = $(this).val();
        if (TemplateType == "Category") {
            $("#templatesubcategory").prop("disabled", true);
            $("#templatecategory").prop("disabled", false);
            $("#SubCategoryStar").hide();
        }
        else {
            $("#templatecategory").prop("disabled", false);
            $("#templatesubcategory").prop("disabled", false);
            $("#SubCategoryStar").show();
        }

    });
</script>

<script>
    $(function () {
        $("#type_of_entities").val("@Model.Type");
    });
</script>

<script>
    function DiscardChanges() {
        swal({
            title: 'Are you sure?',
            text: "You want to Discard !",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Keep it !',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes, Discard it !',
                    className: 'btn btn-danger'
                },
            }
        }).then(function (value) {
            if (value == true) {
                window.location.reload();
            }
        });
    }
</script>

