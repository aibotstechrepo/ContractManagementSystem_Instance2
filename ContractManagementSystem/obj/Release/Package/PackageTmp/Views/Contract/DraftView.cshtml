@model ContractManagementSystem.Models.CommonModel
@{
    ViewBag.Title = "DraftView";
    Layout = "~/Views/Shared/_EditorLayout.cshtml";

    string CurrentUserID()
    {
        string userName = string.Empty;

        if (HttpContext.Current.Request.IsAuthenticated)
        {
            userName = HttpContext.Current.User.Identity.Name.Split('|')[1];
        }
        return userName;

    }
    string CurrentUserName()
    {
        string userName = string.Empty;

        if (HttpContext.Current.Request.IsAuthenticated)
        {
            userName = HttpContext.Current.User.Identity.Name.Split('|')[0];
        }

        return userName;

    }
    int CurrentLoggedUserID = Convert.ToInt32(CurrentUserID());
    string CurrentLoggedUserName = CurrentUserName();
}

<div>
    <div class="content">
        <div class="page-inner TemplateDraft_Card" style="padding-top:2px;">
            <div class="page-header" style="padding-left:40px; padding-right:40px; padding-bottom:4px;">
                <div class="row align-items-center form-inline">

                    <div class="col-sm-5">
                        <span class="page-title" id="AppendTemplateName" style="font-size:20px;"></span>

                        @{
                            {
                                string Id = Request.Url.AbsoluteUri.Split('/').Last();
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Approved").Any())
                                {
                                    <span class='badge Legal shadow draft'>
                                        <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                        <span>Approved</span>
                                    </span>

                                }
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "In Effect").Any())
                                {
                                    <span class='badge Legal shadow  Ineffect'>
                                        <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                        <span>Executed</span>
                                    </span>

                                }
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Pending Approval").Any())
                                {
                                    <span class='badge Legal shadow  Pennding_Approvals'>
                                        <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                        <span>Pending Approval</span>
                                    </span>

                                }
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Draft").Any())
                                {
                                    <span class='badge Legal shadow  draft'>
                                        <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                        <span>Draft</span>
                                    </span>

                                }
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Rejected").Any())
                                {
                                    <span class='badge Legal shadow  Rework'>
                                        <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                        <span>Rejected</span>
                                    </span>

                                }
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Expired").Any())
                                {
                                    <span class='badge Legal shadow  Expired'>
                                        <span class="dot" style="margin-bottom:1px;"> </span>&nbsp;
                                        <span>Expired</span>
                                    </span>

                                }

                            }

                            if (User.IsInRole("Initiator") || User.IsInRole("admin") || User.IsInRole("approver") || User.IsInRole("reviewer"))
                            {
                                string Id = Request.Url.AbsoluteUri.Split('/').Last();
                                if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.ContractModificationType == "Cloning").Any())
                                {
                                    @Html.Raw("&nbsp;")<span class='badge Legal_icon shadow'>Cloned from : <span id="OriginalID"></span></span>
                                }
                            }
                        }
                    </div>
                    <div class="col-sm-7 text-right">
                        <button type="button" onclick="PreviousPage();" id="backicon" title="Back to Details" class="btn btn-xs btn-light"><i class="flaticon-back" aria-hidden="true"></i>&nbsp; Back</button>
                        &nbsp;<button class="btn btn-xs btn-light" data-toggle="modal" id="AttachmentButton" data-target="#AttachmentModal"><i class="flaticon-tool" aria-hidden="true"></i>&nbsp; Attachments</button>
                        @if (User.IsInRole("Initiator") || User.IsInRole("admin") || User.IsInRole("approver") || User.IsInRole("reviewer"))
                        {
                            string Id = Request.Url.AbsoluteUri.Split('/').Last();

                            if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.ContractModificationType == "Amendments").Any())
                            {
                                @Html.Raw("&nbsp;")<button type="button" class="btn btn-xs btn-light" title="Amendments" onclick="ExtensionPage('Amendments');"><i class="flaticon-arrow"></i>&nbsp; Amendments</button>
                            }
                            if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.ContractModificationType == "Extension").Any())
                            {
                                @Html.Raw("&nbsp;")<button type="button" class="btn btn-xs btn-light" title="Extension" onclick="ExtensionPage('Extension');"><i class="flaticon-arrow"></i>&nbsp; Extension</button>

                            }
                            if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.ContractModificationType == "Termination").Any())
                            {
                                @Html.Raw("&nbsp;")<button type="button" class="btn btn-xs btn-light" title="Termination" onclick="ExtensionPage('Termination');"><i class="flaticon-arrow"></i>&nbsp; Termination</button>
                            }
                        }
                        @if (User.IsInRole("Initiator") || User.IsInRole("admin") || User.IsInRole("legal"))
                        {
                            string Id = Request.Url.AbsoluteUri.Split('/').Last();
                            string emp = CurrentUserID();
                            if ((Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Draft").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.NextApprover.ToString() == emp).Where(x => x.Status == "Rejected").Any()))

                            {

                                @Html.Raw("&nbsp;")<button class="btn btn-light btn-xs" title="Edit Content" id="Edit"><i class="flaticon-pencil" aria-hidden="true"></i>&nbsp; Edit Content</button>
                                <span id="Initiate_2">&nbsp;</span><button class="btn btn-light btn-xs" title="Initiate" id="Initiate" data-toggle="modal" onclick="initiate();" data-target="#InitiateModal"><i class="flaticon-success" aria-hidden="true"></i>&nbsp; Initiate</button>


                                <span id="Save_2" style="display:none;">&nbsp;</span><button type="button" title="Save" class="btn btn-light  btn-xs" id="Save" onclick="SaveTemplate();" style="display:none;"><i class="flaticon-success" aria-hidden="true"></i>&nbsp; Save</button>
                                @*<span id="Save_2_Placeholder" style="display:none;">&nbsp;</span><button type="button" title="Save" class="btn btn-light  btn-xs" id="Save_Placeholder" onclick="SavePlaceHolder();" style="display:none;"><i class="flaticon-success" aria-hidden="true"></i>&nbsp; Save</button>*@

                                <span id="Cancel_2" style="display:none;">&nbsp;</span><button type="button" title="Cancel" class="btn btn-light btn-xs" id="Cancel" style="display:none;"><i class="flaticon-error" aria-hidden="true"></i>&nbsp; Cancel</button>
                                @*<span id="Edit_Variables_2">&nbsp;</span><button class="btn btn-light btn-xs" title="Edit" id="Edit_Variables"><i class="flaticon-pencil" aria-hidden="true"></i>&nbsp; Edit PlaceHolder</button>*@
                                <span id="MoreVariable_id_2" style="display:none;">&nbsp;</span><button class="btn btn-light btn-xs" title="Add Place Holder" id="MoreVariable_id" data-toggle="modal" data-target="#AddMoreVariableTable" style="display:none;"><i class="flaticon-plus"></i>&nbsp; Add Place Holder</button>
                                <span id="RemoveVariable_id_2" style="display:none;">&nbsp;</span><button class="btn btn-light btn-xs" title="Remove Place Holder" id="RemoveVariable_id" style="display:none;"><i class="flaticon-interface-5"></i>&nbsp; Remove Place Holder</button>

                            }

                            if ((Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "In Effect").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.Status == "Expired").Any()))
                            {
                                @Html.Raw("&nbsp;")<button type="button" title="Clone" class="btn btn-xs btn-light" onclick="SaveClonningContract();"><i class="flaticon-web-1" aria-hidden="true"></i>&nbsp; Clone</button>


                            }

                        }
                        @if (User.IsInRole("approver") || User.IsInRole("legal"))
                        {
                            string Id = Request.Url.AbsoluteUri.Split('/').Last();
                            string emp = CurrentUserID();
                            if (Model.Contract.Where(x => x.ContractID.ToString() == Id).Where(x => x.NextApprover.ToString() == emp).Where(x => x.Status == "Pending Approval").Any())
                            {
                                @Html.Raw("&nbsp;")<button class="btn btn-light btn-xs" id="Approve" title="Approve" data-toggle="modal" data-target="#ApproveModal"><i class="flaticon-success" aria-hidden="true"></i>&nbsp; Approve</button>
                                @Html.Raw("&nbsp;")<button class="btn btn-light btn-xs" id="Reject" title="Reject" data-toggle="modal" data-target="#RejectAndAssignModal"><i class="flaticon-error" aria-hidden="true"></i>&nbsp; Reject </button>
                                if (User.IsInRole("legal"))
                                {
                                    @Html.Raw("&nbsp;")<button class="btn btn-light btn-xs" title="Edit Content" id="Edit"><i class="flaticon-pencil" aria-hidden="true"></i>&nbsp; Edit Content</button>
                                    <span id="Save_2" style="display:none;">&nbsp;</span><button type="button" title="Save" class="btn btn-light  btn-xs" id="Save" onclick="SaveTemplate();" style="display:none;"><i class="flaticon-success" aria-hidden="true"></i>&nbsp; Save</button>
                                    @*<span id="Save_2_Placeholder" style="display:none;">&nbsp;</span><button type="button" title="Save" class="btn btn-light  btn-xs" id="Save_Placeholder" onclick="SavePlaceHolder();" style="display:none;"><i class="flaticon-success" aria-hidden="true"></i>&nbsp; Save</button>*@

                                    <span id="Cancel_2" style="display:none;">&nbsp;</span><button type="button" title="Cancel" class="btn btn-light btn-xs" id="Cancel" style="display:none;"><i class="flaticon-error" aria-hidden="true"></i>&nbsp; Cancel</button>
                                    @*<span id="Edit_Variables_2">&nbsp;</span><button class="btn btn-light btn-xs" title="Edit" id="Edit_Variables"><i class="flaticon-pencil" aria-hidden="true"></i>&nbsp; Edit PlaceHolder</button>*@
                                    <span id="MoreVariable_id_2" style="display:none;">&nbsp;</span><button class="btn btn-light btn-xs" title="Add Place Holder" id="MoreVariable_id" data-toggle="modal" data-target="#AddMoreVariableTable" style="display:none;"><i class="flaticon-plus"></i>&nbsp; Add Place Holder</button>
                                    <span id="RemoveVariable_id_2" style="display:none;">&nbsp;</span><button class="btn btn-light btn-xs" title="Remove Place Holder" id="RemoveVariable_id" style="display:none;"><i class="flaticon-interface-5"></i>&nbsp; Remove Place Holder</button>


                                }

                            }

                        }
                        <span id="Download_Button">&nbsp;</span><button type="button" title="Download" class="btn btn-xs btn-light" data-toggle="modal" id="DownloadButton" data-target="#TemplateDownloadOptionModal" onclick="DownloadAcceptChanges();"><i class="flaticon-inbox"></i>&nbsp; Download</button>

                        @if (User.IsInRole("Initiator") || User.IsInRole("admin") || User.IsInRole("approver") || User.IsInRole("legal"))
                        {
                            string Id3 = Request.Url.AbsoluteUri.Split('/').Last();
                            string emp3 = CurrentUserID();
                            if ((Model.Contract.Where(x => x.ContractID.ToString() == Id3).Where(x => x.Status == "In Effect").Where(x => x.Initiator.ToString() == emp3).Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == Id3).Where(x => x.Status == "Expired").Where(x => x.Initiator.ToString() == emp3).Any()))
                            {
                                @Html.Raw("&nbsp;")<button class="btn btn-xs btn-light" type="button" id="dropdownMenuButton" data-toggle="dropdown">Addendum</button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <a class="dropdown-item" onclick="ContractModificationType('Amendments');" style="cursor:pointer;">Amendments</a>
                                    <a class="dropdown-item" onclick="ContractModificationType('Extension');" style="cursor:pointer;">Extension</a>
                                    <a class="dropdown-item" onclick="ContractModificationType('Termination');" style="cursor:pointer;">Termination</a>
                                </div>
                                <span id="ModificationButton" style="font-size:12px;"></span>

                            }
                        }
                        <span id="Version_Button">&nbsp;</span><button data-toggle="modal" title="Version Compare" data-target="#AddVersionModal" id="VersionButton" class="btn btn-xs btn-light DummyClass"><i class="flaticon-interface-2" aria-hidden="true"></i>&nbsp; Version</button>

                        &nbsp;<button class="btn btn-xs btn-light" title="History" data-toggle="modal" data-target="#LogModel"><i class="flaticon-clock-1" aria-hidden="true"></i>&nbsp;&nbsp;History</button>

                    </div>
                </div>
            </div>
            <div class="row" style="padding-left:20px; padding-right:40px;">
                <div class="col-md-8 card_Editor">
                    <div class="card" style="margin-bottom:-5px;">
                        <div class="card-body" style="flex: 0 0;padding: 0px;" id="DragTest">
                            <textarea name="editor1" id="IDofEditor"></textarea>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 card_Editor">

                    <div class="card tblVariable_font" style="margin-bottom:-5px;">

                        <div class="card-body tblVariableCard" style="height:575px;">

                            <div class="row">
                                <div class="col-sm-12">
                                    <div style="height:550px; overflow-y:auto;">
                                        <table id="tblVendorVariable" class="table table-bordered">
                                            <thead>
                                                <tr style="background-color: #f1f1f1;">
                                                    <th></th>
                                                    <th><center>Place Holder</center></th>
                                                    <th><center>Values</center></th>
                                                    <th><center>Action</center></th>
                                                </tr>
                                            </thead>
                                            <tbody id="Add_MoreVariable">

                                                <tr>
                                                    <td>@*<center><input type='checkbox' name='record' class='larger' disabled /></center>*@</td>
                                                    <td class="Variable_Name">Duration from</></td>
                                                    <td>
                                                        <div class="input-group date" id="datetimepicker7" data-target-input="nearest">
                                                            <input type="text" maxlength="180" id="Variable_DurationFrom" class="form-control datetimepicker-input Variable_Value" readonly data-target="#datetimepicker7" style="height:30px;" onkeyup="DurationFromTest();" onblur="test('Variable_DurationFrom', 'Duration From');" />
                                                            <div class="input-group-append" data-target="#datetimepicker7" data-toggle="datetimepicker">
                                                                <div class="input-group-text"><i class="fa fa-calendar-alt"></i></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <center>
                                                            <button class="btn btn-link" onclick="InsertVendorVariable('Variable_DurationFrom','Duration From');" disabled><i class="flaticon-plus"></i></button>
                                                        </center>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>@*<input type='checkbox' name='record' class='larger' disabled />*@</td>
                                                    <td class="Variable_Name">Duration to</td>
                                                    <td>
                                                        <div class="input-group date" id="datetimepicker8" data-target-input="nearest">
                                                            <input type="text" maxlength="180" id="Variable_DurationTo" class="form-control datetimepicker-input Variable_Value" readonly data-target="#datetimepicker8" style="height:30px;" onblur="test('Variable_DurationTo', 'Duration to');" />
                                                            <div class="input-group-append" data-target="#datetimepicker8" data-toggle="datetimepicker">
                                                                <div class="input-group-text"><i class="fa fa-calendar-alt"></i></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <center>
                                                            <button class="btn btn-link" onclick="InsertVendorVariable('Variable_DurationTo','Duration to');" disabled><i class="flaticon-plus"></i></button>
                                                        </center>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>@*<input type='checkbox' name='record' class='larger' disabled />*@</td>
                                                    <td class="Variable_Name">Vendor Name</td>
                                                    <td>
                                                        <input type="text" maxlength="180" id="Variable_VendorName" list="Datalist_VendorName" readonly class="form-control Variable_Value" style="height:30px;" onkeyup="test1();" />

                                                        <datalist id="Datalist_VendorName">
                                                        </datalist>
                                                    </td>
                                                    <td>
                                                        <center>
                                                            <button class="btn btn-link" onclick="InsertVendorVariable('Variable_VendorName', 'Vendor Name');" disabled><i class="flaticon-plus"></i></button>
                                                        </center>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>@*<input type='checkbox' name='record' class='larger' disabled />*@</td>
                                                    <td class="Variable_Name">Vendor GSTN</td>
                                                    <td>
                                                        <input type="text" maxlength="180" id="Variable_VendorGSTN" list="Datalist_VendorGSTN" readonly class="form-control Variable_Value" style="height:30px;" onkeyup="test1();" />
                                                        <datalist id="Datalist_VendorGSTN">
                                                        </datalist>
                                                    </td>
                                                    <td>
                                                        <center>
                                                            <button class="btn btn-link" onclick="InsertVendorVariable('Variable_VendorGSTN','Vendor GSTN');" disabled><i class="flaticon-plus"></i></button>
                                                        </center>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>@*<input type='checkbox' name='record' class='larger' disabled />*@</td>
                                                    <td class="Variable_Name">Authorised Signatory</td>
                                                    <td>
                                                        @*<input type="text" id="Variable_Signatory" class="Variable_Value" style="height:30px;" onkeyup="test('Variable_Signatory', 'Authorised Signatory');" />*@
                                                        <textarea id="Variable_Signatory" maxlength="180" rows="1" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td>
                                                        <center><button class="btn btn-link" onclick="InsertVendorVariable('Variable_Signatory','Authorised Signatory');" disabled><i class="flaticon-plus"></i></button></center>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>@*<input type='checkbox' name='record' class='larger' disabled />*@</td>
                                                    <td class="Variable_Name">Registered Address</td>
                                                    <td>
                                                        @*<input type="text" id="Variable_Address" class="Variable_Value" style="height:30px;" onkeyup="test('Variable_Address', 'Registered Address');" />*@
                                                        <textarea id="Variable_Address" rows="1" maxlength="1800" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td><center><button class="btn btn-link" onclick="InsertVendorVariable('Variable_Address','Registered Address');" disabled><i class="flaticon-plus"></i></button></center></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td class="Variable_Name">Branch1 Address</td>
                                                    <td>
                                                        @*<input type="text" id="Branch1_Address" class="Variable_Value" style="height:30px;" onkeyup="test('Branch1_Address', 'Branch1 Address');" />*@
                                                        <textarea id="Branch1_Address" rows="1" maxlength="1800" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td><center><button class="btn btn-link" onclick="InsertVendorVariable('Branch1_Address','Branch1 Address');" disabled><i class="flaticon-plus"></i></button></center></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td class="Variable_Name">Branch2 Address</td>
                                                    <td>
                                                        @*<input type="text" id="Branch2_Address" class="Variable_Value" style="height:30px;" onkeyup="test('Branch2_Address', 'Branch2 Address');" />*@
                                                        <textarea id="Branch2_Address" rows="1" maxlength="1800" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td><center><button class="btn btn-link" onclick="InsertVendorVariable('Branch2_Address','Branch2 Address');" disabled><i class="flaticon-plus"></i></button></center></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td class="Variable_Name">Branch3 Address</td>
                                                    <td>
                                                        @*<input type="text" id="Branch3_Address" class="Variable_Value" style="height:30px;" onkeyup="test('Branch3_Address', 'Branch3 Address');" />*@
                                                        <textarea id="Branch3_Address" rows="1" maxlength="1800" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td><center><button class="btn btn-link" onclick="InsertVendorVariable('Branch3_Address','Branch3 Address');" disabled><i class="flaticon-plus"></i></button></center></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td class="Variable_Name">Branch4 Address</td>
                                                    <td>
                                                        @*<input type="text" id="Branch4_Address" class="Variable_Value" style="height:30px;" onkeyup="test('Branch4_Address', 'Branch4 Address');" />*@
                                                        <textarea id="Branch4_Address" rows="1" maxlength="1800" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td><center><button class="btn btn-link" onclick="InsertVendorVariable('Branch4_Address','Branch4 Address');" disabled><i class="flaticon-plus"></i></button></center></td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td class="Variable_Name">Branch5 Address</td>
                                                    <td>
                                                        @*<input type="text" id="Branch5_Address" class="Variable_Value" style="height:30px;" onkeyup="test('Branch5_Address', 'Branch5 Address');" />*@
                                                        <textarea id="Branch5_Address" rows="1" maxlength="1800" class="form-control text_area Variable_textarea Variable_Value" readonly onkeyup="test1();"></textarea>
                                                    </td>
                                                    <td><center><button class="btn btn-link" onclick="InsertVendorVariable('Branch5_Address','Branch5 Address');" disabled><i class="flaticon-plus"></i></button></center></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            @{
                                string id = Request.Url.AbsoluteUri.Split('/').Last();
                                var VariableList = Model.VariableDatas.Where(x => x.TypeID.ToString() == id).Where(x => x.Type == "Contract").Where(x => x.Version == "Contract");
                                foreach (var eachVariabe in VariableList)
                                {
                                    if (!string.IsNullOrWhiteSpace(eachVariabe.Value))
                                    {
                                        eachVariabe.Value = eachVariabe.Value.Trim();
                                    }

                                    if (eachVariabe.Variable == "Duration from")
                                    {
                                        <script> document.getElementById("Variable_DurationFrom").value = "@eachVariabe.Value"</script>
                                    }
                                    else if (eachVariabe.Variable == "Duration to")
                                    {
                                        <script> document.getElementById("Variable_DurationTo").value = "@eachVariabe.Value"</script>
                                    }
                                    else if (eachVariabe.Variable == "Vendor Name")
                                    {
                                        <script> document.getElementById("Variable_VendorName").value = "@eachVariabe.Value"</script>

                                    }
                                    else if (eachVariabe.Variable == "Vendor GSTN")
                                    {
                                        <script> document.getElementById("Variable_VendorGSTN").value = "@eachVariabe.Value"</script>
                                    }
                                    else if (eachVariabe.Variable == "Authorised Signatory")
                                    {
                                        <script> document.getElementById("Variable_Signatory").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }
                                    else if (eachVariabe.Variable == "Registered Address")
                                    {
                                        <script> document.getElementById("Variable_Address").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }
                                    else if (eachVariabe.Variable == "Branch1 Address")
                                    {
                                        <script> document.getElementById("Branch1_Address").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }
                                    else if (eachVariabe.Variable == "Branch2 Address")
                                    {
                                        <script> document.getElementById("Branch2_Address").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }
                                    else if (eachVariabe.Variable == "Branch3 Address")
                                    {
                                        <script> document.getElementById("Branch3_Address").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }
                                    else if (eachVariabe.Variable == "Branch4 Address")
                                    {
                                        <script> document.getElementById("Branch4_Address").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }
                                    else if (eachVariabe.Variable == "Branch5 Address")
                                    {
                                        <script> document.getElementById("Branch5_Address").value = "@Html.Raw(eachVariabe.Value.Replace(":"," ").Replace("\n", "<br/>"))"</script>
                                    }

                                    else

                                    {
                                        <script>
                                                    var NewVariable_append = '@{ string txtclass = @eachVariabe.Variable.Replace(" ", "_");<td><input type="checkbox" name="record" class="larger" disabled/></td><td class="\'@txtclass\' Variable_Name">@eachVariabe.Variable</td> string txtID = "txt" + eachVariabe.Variable.Replace(" ", "_");<td><textarea id="@txtID" maxlength="150" onkeyup="test2(\'@eachVariabe.Variable.Replace(" ", "_")\');" rows="1" class="form-control text_area Variable_textarea Variable_Value" readonly>@eachVariabe.Value</textarea></td>}<td><center><button id="\' + @eachVariabe.Variable.Replace(" ", "_") + \'" class="btn btn-link" onclick="InsertVariable(\'@eachVariabe.Variable.Replace(" ", "_")\');" disabled><i class="flaticon-plus"></i></button></center></td>';

                                    var tableRef = document.getElementById('tblVendorVariable');
                                    var newRow = tableRef.insertRow(tableRef.rows.length);
                                    newRow.innerHTML = NewVariable_append;
                                        </script>



                                    }

                                }
                            }

                        </div>
                    </div>
                    @*</div>
                        </div>*@
                </div>

            </div>

            <br />
            <br />
            @{
                string TemId = Request.Url.AbsoluteUri.Split('/').Last();
                <div class="row" style="padding-left:40px; padding-right:40px;">
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-header">
                                <h3><b>Comments</b></h3>
                            </div>
                            <div class="card-body">
                                <div class="row">

                                    <div class="col-sm-12">
                                        <div class="table-responsive">
                                            <table id="ApproversTable" class="display table table-bordered appoverTabel">
                                                <thead>
                                                    <tr>
                                                        <th width="10%"><center>Role</center></th>
                                                        <th width="15%"><center>Employee ID</center></th>
                                                        <th width="25%"><center>Employee Name</center></th>
                                                        <th width="50%"><center>Comments</center></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.InitiatorStatus != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Initiator</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Initiator</td>
                                                            <td id="Initiator_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().InitiatorComments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver1Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 1</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver1ID</td>
                                                            <td id="Approver1_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver1Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver2Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 2</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver2ID</td>
                                                            <td id="Approver2_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver2Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver3Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 3</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver3ID</td>
                                                            <td id="Approver3_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver3Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver4Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 4</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver4ID</td>
                                                            <td id="Approver4_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver4Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver5Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 5</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver5ID</td>
                                                            <td id="Approver5_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver5Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver6Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 6</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver6ID</td>
                                                            <td id="Approver6_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver6Comments</td>
                                                        </tr>
                                                    }

                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver7Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 7</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver7ID</td>
                                                            <td id="Approver7_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver7Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver8Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 8</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver8ID</td>
                                                            <td id="Approver8_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver8Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver9Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 9</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver9ID</td>
                                                            <td id="Approver9_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver9Comments</td>
                                                        </tr>
                                                    }
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == TemId).Where(x => x.Approver10Status != null).Any())
                                                    {
                                                        <tr>
                                                            <td>Approver 10</td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver10ID</td>
                                                            <td id="Approver10_name"></td>
                                                            <td>@Model.Contract.Where(x => x.ContractID.ToString() == TemId).First().Approver10Comments</td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
            @*<br />*@
            @*@{
                    string ID = Request.Url.AbsoluteUri.Split('/').Last();
                    string Emp = CurrentUserID();
                    if ((Model.Contract.Where(x => x.ContractID.ToString() == ID).Where(x => x.Status == "In Effect").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == ID).Where(x => x.Status == "Expired").Any()))
                    {
                        <div class="row" style="padding-left:40px; padding-right:40px;">
                            <div class="col-sm-12">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row align-items-center form-inline">
                                            <div class="col-sm-5">
                                                <h2><b>Physical Verification</b></h2>
                                            </div>

                                            <div class="col-sm-4">
                                                @{
                                                    if (!string.IsNullOrWhiteSpace(Model.Contract.Where(x => x.ContractID.ToString() == ID).First().PhysicalCopyLocation))
                                                    {
                                                       <h4><span style="color:green"><i class="flaticon-success" aria-hidden="true"></i></span><span>&nbsp;&nbsp;<b>Verified</b></span></h4>
                                                    }
                                                    else
                                                    {
                                                        <h4><span style="color:red"><i class="flaticon-error" aria-hidden="true"></i></span><span>&nbsp;&nbsp;<b>Not Verified</b></span></h4>
                                                    }
                                                }
                                            </div>
                                            <div class="col-sm-3 text-left">
                                                <div class="row">

                                                    <div class="col-sm-12 text-left">
                                                            <label>
                                                                <b>Last Verified By :</b>&nbsp;&nbsp;
                                                                @try
                                                                {
                                                                    @Model.Contract.Where(x => x.ContractID.ToString() == ID).Where(x => x.Status == "In Effect" || x.Status == "Expired").First().ReviewerID<span id="Reviewer_Name"></span>
                                                                }
                                                                catch { }
                                                            </label>

                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-12 text-left">
                                                            <label>
                                                                <b>Last Verified On :</b> &nbsp;&nbsp; @try
                                                                {
                                                                    @Model.Contract.Where(x => x.ContractID.ToString() == ID).Where(x => x.Status == "In Effect" || x.Status == "Expired").First().ReviewedOn
                                                                }
                                                                catch { }
                                                            </label>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-body">


                                        @if (User.IsInRole("reviewer"))
                                        {

                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <div class="row align-items-center">
                                                                <div class="col-sm-6">
                                                                    <h3><b>Add Comments</b></h3>
                                                                </div>
                                                                <div class="col-sm-6 text-right">
                                                                    <button type="button" class="btn btn-sm btn-success" onclick="savereview();" style="width:120px;"><b>Save Comments</b></button>
                                                                    &nbsp;<button type="button" class="btn btn-sm btn-danger" onclick="window.location.reload();" style="width:120px;"><b>Discard Comments</b></button>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-body">
                                                            <div class="row">

                                                                <div class="col-sm-12">
                                                                    <div class="table-responsive">
                                                                        <table id="ApproversTable" class="display table table-bordered appoverTabel">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th><center>Physical Document Location</center></th>
                                                                                    <th><center>Reviewer Comments</center></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td width="40%">
                                                                                        <textarea rows="4" class="text_area form-control Variable_textarea copyverified" id="physicalcopy_Location"></textarea>
                                                                                    </td>
                                                                                    <td width="60%">
                                                                                        <textarea rows="4" class="text_area form-control Variable_textarea copyverified" id="physicalcopy_Comments"></textarea>

                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <br />
                                        }

                                        <div class="row">

                                            <div class="col-sm-12">
                                                <div class="table-responsive">
                                                    <table id="ApproversTable" class="display table table-bordered appoverTabel">
                                                        <thead>
                                                            <tr>
                                                                <th width="40%"><center>Physical Document Location</center></th>
                                                                <th width="60%"><center>Reviewer Comments</center></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>

                                                                <td>@try { @Html.Raw(Model.Contract.Where(x => x.ContractID.ToString() == ID).Where(x => x.Status == "In Effect" || x.Status == "Expired").First().PhysicalCopyLocation)} catch { }</td>
                                                                <td>@try { @Html.Raw(Model.Contract.Where(x => x.ContractID.ToString() == ID).Where(x => x.Status == "In Effect" || x.Status == "Expired").First().ReviewedComments)} catch { }</td>


                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }*@
        </div>
    </div>

    <div class="modal fade" id="LogModel" role="dialog" tabindex="-1">
        @*<div class="text-right model_body_position">
                <a href="" data-dismiss="modal" class="modaldismissarrow"><i class="flaticon-error fa-3x " aria-hidden="true"></i></a>
            </div>*@

        <div class="modal-dialog" style="max-width: 80%;">

            <div class="modal-content">

                <div class="modal-header modalheadercolor websitecolour">
                    <label style="font-size: 20px !important;"><b>Contract Modified History</b></label>
                    <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                </div>
                <div class="modal-body" style="height:450px; overflow: auto;">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="tableFixHead_LogHistory">
                                <table class="table table-bordered">

                                    <thead>

                                        <tr>
                                            <th><center>Date and Time</center></th>
                                            <th><center>Modified By</center></th>
                                            <th><center>Activity</center></th>
                                            <th><center>Changed From</center></th>
                                            <th><center>Changed To</center></th>

                                        </tr>

                                    </thead>

                                    <tbody id="tblContractLogList">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    @*<hr />

                        <div class="card-action text-right card_footer_button">
                            <input type="submit" class="btn btn-success" value="Select" id="CaptureHodList">
                            <input type="button" class="btn btn-danger" data-dismiss="modal" value="Cancel" />

                        </div>*@
                </div>
            </div>

        </div>
    </div>

    @*<div class="modal fade" id="AddClauseModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog" style="max-width: 60%; margin-top:50px;" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <label style="font-size: 20px !important;">
                                <b>Clause Library</b>
                            </label>
                            <button type="button" class="Close" data-dismiss="modal" aria-label="Close" style="color:white;">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            <button data-dismiss="modal" class="modaldismissarrow btn btn-sm btn-danger text-right" style="color:white; font-size:13px;"> <i class="flaticon-error"></i> &nbsp;Close</button>
                        </div>
                        <div class="modal-body" style="height:450px; overflow: auto;">

                            <div class="table-responsive">
                                <button class="btn btn-primary" onclick="AddClause()">Add Clause</button>
                                <div class="table-responsive">

                                    <table id="multi-filter-select" class="display table table-striped table-hover table-bordered">

                                        <thead>

                                            <tr>
                                                <th><center>Preview</center></th>
                                                <th><center>Select Clause</center></th>
                                                <th><center>Clause Title</center></th>
                                                <th>Type</th>
                                                <th><center>Description</center></th>

                                            </tr>

                                        </thead>

                                        <tbody>
                                            @foreach (var item in Model.Clause)
        {

                                                <tr>

                                                    @{
                                                        <td>
                                                            <center>
                                                                <a href="" id="@item.ClauseClauseID" onclick="ClausePreview(this.id);" data-toggle="modal" data-target="#TemplatePreview"><i class="fa fa-eye fa-1x" aria-hidden="true"></i></a>
                                                            </center>
                                                        </td>
            string ClauseTitle = "ClauseTitle" + item.ClauseClauseID;
            string ClauseText = "ClauseText" + item.ClauseClauseID;

                                                        <td>
                                                            <center>
                                                                <button class="btn btn-sm btn-success" data-dismiss="modal" onclick="AddClause('@item.ClauseClauseID');">Add Clause</button>
                                                            </center>
                                                        </td>

                                                        <td id="@ClauseTitle">@item.ClauseClauseTitle</td>

                                                        <td>
                                                            @item.ClauseClauseDescription
                                                            <lable id="@ClauseText" style="visibility:hidden; border:none;">@Html.Raw(@item.ClauseClauseText)</lable>

                                                        </td>

                                                    }
                                                </tr>
            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@

    <div class="modal" id="TemplatePreview" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 75%; padding-left:80px; padding-right:80px;" role="document">
            <div class="modal-content VersionCompare_Modal" style="height:600px;">
                <div class="modal-header">
                    <div class="col-sm-7 form-inline">
                        <span style="font-size:20px; color:white;"><b>Clause Preview : <span id="previewclausename" style="font-size:20px;"></span></b></span>

                    </div>
                    <div class="text-right model_body_position">
                        <button type="button" class="btn btn-sm btn-success template_preview" style="font-size:13px;" onclick="AddClause(this.id);" data-dismiss="modal"><i class="flaticon-" aria-hidden="true"></i>&nbsp; Select this Clause</button>
                        &nbsp; &nbsp; &nbsp;<button href="" data-dismiss="modal" class="modaldismissarrow btn btn-sm btn-danger" style="font-size:13px;" title="Close"><i class="flaticon-error" aria-hidden="true"></i> &nbsp; Close</button>
                    </div>
                </div>
                <div class="modal-body" style="height:450px; overflow: auto;">
                    <textarea name="editor7" id="IDofEditor7"></textarea>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="TemplateDownloadOptionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;">
                        <b>Download</b>
                    </label>
                    <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                </div>

                <div class="modal-body">
                    <div class="row form-inline justify-content-center">

                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#TemplateDownload" data-dismiss="modal"> Download as PDF</button>
                        @{
                            string CID = Request.Url.AbsoluteUri.Split('/').Last();
                            if ((Model.Contract.Where(x => x.ContractID.ToString() == CID).Where(x => x.Status == "Draft").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == CID).Where(x => x.Status == "Pending Approval").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == CID).Where(x => x.Status == "Rejected").Any()))
                            {
                                @Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")

                                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="ExportAsWord();"> Download as Word</button>
                            }
                        }
                    </div>
                </div>

            </div>
        </div>
    </div>


    <div class="modal fade" id="TemplateDownload" role="dialog" tabindex="-1">
        <div class="text-right model_body_position">
            @*<a href="" data-dismiss="modal" class="modaldismissarrow"><i class="flaticon-error fa-3x " aria-hidden="true"></i></a>*@
        </div>

        <div class="modal-dialog modal-dialog-centered" style="max-width: 960px; margin-top:-20px;">

            <div class="modal-content">


                @using (Html.BeginForm("DownloadPDF", "Contract", FormMethod.Post))
                {

                    <div class="modal-header modalheadercolor websitecolour">
                        <div class="row" style="width:100%;">
                            <div class="col-sm-6 form-inline">
                                <label style="font-size: 20px !important;"><b>Page Setup</b></label>
                                <input type="hidden" id="AppendTemplateName2" name="FileName" />
                                <input type="hidden" id="AppendID" name="ID" />

                            </div>
                            <div class="col-sm-6 text-right">
                                @*<button type="button" class="close" style="float:right;" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>*@
                                <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                            </div>
                        </div>


                    </div>

                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-2 ">
                                <div class="form-group">
                                    <label for="PaperType">Paper Type</label>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <select style="padding-bottom:3px;padding-top:3px;" class="form-control" onchange="PaperType1Onchange();" id="PaperType1">

                                    <option>A4 Digital Stamp</option>
                                    <option>Legal</option>
                                    <option>Rubber Stamped Legal</option>
                                </select>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="PaperType">Standard Paper Size</label>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <select style="padding-bottom:3px;padding-top:3px;" class="form-control" id="PaperSize1" onchange="PaperType1Onchange();" name="Pagesize" oninvalid="InvalidPaperSize(this);" oninput="InvalidPaperSize(this);" required>
                                    <option>A4</option>
                                    <option>Legal</option>
                                    <option>Executive</option>

                                </select>
                                <div class="row" style="display:none;"><textarea name="editor4" id="IDofEditor4"></textarea></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="Margin">Margin in Inches</label>
                        </div>

                        <div class="row">
                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Top</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="0" id="MarginTop1" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Margintop" class="form-control"  />

                                    </div>

                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Left</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="0" id="MarginLeft1" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginleft" class="form-control"  />

                                    </div>

                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Bottom</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="0" id="MarginBottom1" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginbottom" class="form-control"  />

                                    </div>

                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Right</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="0" id="MarginRight1" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginright" class="form-control"  />

                                    </div>

                                </div>
                            </div>
                        </div>
                        @*<hr />
                            <div class="row">
                                <div class="col-sm-2 form-group">
                                    &nbsp;&nbsp;<label>Water mark</label>
                                </div>
                                <div class="col-sm-5">
                                    <select style="padding-bottom:3px;padding-top:3px;" class="form-control" name="radio" id="WaterMarker" oninvalid="InvalidPaperSize(this);" oninput="InvalidPaperSize(this);" required>

                                        <option>No Watermark</option>
                                        <option>Draft</option>
                                        <option value="Custom">Custom</option>

                                    </select>
                                </div>
                                <div class="col-sm-5" id="watermark"></div>
                            </div>*@
                        @*<div class="form-group form-inline">
                                <label>Water mark</label>
                            </div>
                            <div class="form-group form-inline">
                                <input type="radio" id="draftradiobutton" name="radio" value="draft" checked>&nbsp;
                                <label for="draft">Draft</label>

                            </div>
                            <div class="form-group form-inline">
                                <input type="radio" id="vendorradiobutton" name="radio" value="vendor">&nbsp;
                                <label for="Vendor">Vendor copy</label>

                            </div>
                            <div class="row">
                                <div class="col-sm-2">
                                    <div class="form-group form-inline">
                                        <input type="radio" id="customradiobutton" name="radio" value="custom">&nbsp;
                                        <label for="Custom">Custom</label>
                                    </div>
                                </div>
                                <div class="col-sm-10">
                                    <input type="text" id="CustomTextfield" maxlength="25" name="watermark" class="form-control" disabled="disabled" oninvalid="InvalidCustomWaterMark(this);" oninput="InvalidCustomWaterMark(this);" required />
                                </div>
                            </div>*@
                        <hr />
                        <div class="card-action text-right card_footer_button">
                            <button type="submit" class="btn btn-primary btn_SaveClearDiscard">
                                <b>Download</b>
                            </button>
                            &nbsp;
                            <button type="reset" class="btn btn-success btn_SaveClearDiscard"><b>Reset</b></button>&nbsp;
                            <button type="button" class="btn btn-danger btn_SaveClearDiscard" data-dismiss="modal">Cancel</button>

                        </div>
                    </div>
                }

            </div>

        </div>

    </div>

    <div class="modal fade" id="AddVersionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 100%; max-height: 90%; padding-left:20px;" role="document">
            <div class="modal-content VersionCompare_Modal">
                <div class="modal-header">
                    <div class="row" style="width:100%;">
                        <div class="col-sm-6 justify-content-center form-inline">


                            <select id="TemplateApproversCompare" class="form-control" style="width:130px;padding:0;text-align-last:center;">
                                <option value="" selected disabled>--select--</option>
                            </select>@*&nbsp; &nbsp;

                                <button class="btn btn-sm btn-success" data-toggle="modal" data-target="#VersionDownloadOptionModal" onclick="VersionAcceptChanges1();" id="Version1Btn" style="font-size:13px; display:none; width:120px;"><i class="flaticon-inbox" aria-hidden="true"></i>&nbsp; Download</button>*@

                            @if (User.IsInRole("initiator") || User.IsInRole("legal") || User.IsInRole("admin"))
                            {
                                string cid = Request.Url.AbsoluteUri.Split('/').Last();
                                string emp = CurrentUserID();
                                if ((Model.Contract.Where(x => x.ContractID.ToString() == cid).Where(x => x.Status == "Draft").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == cid).Where(x => x.NextApprover.ToString() == emp).Where(x => x.Status == "Pending Approval").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == cid).Where(x => x.NextApprover.ToString() == emp).Where(x => x.Status == "Rejected").Any()))
                                {
                                    @Html.Raw("&nbsp; &nbsp;")<button class="btn btn-sm btn-primary" disabled id="TemplateVersionRestore1" style="font-size:13px; display:none; width:120px;"><i class="flaticon-repeat" aria-hidden="true"></i>&nbsp; Restore</button>
                                }

                            }

                        </div>

                        <div class="col-sm-6 justify-content-center form-inline">


                            <select id="TemplateApproversBetween" class="form-control" style="width:130px;padding:0;text-align-last:center;">
                                <option value="" selected disabled>--select--</option>
                            </select>@*&nbsp; &nbsp;

                                <button class="btn btn-sm btn-success" data-toggle="modal" data-target="#VersionDownloadOptionModal2" onclick="VersionAcceptChanges2();" id="Version2Btn" style="font-size:13px; display:none; width:120px;"><i class="flaticon-inbox" aria-hidden="true"></i>&nbsp; Download</button>*@
                            @if (User.IsInRole("initiator") || User.IsInRole("legal") || User.IsInRole("admin"))
                            {
                                string cid = Request.Url.AbsoluteUri.Split('/').Last();
                                string emp = CurrentUserID();
                                if ((Model.Contract.Where(x => x.ContractID.ToString() == cid).Where(x => x.Status == "Draft").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == cid).Where(x => x.NextApprover.ToString() == emp).Where(x => x.Status == "Pending Approval").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == cid).Where(x => x.NextApprover.ToString() == emp).Where(x => x.Status == "Rejected").Any()))
                                {
                                    @Html.Raw("&nbsp; &nbsp;") <button class="btn btn-sm btn-primary" disabled id="TemplateVersionRestore2" style="font-size:13px; display:none; width:120px;"><i class="flaticon-repeat" aria-hidden="true"></i>&nbsp; Restore</button>
                                }
                            }
                            &nbsp; &nbsp; <button type="button" id="Compare_Button" onclick="CompareVersion();" class="btn btn-sm btn-primary" style="font-size:13px; display:none; width:120px;">Compare</button>

                            &nbsp; &nbsp;
                            <div>
                                <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                            </div>
                        </div>
                        @*<div class="text-right">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>*@
                    </div>
                </div>
                <div class="modal-body" style="height:550px;">
                    <div class="row">
                        <div class="col-sm-12 text-center">
                            <center><h5><b id="CompareCode"></b></h5></center>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            @*<div class="card" id="card1" style="height:500px; overflow:auto;  margin-bottom:0px; padding:0px;">*@
                            <div class="card" style="margin:0px;">
                                <div class="card-body" id="TemplateCompareDivision" style="flex: 0 0;padding: 0px;">
                                    <div style="overflow:auto; height:510px;" id="divv1">
                                        <textarea name="editor2" id="IDofEditor2"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            @*<div class="card" id="card2" style="height:500px; overflow:auto; margin-bottom:0px; padding:0px;">*@
                            <div class="card" style="margin:0px;">
                                <div class="card-body" id="TemplateBetweenDivision" style="flex: 0 0;padding: 0px;">
                                    <div style="overflow:auto; height:510px;" id="divv2">
                                        <textarea name="editor3" id="IDofEditor3"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="VersionDownloadOptionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;">
                        <b>Download</b>
                    </label>
                    <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                </div>

                <div class="modal-body">
                    <div class="row form-inline justify-content-center">

                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#VersionDownloadModal" data-dismiss="modal"> Download as PDF</button>
                        @{
                            string VID = Request.Url.AbsoluteUri.Split('/').Last();
                            if ((Model.Contract.Where(x => x.ContractID.ToString() == VID).Where(x => x.Status == "Draft").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == VID).Where(x => x.Status == "Pending Approval").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == VID).Where(x => x.Status == "Rejected").Any()))
                            {
                                @Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")
                                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="ExportAsWordCompareversion();"> Download as Word</button>
                            }
                        }
                    </div>
                </div>


            </div>
        </div>
    </div>


    <div class="modal fade" id="VersionDownloadModal" role="dialog" tabindex="-1">
        <div class="text-right model_body_position">
            @*<a href="" data-dismiss="modal" class="modaldismissarrow"><i class="flaticon-error fa-3x " aria-hidden="true"></i></a>*@
        </div>

        <div class="modal-dialog modal-dialog-centered" style="max-width: 960px; margin-top:-20px;">

            <div class="modal-content">


                @using (Html.BeginForm("DownloadPDF2", "Contract", FormMethod.Post))
                {

                    <div class="modal-header modalheadercolor websitecolour">
                        <div class="row" style="width:100%;">
                            <div class="col-sm-6 form-inline">
                                <label style="font-size: 20px !important;"><b>Page Setup</b></label>
                                <input type="hidden" id="AppendVersionTemplateName1" name="FileName" />
                                <input type="hidden" id="AppendVersionID1" name="ID" />
                            </div>
                            <div class="col-sm-6 text-right">
                                @*<button type="button" class="close" style="float:right;" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>*@
                                <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                            </div>
                        </div>


                    </div>

                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-2 ">
                                <div class="form-group">
                                    <label for="PaperType">Paper Type</label>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <select style="padding-bottom:3px;padding-top:3px;" class="form-control" onchange="PaperType2Onchange();" id="PaperType2">

                                    <option>A4 Digital Stamp</option>
                                    <option>Legal</option>
                                    <option>Rubber Stamped Legal</option>
                                </select>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="PaperType">Standard Paper Size</label>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <select style="padding-bottom:3px;padding-top:3px;" class="form-control" id="PaperSize2" onchange="PaperType2Onchange();" name="Pagesize" oninvalid="InvalidPaperSize(this);" oninput="InvalidPaperSize(this);" required>
                                    <option>A4</option>
                                    <option>Legal</option>
                                    <option>Executive</option>


                                </select>
                                <div class="row" style="display:none"><textarea name="editor5" id="IDofEditor5"></textarea></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="Margin">Margin in Inches</label>
                        </div>

                        <div class="row">
                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Top</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginTop2" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Margintop" class="form-control" required />

                                    </div>

                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Left</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginLeft2" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginleft" class="form-control" required />

                                    </div>

                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Bottom</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginBottom2" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginbottom" class="form-control" required />

                                    </div>

                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Right</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginRight2" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginright" class="form-control" required />

                                    </div>

                                </div>
                            </div>
                        </div>
                        @*<hr />
                            <div class="row">
                                <div class="col-sm-2 form-group">
                                    &nbsp;&nbsp;<label>Water mark</label>
                                </div>
                                <div class="col-sm-5">
                                    <select style="padding-bottom:3px;padding-top:3px;" class="form-control" name="radio1" id="versionWaterMarker" oninvalid="Invalidversion1watermark(this);" oninput="Invalidversion1watermark(this);" required="required">
                                        <option value="No Watermark">No Watermark</option>
                                        <option value="Draft">Draft</option>
                                        <option value="Custom">Custom</option>

                                    </select>
                                </div>
                                <div class="col-sm-5" id="versionwatermark"></div>
                            </div>*@
                        @*<div class="form-group form-inline">
                                <label>Water mark</label>
                            </div>
                            <div class="form-group form-inline">
                                <input type="radio" id="draftradiobutton" name="radio1" value="draft" checked>&nbsp;
                                <label for="draft">Draft</label>

                            </div>
                            <div class="form-group form-inline">
                                <input type="radio" id="vendorradiobutton" name="radio1" value="vendor">&nbsp;
                                <label for="Vendor">Vendor copy</label>

                            </div>
                            <div class="row">
                                <div class="col-sm-2">
                                    <div class="form-group form-inline">
                                        <input type="radio" id="customradiobutton1" name="radio1" value="custom">&nbsp;
                                        <label for="Custom">Custom</label>
                                    </div>
                                </div>
                                <div class="col-sm-10">
                                    <input type="text" id="CustomTextfield1" maxlength="25" name="watermark" class="form-control" disabled="disabled" oninvalid="InvalidCustomWaterMark(this);" oninput="InvalidCustomWaterMark(this);" required />
                                </div>
                            </div>*@
                        <hr />
                        <div class="card-action text-right card_footer_button">
                            <button type="submit" class="btn btn-primary btn_SaveClearDiscard">
                                <b>Download</b>
                            </button>
                            &nbsp;
                            <button type="reset" class="btn btn-success btn_SaveClearDiscard"><b>Reset</b></button>&nbsp;
                            <button type="button" class="btn btn-danger btn_SaveClearDiscard" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                }

            </div>

        </div>

    </div>


    <div class="modal fade" id="VersionDownloadOptionModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;">
                        <b>Download</b>
                    </label>
                    <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                </div>

                <div class="modal-body">
                    <div class="row form-inline justify-content-center">

                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#VersionDownloadModal2" data-dismiss="modal"> Download as PDF</button>
                        @{
                            string VID2 = Request.Url.AbsoluteUri.Split('/').Last();
                            if ((Model.Contract.Where(x => x.ContractID.ToString() == VID2).Where(x => x.Status == "Draft").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == VID2).Where(x => x.Status == "Pending Approval").Any()) || (Model.Contract.Where(x => x.ContractID.ToString() == VID2).Where(x => x.Status == "Rejected").Any()))
                            {
                                @Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")@Html.Raw("&nbsp;")
                                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="ExportAsWordComparelatestversion();"> Download as Word</button>
                            }
                        }
                    </div>
                </div>


            </div>
        </div>
    </div>


    <div class="modal fade" id="VersionDownloadModal2" role="dialog" tabindex="-1">
        <div class="text-right model_body_position">
            @*<a href="" data-dismiss="modal" class="modaldismissarrow"><i class="flaticon-error fa-3x " aria-hidden="true"></i></a>*@
        </div>

        <div class="modal-dialog modal-dialog-centered" style="max-width: 960px; margin-top:-20px;">

            <div class="modal-content">


                @using (Html.BeginForm("DownloadPDF3", "Contract", FormMethod.Post))
                {

                    <div class="modal-header modalheadercolor websitecolour">
                        <div class="row" style="width:100%;">
                            <div class="col-sm-6 form-inline">
                                <label style="font-size: 20px !important;"><b>Page Setup</b></label>
                                <input type="hidden" id="AppendVersionTemplateName2" name="FileName" />
                                <input type="hidden" id="AppendVersionID2" name="ID" />

                            </div>
                            <div class="col-sm-6 text-right">
                                @*<button type="button" class="close" style="float:right;" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>*@
                                <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                            </div>
                        </div>


                    </div>

                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-2 ">
                                <div class="form-group">
                                    <label for="PaperType">Paper Type</label>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <select style="padding-bottom:3px;padding-top:3px;" class="form-control" onchange="PaperType3Onchange();" id="PaperType3">

                                    <option>A4 Digital Stamp</option>
                                    <option>Legal</option>
                                    <option>Rubber Stamped Legal</option>
                                </select>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label for="PaperType">Standard Paper Size</label>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <select style="padding-bottom:3px;padding-top:3px;" class="form-control" id="PaperSize3" onchange="PaperType3Onchange();" name="Pagesize" oninvalid="InvalidPaperSize(this);" oninput="InvalidPaperSize(this);" required>
                                    <option>A4</option>
                                    <option>Legal</option>
                                    <option>Executive</option>

                                </select>
                                <div class="row" style="display:none;"><textarea name="editor6" id="IDofEditor6"></textarea></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="Margin">Margin in Inches</label>
                        </div>

                        <div class="row">
                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Top</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginTop3" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Margintop" class="form-control" required />

                                    </div>

                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Left</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginLeft3" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginleft" class="form-control" required />

                                    </div>

                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Bottom</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginBottom3" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginbottom" class="form-control" required />

                                    </div>

                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-sm-5 text-right">
                                        <div class="form-group">
                                            <p>Right</p>
                                        </div>
                                    </div>
                                    <div class="col-sm-7 text-center">
                                        <input type="number" step="0.1" min="1" id="MarginRight3" maxlength="4" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" onkeyup="this.value = this.value.replace(/[^0-9.]/g, '');" name="Marginright" class="form-control" required />

                                    </div>

                                </div>
                            </div>
                        </div>
                        @*<hr />
                            <div class="row">
                                <div class="col-sm-2 form-group">
                                    &nbsp;&nbsp;<label>Water mark</label>
                                </div>
                                <div class="col-sm-5">
                                    <select style="padding-bottom:3px;padding-top:3px;" class="form-control" id="version2WaterMarker" name="radio2" oninvalid="Invalidversion2watermark(this);" oninput="Invalidversion2watermark(this);" required="required">
                                        <option value="No Watermark">No Watermark</option>
                                        <option value="Draft">Draft</option>
                                        <option value="Custom">Custom</option>

                                    </select>
                                </div>
                                <div class="col-sm-5" id="version2watermark"></div>
                            </div>*@
                        <hr />
                        <div class="card-action text-right card_footer_button">
                            <button type="submit" class="btn btn-primary btn_SaveClearDiscard">
                                <b>Download</b>
                            </button>
                            &nbsp;
                            <button type="reset" class="btn btn-success btn_SaveClearDiscard"><b>Reset</b></button>&nbsp;
                            <button type="button" class="btn btn-danger btn_SaveClearDiscard" data-dismiss="modal">Cancel</button>

                        </div>
                    </div>
                }

            </div>

        </div>

    </div>


    <div class="modal fade" id="AddMoreVariableTable" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <b>New Placeholder</b>

                </div>

                <div class="modal-body">
                    <div class="row justify-content-center">

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Enter Placeholder</label>
                                <input type="text" class="form-control Modal_Placeholder" maxlength="25" onkeyup="this.value = this.value.replace(/[^a-zA-Z0-9_-\s]/g, '');" id="placeholder_value" required />

                            </div>
                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" style="width:100px" data-dismiss="modal" onclick="AddPlaceholderToTable();"><i class="flaticon-plus" aria-hidden="true"></i>&nbsp;&nbsp;Add</button>
                    <button class="btn btn-danger" onclick="RemoveModal();"><i class="flaticon-error" aria-hidden="true"></i>&nbsp;&nbsp;Cancel</button>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="ApproveModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;"><b>Comments<span class="asteriskicon" style="color:red;"> *</span></b></label>
                </div>

                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                @*<h6><i>Approver</i><span class="asteriskicon" style="color:red;"> *</span></h6>*@
                                <textarea id="ApproveComment" maxlength="1800" placeholder="Enter the Comments here" class="text_area form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" type="button" id="Approve_Cancel"><i class="flaticon-error" aria-hidden="true"></i>&nbsp;&nbsp;Cancel</button>
                    <button class="btn btn-success" data-dismiss="modal" id="ApproveButton" onclick="Approve();" disabled><i class="flaticon-success" aria-hidden="true"></i>&nbsp;&nbsp;Approve</button>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="InitiateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;"><b>Comments<span class="asteriskicon" style="color:red;"> *</span></b></label>
                </div>

                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                @*<h6><i>Approver</i><span class="asteriskicon" style="color:red;"> *</span></h6>*@
                                <textarea id="InitiateComment" maxlength="1800" placeholder="Enter the Comments here" class="text_area form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" type="button" id="Initiate_Cancel"><i class="flaticon-error" aria-hidden="true"></i>&nbsp;&nbsp;Cancel</button>
                    <button class="btn btn-success" data-dismiss="modal" id="InitiateButton" onclick="Initiate();" disabled><i class="flaticon-success" aria-hidden="true"></i>&nbsp;&nbsp;Initiate</button>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="RejectAndAssignModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;"><b>Contract Reject and Assign to Initiator</b></label>
                </div>

                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                @*<h6><i>Approver</i><span class="asteriskicon" style="color:red;"> *</span></h6>*@
                                <h3><b>Comments<span class="asteriskicon" style="color:red;"> *</span></b></h3>
                                <textarea id="RejectComment" maxlength="1800" placeholder="Enter the Comments here" class="text_area form-control"></textarea>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" type="button" id="Reject_Cancel"><i class="flaticon-error" aria-hidden="true"></i>&nbsp;&nbsp;Cancel</button>
                    <button class="btn btn-success" data-dismiss="modal" id="RejectButton" onclick="Reject();" disabled>
                        <i class="flaticon-success" aria-hidden="true"></i>&nbsp;&nbsp;
                        Reject
                    </button>
                </div>

            </div>
        </div>
    </div>

    @*<div class="modal fade" id="UploadForSignOffModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <b>Upload for SignOff</b>
                    </div>

                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <label for="">Upload a File</label>

                                <div class="row">

                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <input type="file" name="UploadSignOffContractFile" id="UploadSignOffContractFile" class="file">
                                            <div class="input-group col-xs-10">
                                                <span class="input-group-addon "><i class="glyphicon glyphicon-picture"></i></span>
                                                <input type="text" class="form-control input-lg browse" name="UploadSignOffContractFile" placeholder="Choose File">
                                                <span class="input-group-btn ">
                                                    <button class="browse btn btn-primary uploadbtnsizing" type="button"><i class="glyphicon glyphicon-search"></i><i class="flaticon-archive" aria-hidden="true"></i>&nbsp;&nbsp;upload </button>&nbsp;

                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" data-dismiss="modal"><i class="flaticon-error" aria-hidden="true"></i>&nbsp;&nbsp;Cancel</button>
                        <button class="btn btn-success" data-dismiss="modal" onclick="UploadSignOff();"><i class="flaticon-inbox" aria-hidden="true"></i>&nbsp;&nbsp;Upload</button>
                    </div>

                </div>
            </div>
        </div>*@
    <div class="modal fade" id="AttachmentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width:45%" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <label style="font-size: 20px !important;"><b>Supporting Documents</b></label>
                    <button data-dismiss="modal" class="modaldismissarrow text-right btn btn-sm btn-light btn_close" title="Close">Close</button>
                </div>

                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <center><h3><b id="UsererrorCode"></b></h3></center>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table id="Approvers_Table" class="display table table-bordered  appoverTabel">
                                    <thead>
                                        <tr>
                                            <th><center>Sl. No</center></th>
                                            <th>

                                                @{string Sid1 = Request.Url.AbsoluteUri.Split('/').Last();
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid1).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0) && ((Model.Contract.Where(x => x.ContractID.ToString() == Sid1).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0)))
                                                    {


                                                        <center> Browse </center>
                                                    }

                                                    else
                                                    {
                                                        <center> Files </center>
                                                    } }


                                            </th>
                                            @{
                                                string Sid = Request.Url.AbsoluteUri.Split('/').Last();
                                                if (Model.Contract.Where(x => x.ContractID.ToString() == Sid).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                {
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                    {
                                                        <th><center>Upload / Remove</center></th>
                                                    }
                                                }
                                            }
                                        </tr>
                                    </thead>
                                    <tbody id="tblUsersSearchList">
                                        <tr>
                                            <td>1</td>
                                            <td>
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        @{
                                                            string Sid2 = Request.Url.AbsoluteUri.Split('/').Last();
                                                            if (Model.Contract.Where(x => x.ContractID.ToString() == Sid2).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                            {
                                                                if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid2).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                                {

                                                                    <input type="file" id="SupportingDocs1" />
                                                                }
                                                            }


                                                            using (Html.BeginForm("DownloadSupportingFiles1", "Contract", FormMethod.Post))
                                                            {
                                                                <button type="submit" class="btn btn-sm btn-primary btn-link" id="Download1" style="display:none; font-size:14px;"></button>
                                                                <input type="hidden" class="hiddenContractID" name="ContractId" id="hiddenContractID1" />

                                                            }

                                                        }

                                                    </div>
                                                </div>

                                            </td>
                                            @{
                                                string Sid3 = Request.Url.AbsoluteUri.Split('/').Last();
                                                if (Model.Contract.Where(x => x.ContractID.ToString() == Sid3).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                {
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid3).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                    {
                                                        <td>
                                                            <center>
                                                                <button type="button" class="btn btn-sm btn-primary" id="Upload1" onclick="uploadfile1(1,'SupportingDocs1')" style="display:none;"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp; Upload</button>

                                                                &nbsp;<button type="button" class="btn btn-sm btn-danger" id="Delete1" style="display:none;" onclick="deletefile1(1)"><i class="flaticon-interface-5" aria-hidden="true"></i>&nbsp; Remove</button>
                                                            </center>
                                                        </td>
                                                    }
                                                }
                                            }


                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>


                                                @{
                                                    string Sid4 = Request.Url.AbsoluteUri.Split('/').Last();
                                                    if (Model.Contract.Where(x => x.ContractID.ToString() == Sid4).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                    {
                                                        if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid4).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                        {

                                                            <input type="file" id="SupportingDocs2" />
                                                        }
                                                    }


                                                    using (Html.BeginForm("DownloadSupportingFiles2", "Contract", FormMethod.Post))
                                                    {
                                                        <button type="submit" class="btn btn-sm btn-primary btn-link" id="Download2" style="display:none; font-size:14px;"></button>
                                                        <input type="hidden" class="hiddenContractID" name="ContractId" id="hiddenContractID2" />

                                                    }

                                                }
                                            </td>
                                            @{
                                                string Sid5 = Request.Url.AbsoluteUri.Split('/').Last();
                                                if (Model.Contract.Where(x => x.ContractID.ToString() == Sid5).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                {
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid5).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                    {

                                                        <td>
                                                            <center>
                                                                <button type="button" class="btn btn-sm btn-primary" id="Upload2" onclick="uploadfile1(2,'SupportingDocs2')" style="display:none;"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp; Upload</button>
                                                                &nbsp;<button type="button" class="btn btn-sm btn-danger" id="Delete2" style="display:none;" onclick="deletefile1(2)"><i class="flaticon-interface-5" aria-hidden="true"></i>&nbsp; Remove</button>
                                                            </center>
                                                        </td>
                                                    }
                                                }
                                            }
                                        </tr>


                                        <tr>
                                            <td>3</td>
                                            <td>



                                                @{
                                                    string Sid6 = Request.Url.AbsoluteUri.Split('/').Last();
                                                    if (Model.Contract.Where(x => x.ContractID.ToString() == Sid6).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                    {
                                                        if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid6).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                        {

                                                            <input type="file" id="SupportingDocs3" />
                                                        }
                                                    }


                                                    using (Html.BeginForm("DownloadSupportingFiles3", "Contract", FormMethod.Post))
                                                    {
                                                        <button type="submit" class="btn btn-sm btn-primary btn-link" id="Download3" style="display:none; font-size:14px;"></button>
                                                        <input type="hidden" class="hiddenContractID" name="ContractId" id="hiddenContractID3" />

                                                    }

                                                }
                                            </td>

                                            @{
                                                string Sid7 = Request.Url.AbsoluteUri.Split('/').Last();
                                                if (Model.Contract.Where(x => x.ContractID.ToString() == Sid7).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                {
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid7).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                    {
                                                        <td>
                                                            <center>
                                                                <button type="button" class="btn btn-sm btn-primary" id="Upload3" onclick="uploadfile1(3,'SupportingDocs3')" style="display:none;"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp; Upload</button>
                                                                &nbsp;<button type="button" class="btn btn-sm btn-danger" id="Delete3" style="display:none;" onclick="deletefile1(3)"><i class="flaticon-interface-5" aria-hidden="true"></i>&nbsp; Remove</button>
                                                            </center>
                                                        </td>
                                                    }
                                                }
                                            }

                                        </tr>


                                        <tr>
                                            <td>4</td>
                                            <td>

                                                @{

                                                    string Sid8 = Request.Url.AbsoluteUri.Split('/').Last();
                                                    if (Model.Contract.Where(x => x.ContractID.ToString() == Sid8).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                    {
                                                        if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid8).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                        {

                                                            <input type="file" id="SupportingDocs4" />
                                                        }
                                                    }


                                                    using (Html.BeginForm("DownloadSupportingFiles4", "Contract", FormMethod.Post))
                                                    {
                                                        <button type="submit" class="btn btn-sm btn-primary btn-link" id="Download4" style="display:none; font-size:14px;"></button>
                                                        <input type="hidden" class="hiddenContractID" name="ContractId" id="hiddenContractID4" />

                                                    }

                                                }
                                            </td>

                                            @{
                                                string Sid0 = Request.Url.AbsoluteUri.Split('/').Last();
                                                if (Model.Contract.Where(x => x.ContractID.ToString() == Sid0).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                {
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid0).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                    {
                                                        <td>
                                                            <center>
                                                                <button type="button" class="btn btn-sm btn-primary" id="Upload4" onclick="uploadfile1(4,'SupportingDocs4')" style="display:none;"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp; Upload</button>
                                                                &nbsp;<button type="button" class="btn btn-sm btn-danger" id="Delete4" style="display:none;" onclick="deletefile1(4)"><i class="flaticon-interface-5" aria-hidden="true"></i>&nbsp; Remove</button>
                                                            </center>
                                                        </td>
                                                    }
                                                }

                                            }

                                        </tr>

                                        <tr>
                                            <td>5</td>
                                            <td>


                                                @{
                                                    string Sid11 = Request.Url.AbsoluteUri.Split('/').Last();
                                                    if (Model.Contract.Where(x => x.ContractID.ToString() == Sid11).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                    {
                                                        if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid11).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                        {

                                                            <input type="file" id="SupportingDocs5" />
                                                        }
                                                    }


                                                    using (Html.BeginForm("DownloadSupportingFiles5", "Contract", FormMethod.Post))
                                                    {
                                                        <button type="submit" class="btn btn-sm btn-primary btn-link" id="Download5" style="display:none; font-size:14px;"></button>
                                                        <input type="hidden" class="hiddenContractID" name="ContractId" id="hiddenContractID5" />

                                                    }

                                                }
                                            </td>
                                            @{
                                                string Sid12 = Request.Url.AbsoluteUri.Split('/').Last();
                                                if (Model.Contract.Where(x => x.ContractID.ToString() == Sid12).Where(x => x.Initiator == CurrentLoggedUserID).ToList().Count > 0)
                                                {
                                                    if ((Model.Contract.Where(x => x.ContractID.ToString() == Sid12).Where(x => x.Status == "Draft" || x.Status == "Rejected").ToList().Count > 0))
                                                    {
                                                        <td>
                                                            <center>
                                                                <button type="button" class="btn btn-sm btn-primary" id="Upload5" onclick="uploadfile1(5,'SupportingDocs5')" style="display:none;"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp; Upload</button>
                                                                &nbsp;<button type="button" class="btn btn-sm btn-danger" id="Delete5" style="display:none;" onclick="deletefile1(5)"><i class="flaticon-interface-5" aria-hidden="true"></i>&nbsp; Remove</button>
                                                            </center>
                                                        </td>
                                                    }
                                                }
                                            }

                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>

                    @*@{
                            string contractid = Request.Url.AbsoluteUri.Split('/').Last();
                            if (Model.Contract.Where(x => x.ContractID.ToString() == contractid).Where(x => x.Status == "Draft").Any())
                            {
                                <div class="row" style="padding-left:40px;">
                                      <div class="col-sm-12">
                                        <label for=""><b>Supporting Documents</b></label>
                                        <div class="row">
                                            <div class="col-sm-10">
                                                <div class="form-group">
                                                    <input type="file" name="SupportingDocs1" id="SupportingDocs1" class="file" accept=".doc,.docx,.txt,.pdf,.xlx,.xlsx,.zip">
                                                    <div class="input-group col-xs-10">
                                                        <input type="text" class="form-control input-lg browse" id="UploadedFileName" name="SupportingDocs1" placeholder="Choose File" disabled>
                                                        <span class="input-group-btn ">
                                                            <button class="browse btn btn-primary uploadbtnsizing" id="Browse" type="button" style="border-radius:0;"><i class="fa fa-search" aria-hidden="true" nbsp;></i> Browse</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-4 form-inline">
                                                <div class="form-group">

                                                    <button onclick="uploadFile()" id="uploadFile" class="btn  btn-success" style="display:none;  height:38px;"><i class="flaticon-archive" aria-hidden="true"></i>&nbsp;&nbsp;Upload</button> &nbsp;
                                                    @if (Model.Contract.Where(x => x.ContractID.ToString() == contractid).Where(x => x.SupportingDoc1FileName != null).Any())
                                                    {
                                                        using (Html.BeginForm("DownloadSupportingFiles", "Contract", FormMethod.Post))
                                                        {
                                                            <input type="hidden" name="ContractId" id="hiddenContractID" />
                                                            <button type="submit" id="DownloadFiles" class="btn btn-success" style="height:38px;"><i class="flaticon-inbox" aria-hidden="true"></i>&nbsp;&nbsp;Download</button>
                                                        }
                                                    }
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>

                            }
                            else
                            {
                                <div class="row" style="padding-left:40px;">
                                    <div class="col-sm-12">
                                        <label for=""><b>Supporting Documents</b></label>

                                        @using (Html.BeginForm("DownloadSupportingFiles", "Contract", FormMethod.Post))
                                        {
                                            <div class="row">

                                                <div class="col-sm-8">
                                                    <input type="text" id="UploadedFileName" class="form-control" disabled>
                                                </div>
                                                <div class="col-sm-4">
                                                    <input type="hidden" name="ContractId" id="hiddenContractID" />
                                                    <button type="submit" id="downloadbtn" class="btn btn-sm btn-success"><i class="flaticon-inbox" aria-hidden="true"></i>&nbsp;&nbsp;Download</button>
                                                </div>
                                            </div>
                                        }
                                    </div>

                                </div>
                            }
                        }*@
                </div>

            </div>
        </div>
    </div>

</div>

<div class="modalload"><!-- Place at bottom of page --></div>




<script src="../../Content/assets/js/core/jquery.3.2.1.min.js"></script>
<script src="../../Content/assets/js/core/popper.min.js"></script>
<script src="../../Content/assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
<script src="../../Content/assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

<script>

    function expandTextarea(Class) {
        var x = document.getElementsByClassName(Class);
        for (i = 0; i < x.length; i++) {
            x[i].addEventListener('keyup', function () {
                this.style.overflow = 'hidden';
                this.style.height = 0;
                this.style.height = this.scrollHeight + 'px';
            }, false);
        }
    }
    expandTextarea("text_area");
</script>
<script>
    function DownloadAcceptChanges() {
        CKEDITOR.instances.IDofEditor4.execCommand('lite-acceptall');
        $("#TemplateDownloadOptionModal").modal('show');
    }

    function VersionAcceptChanges1() {
        CKEDITOR.instances.IDofEditor5.execCommand('lite-acceptall');

        $("#VersionDownloadOptionModal").modal('show');
    }

    function VersionAcceptChanges2() {

        CKEDITOR.instances.IDofEditor6.execCommand('lite-acceptall');
        $("#VersionDownloadOptionModal2").modal('show');
    }
</script>

<script>

    function Export2Doc(element, filename) {
        var TemplateDocName = $("#AppendTemplateName").html();
        //var Contractvariable = "";
        var element = CKEDITOR.instances.IDofEditor4.document.getBody().getHtml();
        var topsheet = "";
        var filename = "";
        //alert(contractID);

        var preHtml = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title><style>table,td{border:1px solid black;},table>td{width:50%;} table{border-collapse:collapse;} .page_break{page-break-before: always; page-break-after: always;}</style></head><body>";
        var postHtml = "</body></html>";


        var topsheet = '<div class="page_break"><div class="row"><div class="col-sm-12"><h2><b>Top Sheet</b></h2></div></div><table style="width:100%;" cellpadding="20"><tr><td><b>Contract ID</b></td><td>' + contID + '</td></tr><tr><td><b>Contract Name</b></td><td>' + ContractName + '</td></tr><tr><td><b>Vendor Name</b></td><td>' + VendorName + '</td></tr><tr><td><b>Period From</b></td><td>' + DurationFrom + '</td></tr><tr><td><b>Period To</b></td><td>' + DurationTo + '</td></tr><tr><td><b>Initiated By :</b> ' + Initiator + '</td><td><b>Initiated On : </b>' + InitiatedOn + '</td></tr>' + Approver1 + '' + Approver2 + '' + Approver3 + '' + Approver4 + '' + Approver5 + '' + Approver6 + '' + Approver7 + '' + Approver8 + '' + Approver9 + '' + Approver10 + '</table ><br/></div>';
        //alert(topsheet);
        var html = preHtml + topsheet + element + postHtml;


        var blob = new Blob(['\ufeff', html], {
            type: 'application/msword'
        });


        //var url = URL.createObjectURL(blob);
        var url = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(html);

        // Specify file name
        filename = filename ? filename + '.docx' : TemplateDocName + '.doc';



        // Create download link element
        var downloadLink = document.createElement("a");

        document.body.appendChild(downloadLink);

        if (navigator.msSaveOrOpenBlob) {
            navigator.msSaveOrOpenBlob(blob, filename); // IE10-11
        } else {
            // Create a link to the file
            downloadLink.href = url;

            // Setting the file name
            downloadLink.download = filename;

            //triggering the function
            downloadLink.click();
        }

        document.body.removeChild(downloadLink);
    }

    var contID = "";
    var ContractName = "";
    var Approver1 = "";
    var Approver2 = "";
    var Approver3 = "";
    var Approver4 = "";
    var Approver5 = "";
    var Approver6 = "";
    var Approver7 = "";
    var Approver8 = "";
    var Approver9 = "";
    var Approver10 = "";
    var Initiator = "";
    var InitiatedOn = "";
    $(function () {
        var url = window.location.href;
        var page = url.split('/');
        var contractID = page[page.length - 1];
        //  alert(contractID);
        $.ajax({
            url: '/Contract/Contracttabledetails',
            type: 'POST',
            data: { contractID: contractID },

            dataType: 'json',
            success: function (response) {
                if (response[0] == "success") {
                    // alert(response[0] == "success");
                    contID = contractID;
                    ContractName = response[1];
                    Initiator = response[12];
                    InitiatedOn = response[13];
                    if (response[2].length > 4) {
                        Approver1 = "<tr><td><b>Approver 1 : </b>" + response[2] + "</td><td><b>Approved On : </b>" + response[14] + "</td></tr>";
                    }
                    if (response[3].length > 4) {
                        Approver2 = "<tr><td><b>Approver 2 : </b>" + response[3] + "</td><td><b>Approved On : </b>" + response[15] + "</td></tr>";
                    }
                    if (response[4].length > 4) {
                        Approver3 = "<tr><td><b>Approver 3 : </b>" + response[4] + "</td><td><b>Approved On : </b>" + response[16] + "</td></tr>";
                    }
                    if (response[5].length > 4) {
                        Approver4 = "<tr><td><b>Approver 4 : </b>" + response[5] + "</td><td><b>Approved On : </b>" + response[17] + "</td></tr>";
                    }
                    if (response[6].length > 4) {
                        Approver5 = "<tr><td><b>Approver 5 : </b>" + response[6] + "</td><td><b>Approved On : </b>" + response[18] + "</td></tr>";
                    }
                    if (response[7].length > 4) {
                        Approver6 = "<tr><td><b>Approver 6 : </b>" + response[7] + "</td><td><b>Approved On : </b>" + response[19] + "</td></tr>";
                    }
                    if (response[8].length > 4) {
                        Approver7 = "<tr><td><b>Approver 7 : </b>" + response[8] + "</td><td><b>Approved On : </b>" + response[20] + "</td></tr>";
                    }
                    if (response[9].length > 4) {
                        Approver8 = "<tr><td><b>Approver 8 : </b>" + response[9] + "</td><td><b>Approved On : </b>" + response[21] + "</td></tr>";
                    }
                    if (response[10].length > 4) {
                        Approver9 = "<tr><td><b>Approver 9 : </b>" + response[10] + "</td><td><b>Approved On : </b>" + response[22] + "</td></tr>";
                    }
                    if (response[11].length > 4) {
                        Approver10 = "<tr><td><b>Approver 10 : </b>" + response[11] + "</td><td><b>Approved On : </b>" + response[23] + "</td></tr>";
                    }
                }
            }
        });
    });

    var VendorName = "";
    var DurationFrom = "";
    var DurationTo = "";
    $(function () {
        var url = window.location.href;
        var page = url.split('/');
        var contractID = page[page.length - 1];
        // alert(contractID);
        $.ajax({
            url: '/Contract/Contractvariabletable',
            type: 'POST',
            data: { contractID: contractID },

            dataType: 'json',
            success: function (response) {

                VendorName = response[4];
                DurationFrom = response[6];
                DurationTo = response[8];
                // alert("testing FirstParty" + FirstParty);
                //alert("testing Duration from" + DurationFrom);

            }
        });
    });
</script>

<script>
    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });

    $(".DummyClass").click(function () {
        document.getElementById('cke_2_top').style.display = "none";
        document.getElementById('cke_3_top').style.display = "none";

    });

</script>

<script>
    $(document).ready(function () {
        var table = $('#multi-filter-select').DataTable({
            "bSortCellsTop": true,
            responsive: true,
            "iDisplayLength": 10,
            "order": [
                [0, "desc"]]
        });

        $('input.search.clause').on('keyup change', function () {
            var rel = $(this).attr("rel");
            table.columns(rel).search(this.value).draw();
        });
    });
</script>

<script>
    $("#divv1").scroll(function () {
        $("#divv2").scrollTop($("#divv1").scrollTop());
        $("#divv2").scrollLeft($("#divv1").scrollLeft());
    });
    $("#divv2").scroll(function () {
        $("#divv1").scrollTop($("#divv2").scrollTop());
        $("#divv1").scrollLeft($("#divv2").scrollLeft());
    });
</script>


@*<script src="..ckeditor6/ckeditor.js"></script>*@
<script src="~/Content/ckeditor/ckeditor.js"></script>
<script type="text/javascript">
   var ckEditor = CKEDITOR.replace('editor1', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/contents.css','../../Content/ckeditor/mystyles.css'],
        height: 500,
        extraAllowedContent: 'span',
        //on:
        //{
        //    instanceReady: function (evt) {
        //        // Hide the editor top bar.
        //        document.getElementById('cke_1_top').style.display = 'none';
        //    }
        //}

        // blockedKeystrokes: [13]
    });
    ckEditor.on('configLoaded', extendConfig);
    ckEditor.config.removePlugins = 'autogrow,elementspath,resize';

    function extendConfig() {
        var conf = CKEDITOR.config;
        var lt = conf.lite = conf.lite || {};
        lt.isTracking = true;
        lt.userName = "@CurrentUserName()";
        lt.userId = "@CurrentUserID()";
    }
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.config.enterMode = CKEDITOR.ENTER_BR;
    CKEDITOR.config.readOnly = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];

    CKEDITOR.replace('editor2', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/contents.css','../../Content/ckeditor/mystyles.css'],
        // blockedKeystrokes: [13]
        extraAllowedContent: 'span',
        width: '150%',
        height: '510',
    });
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];
    CKEDITOR.config.removePlugins = 'elementspath,resize';

    CKEDITOR.replace('editor3', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/contents.css','../../Content/ckeditor/mystyles.css'],
        // blockedKeystrokes: [13]
        width: '150%',
        height: '510',
    });
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];
    CKEDITOR.config.removePlugins = 'elementspath,resize';

    CKEDITOR.replace('editor4', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/mystyles.css'],
        // blockedKeystrokes: [13]
    });
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];
    CKEDITOR.config.removePlugins = 'elementspath,resize';

    CKEDITOR.replace('editor5', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/mystyles.css'],
        // blockedKeystrokes: [13]
    });
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];
    CKEDITOR.config.removePlugins = 'elementspath,resize';

    CKEDITOR.replace('editor6', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/mystyles.css'],
        // blockedKeystrokes: [13]
    });
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];
    CKEDITOR.config.removePlugins = 'elementspath,resize';


    CKEDITOR.replace('editor7', {
        bodyClass: 'document-editor',
        contentsCss: ['../../Content/ckeditor/mystyles.css'],
        // blockedKeystrokes: [13]
    });
    CKEDITOR.disableAutoInLine = true;
    CKEDITOR.config.allowedContent = true;
    CKEDITOR.scriptLoader.load('../../Content/assets/js/plugin/webfont/webfont.min.js');
    // CKEDITOR.config.fullPage = true;
    // CKEDITOR.config.blockedKeystrokes( CKEDITOR.CTRL + 120, false );
    CKEDITOR.config.keystrokes = [[CKEDITOR.CTRL + 90 /*Shift-Enter*/, 'null ']];
    CKEDITOR.config.removePlugins = 'elementspath,resize';

    //CKEDITOR.config.removePlugins = 'contextmenu,liststyle,tabletools,tableselection';
    //CKEDITOR.config.keystrokes =
    // [
    //     [ CKEDITOR.CTRL + 90 /*Z*/, 'undo' ],
    // ];
    // CKEDITOR.inline('editor1', {
    //     blockedKeystrokes: [120, CKEDITOR.CTRL + 120]
    // });
    //CKEDITOR.config.readOnly = true;
    // Add code to display your toolbar here (example)
    CKEDITOR.on('paste', function (evt) {
        // Create a standalone filter passing 'p' and 'b' elements.
        var filter = new CKEDITOR.filter('p b'),
            // Parse the HTML string to a pseudo-DOM structure.
            fragment = CKEDITOR.htmlParser.fragment.fromHtml(evt.data.dataValue),
            writer = new CKEDITOR.htmlParser.basicWriter();
        filter.applyTo(fragment);
        fragment.writeHtml(writer);
        evt.data.dataValue = writer.getHtml();
    });


    CKEDITOR.instances.IDofEditor.on("contentDom", function () {
        CKEDITOR.instances.IDofEditor.editable().on("contextmenu", function (ev) {
            var sel = CKEDITOR.instances.IDofEditor.getSelection();
            if (!(sel && !sel.isLocked)) { retrun; }
            var el = sel.getStartElement();
            if ((el && el.is && el.is("del"))) {
                ev.cancel();
                CKEDITOR.instances.IDofEditor.on("contentDom", function () {
                    CKEDITOR.instances.IDofEditor.editable().on("contextmenu", function (ev) {
                        var sel = CKEDITOR.instances.IDofEditor.getSelection();
                        if (!(sel && !sel.isLocked)) { retrun; }
                        var el = sel.getStartElement();
                        if ((el && el.is && el.is("del"))) {
                            ev.cancel();
                            ev.stop();
                        }
                    }, null, null, 1);
                });
            }
            if ((el && el.is && el.is("ins"))) {
                ev.cancel();
                CKEDITOR.instances.IDofEditor.on("contentDom", function () {
                    CKEDITOR.instances.IDofEditor.editable().on("contextmenu", function (ev) {
                        var sel = CKEDITOR.instances.IDofEditor.getSelection();
                        if (!(sel && !sel.isLocked)) { retrun; }
                        var el = sel.getStartElement();
                        if ((el && el.is && el.is("ins"))) {
                            ev.cancel();
                            ev.stop();
                        }
                    }, null, null, 1);
                });
            }
            if ((el && el.is && el.is("h4"))) {
                ev.cancel();
                CKEDITOR.instances.IDofEditor.on("contentDom", function () {
                    CKEDITOR.instances.IDofEditor.editable().on("contextmenu", function (ev) {
                        var sel = CKEDITOR.instances.IDofEditor.getSelection();
                        if (!(sel && !sel.isLocked)) { retrun; }
                        var el = sel.getStartElement();
                        if ((el && el.is && el.is("h4"))) {
                            ev.cancel();
                            ev.stop();
                        }
                    }, null, null, 1);
                });
            }
            if ((el && el.is && el.is("p"))) {
                ev.cancel();
                CKEDITOR.instances.IDofEditor.on("contentDom", function () {
                    CKEDITOR.instances.IDofEditor.editable().on("contextmenu", function (ev) {
                        var sel = CKEDITOR.instances.IDofEditor.getSelection();
                        if (!(sel && !sel.isLocked)) { retrun; }
                        var el = sel.getStartElement();
                        if ((el && el.is && el.is("p"))) {
                            ev.cancel();
                            ev.stop();
                        }
                    }, null, null, 1);
                });
            }
            if ((el && el.is && el.is("span"))) {
                ev.cancel();
                CKEDITOR.instances.IDofEditor.on("contentDom", function () {
                    CKEDITOR.instances.IDofEditor.editable().on("contextmenu", function (ev) {
                        var sel = CKEDITOR.instances.IDofEditor.getSelection();
                        if (!(sel && !sel.isLocked)) { retrun; }
                        var el = sel.getStartElement();
                        if ((el && el.is && el.is("span"))) {
                            ev.cancel();
                            ev.stop();
                        }
                    }, null, null, 1);
                });
            }
        });
    });

    function Deletecard() {
        var element = CKEDITOR.instances.IDofEditor.document.getById('TestEdit');
        element.remove(false);
    }


   function InsertVariable(Class) {
        try {
            var value = $("#txt" + Class.replace(/ /g, "_")).val();
            // alert("id" + id + "Value" + value);
            if ($.trim(value).length < 1) {
                value = Class;
                //  alert("Lable" + value);
            }
            //   var variablevalue = document.getElementById(Class).value;
            //alert(variablevalue);
            CKEDITOR.instances.IDofEditor.insertHtml(' <span class="CustomPlaceholder ' + Class.replace(/ /g, "_") + '">' + value + '</span>  ');
        } catch (error) {
            swal("Please select the Editor", {
                        icon: "warning",
                    });
        }
    }

    function InsertVendorVariable(id, Lable) {
        try {
            var value = $("#" + id).val();
            // alert("id" + id + "Value" + value);
            if ($.trim(value).length < 1) {
                value = Lable;
                //  alert("Lable" + value);
            }

            //CKEDITOR.instances.IDofEditor.insertHtml('<span style="color:red;" contentEditable="false" unselectable="on"> ** <span id = "testVar" class="CustomPlaceholder ' + Lable.replace(" ","_") + '">[[' + value + ']]</span> ** </span>');
            CKEDITOR.instances.IDofEditor.insertHtml(' <span class="CustomPlaceholder ' + Lable.replace(/ /g, "_") + '">' + value + '</span>  ');
        } catch (error) {
        swal("Please select the Editor", {
                        icon: "warning",
        });
        }
    }
    //

    function test2(ClassName) {
        //alert(ClassName);
        var TextBoxID = "txt" + ClassName;

        var textBoxValue = document.getElementById(TextBoxID).value;

        //alert(textBoxValue);
        var ifr = document.getElementsByTagName("iframe")[0];
        var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

        var x = ifrDoc.getElementsByClassName(ClassName);
        var i;
        for (i = 0; i < x.length; i++) {
            x[i].innerHTML = textBoxValue;
        }
    }


    function test(TextBoxID, ClassName) {
        try {
            //var element = CKEDITOR.instances.IDofEditor.document.getById('testVar');
            //element.writeHtml= "asdf";
            //alert(element.innerHTML);
            //element
            //var element = new CKEDITOR.dom.element(document.getElementById('testVar'));
            var textBoxValue = document.getElementById(TextBoxID).value;
            ///alert("asdf");
            var ifr = document.getElementsByTagName("iframe")[0];
            var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

            var x = ifrDoc.getElementsByClassName(ClassName.replace(" ", "_"));
            var i;
            for (i = 0; i < x.length; i++) {
                x[i].innerHTML = textBoxValue;
            }
        } catch (error) { }

    }

     function test1() {
        //var element = CKEDITOR.instances.IDofEditor.document.getById('testVar');
        //element.writeHtml= "asdf";
        //alert(element.innerHTML);
        //element
        //var element = new CKEDITOR.dom.element(document.getElementById('testVar'));
          try {
              var textBoxValue1 = document.getElementById("Variable_VendorName").value;
              var ClassName1 = "Vendor Name";
              ///alert("asdf");
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName1.replace(" ", "_"));
              var i;
              if (textBoxValue1.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue1;
                  }
              }
          } catch (error) { }

          try {
              var textBoxValue2 = document.getElementById("Variable_VendorGSTN").value;
              ///alert("asdf");
              var ClassName2 = "Vendor GSTN";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName2.replace(" ", "_"));
              var i;
              if (textBoxValue2.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue2;
                  }
              }
          } catch (error) { }


          try {
              var textBoxValue3 = document.getElementById("Variable_Signatory").value;
              ///alert("asdf");
              var ClassName3 = "Authorised Signatory";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName3.replace(" ", "_"));
              var i;
              if (textBoxValue3.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue3;
                  }
              }
          } catch (error) { }

          try {
              var textBoxValue4 = document.getElementById("Variable_Address").value;
              ///alert("asdf");
              var ClassName4 = "Registered Address";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName4.replace(" ", "_"));
              var i;
              if (textBoxValue4.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue4;
                  }
              }
          } catch (error) { }

          try {
              var textBoxValue5 = document.getElementById("Branch1_Address").value;
              ///alert("asdf");
              var ClassName5 = "Branch1 Address";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName5.replace(" ", "_"));
              var i;
              if (textBoxValue5.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue5;
                  }
              }
          } catch (error) { }

          try {
              var textBoxValue6 = document.getElementById("Branch2_Address").value;
              ///alert("asdf");
              var ClassName6 = "Branch2 Address";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName6.replace(" ", "_"));
              var i;
              if (textBoxValue6.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue6;
                  }
              }
          } catch (error) { }

          try {
              var textBoxValue7 = document.getElementById("Branch3_Address").value;
              ///alert("asdf");
              var ClassName7 = "Branch3 Address";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName7.replace(" ", "_"));
              var i;
              if (textBoxValue7.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue7;
                  }
              }
          } catch (error) { }

          try {
              var textBoxValue8 = document.getElementById("Branch4_Address").value;
              ///alert("asdf");
              var ClassName8 = "Branch4 Address";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName8.replace(" ", "_"));
              var i;
              if (textBoxValue8.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue8;
                  }
              }
          }catch (error) { }

          try {
              var textBoxValue9 = document.getElementById("Branch5_Address").value;
              ///alert("asdf");
              var ClassName9 = "Branch5 Address";
              var ifr = document.getElementsByTagName("iframe")[0];
              var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

              var x = ifrDoc.getElementsByClassName(ClassName9.replace(" ", "_"));
              var i;
              if (textBoxValue9.length > 0) {
                  for (i = 0; i < x.length; i++) {
                      x[i].innerHTML = textBoxValue9;
                  }
              }
          }catch (error) { }


    }


   $("#RemoveVariable_id").click(function () {
        var numberOfChecked = $('.larger:input:checkbox:checked').length;
        if (numberOfChecked > 0) {
            //alert(numberOfChecked);
            swal({
                title: 'Are you sure ?',
                text: "If you remove the place holder(s), all the values for this place holders in the contract will set to empty.",
                icon: 'warning',
                buttons: {
                    cancel: {
                        visible: true,
                        text: "No, Don't remove",
                        className: 'btn btn-success'
                    },
                    confirm: {
                        text: 'Yes, Remove',
                        className: 'btn btn-danger'
                    }
                }
            }).then(function (value) {
                if (value == true) {

                    try {
                        $("#Add_MoreVariable").find('input[name="record"]').each(function () {
                            if ($(this).is(":checked")) {
                                var data = $(this).parents("tr").children().first().next().html();

                                 //var ClassName1 = "Vendor Name";
                                  ///alert("asdf");
                                  var ifr = document.getElementsByTagName("iframe")[0];
                                  var ifrDoc = ifr.contentDocument || ifr.contentWindow.document;

                                  var x = ifrDoc.getElementsByClassName(data.replace(" ", "_"));
                                  var i;
                                  for (i = 0; i < x.length; i++) {
                                      x[i].innerHTML = "";
                                  }


                                $(this).parents("tr").remove();
                            }
                            //CheckLimit();
                        });
                        swal("Selected Place holder(s) removed", {
                            icon: "success",
                        })
                    } catch (error) { }


                }
                else {
                    swal("Your Data is safe", {
                        buttons: {
                            confirm: {
                                className: 'btn btn-success'
                            }
                        }
                    });
                }
            });
        }
        else {
             swal({
                text: "Please select Place holder(s) to remove.",
                icon: "warning",
            })
        }

    });


    $("#Variable_VendorName").keyup(function () {
        this.value = this.value.replace(/[^a-zA-Z\s]/g, '');
    });
     $("#Variable_DurationFrom").keyup(function () {
        this.value = this.value.replace(/[^0-9/]/g, '');
     });
      $("#Variable_DurationTo").keyup(function () {
        this.value = this.value.replace(/[^0-9/]/g, '');
      });
     $("#Variable_VendorGSTN").keyup(function () {
        this.value = this.value.replace(/[^A-Za-z0-9\s]/g, '');
    });
     $("#Variable_Signatory").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z\s]/g, '');
    });
     $("#Variable_Address").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z0-9\s.,#]/g, '');
     });
     $("#Branch1_Address").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z0-9\s.,#]/g, '');
     });
     $("#Branch2_Address").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z0-9\s.,#]/g, '');
     });
     $("#Branch3_Address").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z0-9\s.,#]/g, '');
     });
     $("#Branch4_Address").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z0-9\s.,#]/g, '');
     });
     $("#Branch5_Address").keyup(function () {
         this.value = this.value.replace(/[^a-zA-Z0-9\s.,#]/g, '');
    });

    function EditCard() {
        CKEDITOR.instances.IDofEditor.document.getById('CardBody').setAttribute('contentEditable', 'true');
    }


    //function ExportAsWord() {
    //    // alert(CKEDITOR.instances.IDofEditor.document.getBody().getHtml());
    //    CKEDITOR.instances.IDofEditor.execCommand('lite-acceptall');
    //    Export2Doc(CKEDITOR.instances.IDofEditor.document.getBody().getHtml());
    //}

    //function ExportAsWordCompareversion() {
    //    CKEDITOR.instances.IDofEditor2.execCommand('lite-acceptall');
    //    Export3Doc(CKEDITOR.instances.IDofEditor2.document.getBody().getHtml());
    //}
    //function ExportAsWordComparelatestversion() {
    //    CKEDITOR.instances.IDofEditor3.execCommand('lite-acceptall');
    //    Export4Doc(CKEDITOR.instances.IDofEditor3.document.getBody().getHtml());
    //}

     function ExportAsWord() {
        // alert(CKEDITOR.instances.IDofEditor.document.getBody().getHtml());
        CKEDITOR.instances.IDofEditor4.execCommand('lite-acceptall');
        Export2Doc(CKEDITOR.instances.IDofEditor4.document.getBody().getHtml());
    }

    function ExportAsWordCompareversion() {
        CKEDITOR.instances.IDofEditor5.execCommand('lite-acceptall');
        Export3Doc(CKEDITOR.instances.IDofEditor5.document.getBody().getHtml());
    }
    function ExportAsWordComparelatestversion() {
        CKEDITOR.instances.IDofEditor6.execCommand('lite-acceptall');
        Export4Doc(CKEDITOR.instances.IDofEditor6.document.getBody().getHtml());
    }


    function Export3Doc(element, filename ) {

        var TemplateDocName = $("#AppendTemplateName").html();

        var preHtml = "<html xmlns: o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>";
        var postHtml = "</body></html>";
        var html = preHtml + element + postHtml;

        var blob = new Blob(['\ufeff', html], {
            type: 'application/msword'
        });
        //var url = URL.createObjectURL(blob);
        var url = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(html);

        // Specify file name
        filename = filename ? filename + '.docx' : TemplateDocName + '.doc';

        // Create download link element
        var downloadLink = document.createElement("a");

        document.body.appendChild(downloadLink);

        if (navigator.msSaveOrOpenBlob) {
            navigator.msSaveOrOpenBlob(blob, filename); // IE10-11
        } else {
            // Create a link to the file
            downloadLink.href = url;

            // Setting the file name
            downloadLink.download = filename;

            //triggering the function
            downloadLink.click();
        }

        document.body.removeChild(downloadLink);
    }

    function Export4Doc(element, filename) {

        var TemplateDocName = $("#AppendTemplateName").html();
        //var html, link, blob, url, css;

        /*css = (
          '<style>' +
          'page WordSection1{size: 841.95pt 595.35pt;mso-page-orientation: landscape;}' +
          'div.WordSection1 {page: WordSection1;}' +
          '</style>'
      );*/
        var preHtml = "<html xmlns: o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>";
        var postHtml = "</body></html>";
        var html = preHtml + element + postHtml;

        var blob = new Blob(['\ufeff', html], {
            type: 'application/msword'
        });
        //var url = URL.createObjectURL(blob);
        var url = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(html);

        // Specify file name
        filename = filename ? filename + '.docx' : TemplateDocName + '.doc';

        // Create download link element
        var downloadLink = document.createElement("a");

        document.body.appendChild(downloadLink);

        if (navigator.msSaveOrOpenBlob) {
            navigator.msSaveOrOpenBlob(blob, filename); // IE10-11
        } else {
            // Create a link to the file

            downloadLink.href = url;

            // Setting the file name
            downloadLink.download = filename;

            //triggering the function
            downloadLink.click();
        }

        document.body.removeChild(downloadLink);
    }


    //$('#Edit').click(function () {
    //    $('#Save').show();
    //    $('#Cancel').show();
    //    $('input').removeAttr('readonly');
    //    $('button').removeAttr('disabled');
    //    $("#addClauseDisplay").show();
    //    CKEDITOR.instances.IDofEditor.setReadOnly(false);
    //    document.getElementById("Initiate").disabled = true;
    //    document.getElementById("Edit").disabled = true;
    //    document.getElementById('cke_1_top').style.display = '';
    //    $("#SupportingDocs1").removeAttr('readonly');
    //});



    //$('#Edit_Variables').click(function () {
    //     swal(" Are you sure you want to Edit !", {
    //        icon: "warning",
    //      buttons: {
    //            cancel: {
    //                visible: true,
    //                text: 'No, Cancel !',
    //                className: 'btn btn-danger'
    //            },
    //            confirm: {
    //                text: 'Yes, Edit it !',
    //                className: 'btn btn-success'
    //                //className: 'btn btn-success'
    //            }
    //        }
    //    }).then(function (value) {
    //        if (value == true) {
    //            $('#Save').hide();
    //            $('#Save_2').hide();
    //             //$('#Save_Placeholder').show();
    //             //$('#Save_2_Placeholder').show();
    //            $('#Cancel').show();
    //             $('#Cancel_2').show();
    //             try {
    //                //document.getElementById("Initiate").disabled = true;
    //                 $("#Initiate").hide();
    //                 $("#Initiate_2").hide();
    //            } catch (error) { }
    //            try {
    //                $("#AttachmentButton").hide();
    //            } catch (error) { }
    //            try {
    //               //document.getElementById("Approve").disabled = true;
    //                $("#Approve").hide();
    //            } catch (error){ }
    //            try {
    //               //document.getElementById("Reject").disabled = true;
    //                $("#Reject").hide();
    //            } catch (error) { }
    //            try {
    //                document.getElementById("uploadFile").disabled = true;
    //            } catch (error) { }
    //            try {
    //                  document.getElementById("Browse").disabled = true;
    //            }catch (error) { }

    //            //document.getElementById("Initiate").disabled = true;
    //            $("#backicon").hide();
    //            //$('button').removeAttr('disabled');
    //            //$(".btn-link").removeAttr('disabled');
    //             try {
    //                 $("#MoreVariable_id").show();
    //                 $("#MoreVariable_id_2").show();
    //            } catch (error) { }
    //            try {
    //                $('input[type=checkbox]').removeAttr('disabled');
    //            } catch (error) { }
    //             try {
    //                 $("#RemoveVariable_id").show();
    //                 $("#RemoveVariable_id_2").show();
    //            } catch (error) { }
    //            $(".Variable_Value").removeAttr('readonly');

    //            $("#DownloadButton").hide();
    //            $("#Download_Button").hide();
    //            $("#VersionButton").hide();
    //            $("#Version_Button").hide();
    //            //$('.badge').hide();

    //           try {
    //               $("#Edit_Variables").hide();
    //               $("#Edit_Variables_2").hide();
    //            } catch (error) { }

    //        } else {
    //            //swal("Cancelled", " ", "error");
    //        }
    //    });


    //});




    $('#Cancel').click(function () {
         var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
      swal({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes',
                    className: 'btn btn-danger'
                }
            }
        }).then(function (value) {
            if (value == true) {
                window.location = '/Contract/DraftView/' + ID;
            } else {

            }
        });
    });

    $('#Save').click(function () {
        $('#Save').hide();
        $('#Save_2').hide();
        $('#Cancel').hide();
        $('#Cancel_2').hide();
        CKEDITOR.instances.IDofEditor.setReadOnly(true);
        document.getElementById('cke_1_top').style.display = 'none';
    });

</script>

@*@{
    string ContID = Request.Url.AbsoluteUri.Split('/').Last();
    if ((Model.Contract.Where(x => x.ContractID.ToString() == ContID).Where(x => x.TemplateType == "From Template").Where(x => x.Status == "Draft").Any()))
    {
        <script>
             $('#Edit').click(function () {
            swal({
                icon: "warning",
                text:" Are you sure you want to Edit !. If you edit the content approvers will be modified",
          buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel !',
                    className: 'btn btn-danger'
                    },
                confirm: {
                    text: 'Yes, Edit it !',
                    className: 'btn btn-success'
                }
                }
            }).then(function (value) {
                if (value == true) {
                    CKEDITOR.instances.IDofEditor.setReadOnly(false);
                $('#Save').show();
                $('#Save_2').show();
              //  $('#Save_Placeholder').hide();
                //$('#Save_2_Placeholder').hide();
                $('#Cancel').show();
                $('#Cancel_2').show();
                    try {
                    $("#TemplateVersionRestore1").removeAttr('disabled');
                    $("#TemplateVersionRestore2").removeAttr('disabled');
                    } catch (error) {}
                    try {
                    //document.getElementById("Initiate").disabled = true;
                     $("#Initiate").hide();
                     $("#Initiate_2").hide();
                    } catch (error) { }
                    try {
                    $("#AttachmentButton").hide();
                    } catch (error) { }
                    try {
                   //document.getElementById("Approve").disabled = true;
                    $("#Approve").hide();
                    } catch (error){ }
                    try {
                   //document.getElementById("Reject").disabled = true;
                    $("#Reject").hide();
                    } catch (error) { }
                    try {
                        document.getElementById("uploadFile").disabled = true;
                    } catch (error) { }
                    try {
                        document.getElementById("Browse").disabled = true;
                    }catch (error) { }

                //document.getElementById("Initiate").disabled = true;
                $("#backicon").hide();
                //$('button').removeAttr('disabled');
                $(".btn-link").removeAttr('disabled');
                    try {
                    $("#MoreVariable_id").show();
                    $("#MoreVariable_id_2").show();
                    } catch (error) { }
                    try {
                     $("#RemoveVariable_id").show();
                     $("#RemoveVariable_id_2").show();
                     $("#VersionButton").show();
                    } catch (error) { }
                    try {
                    $('input[type=checkbox]').removeAttr('disabled');
                    } catch (error) { }
                $(".Variable_Value").removeAttr('readonly');

                $("#DownloadButton").hide();
                $("#Download_Button").hide();
                    //$("#VersionButton").hide();
                    //$('.badge').hide();
                    CKEDITOR.instances.IDofEditor.setReadOnly(false);
               $("#Edit").hide();
                    //try {
                    //$("#Edit_Variables").hide();
                    //$("#Edit_Variables_2").hide();
                    //} catch (error) { }
                    //try {
                    //    $('#Save_Variables').hide();
                    //} catch (error) { }

                    document.getElementById('cke_1_top').style.display = '';

                var url = window.location.href;
                var page = url.split('/');
                var ID = page[page.length - 1];
                var UserID = "@CurrentLoggedUserID - @CurrentLoggedUserName";

                var initialvalue = "From old content";
                var details = "User modified the content";
            $.ajax({
                type: "POST",
                url: "/Contract/SaveLog",
                data: { initialvalue: initialvalue, details: details, ID: ID, UserID: UserID },
                success: function (response) {

                    //alert(response.LogUserID);
                    // alert(called);
                }
            });
            } else {
                //swal("Cancelled", " ", "error");
            }
        });
    });


        </script>
    }*@
    @*else
    {*@
        <script>
             $('#Edit').click(function () {
            swal({
                icon: "warning",
                text:" Are you sure you want to Edit !",
          buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel it !',
                    className: 'btn btn-danger'
                    },
                confirm: {
                    text: 'Yes, Edit it !',
                    className: 'btn btn-success'
                    //className: 'btn btn-success'
                }
                }
            }).then(function (value) {
                if (value == true) {
                    CKEDITOR.instances.IDofEditor.setReadOnly(false);
                $('#Save').show();
                $('#Save_2').show();
               // $('#Save_Placeholder').hide();
                //$('#Save_2_Placeholder').hide();
                $('#Cancel').show();
                $('#Cancel_2').show();
                    try {
                    $("#TemplateVersionRestore1").removeAttr('disabled');
                    $("#TemplateVersionRestore2").removeAttr('disabled');
                    } catch (error) {}
                    try {
                    //document.getElementById("Initiate").disabled = true;
                     $("#Initiate").hide();
                     $("#Initiate_2").hide();
                    } catch (error) { }
                    try {
                    $("#AttachmentButton").hide();
                    } catch (error) { }
                    try {
                   //document.getElementById("Approve").disabled = true;
                    $("#Approve").hide();
                    } catch (error){ }
                    try {
                   //document.getElementById("Reject").disabled = true;
                    $("#Reject").hide();
                    } catch (error) { }
                    try {
                        document.getElementById("uploadFile").disabled = true;
                    } catch (error) { }
                    try {
                        document.getElementById("Browse").disabled = true;
                    }catch (error) { }

                //document.getElementById("Initiate").disabled = true;
                $("#backicon").hide();
                //$('button').removeAttr('disabled');
                $(".btn-link").removeAttr('disabled');
                    try {
                    $("#MoreVariable_id").show();
                    $("#MoreVariable_id_2").show();
                    } catch (error) { }
                    try {
                     $("#RemoveVariable_id").show();
                     $("#RemoveVariable_id_2").show();
                     $("#VersionButton").show();
                    } catch (error) { }
                    try {
                    $('input[type=checkbox]').removeAttr('disabled');
                    } catch (error) { }
                $(".Variable_Value").removeAttr('readonly');

                $("#DownloadButton").hide();
                $("#Download_Button").hide();
                    //$("#VersionButton").hide();
                    //$('.badge').hide();
                    CKEDITOR.instances.IDofEditor.setReadOnly(false);
               $("#Edit").hide();
                    //try {
                    //$("#Edit_Variables").hide();
                    //$("#Edit_Variables_2").hide();
                    //} catch (error) { }
                    //try {
                    //    $('#Save_Variables').hide();
                    //} catch (error) { }

                    document.getElementById('cke_1_top').style.display = '';

                @*var url = window.location.href;
                var page = url.split('/');
                var ID = page[page.length - 1];
                var UserID = "@CurrentLoggedUserID - @CurrentLoggedUserName";

                var initialvalue = "From old content";
                var details = "User modified the content";
            $.ajax({
                type: "POST",
                url: "/Contract/SaveLog",
                data: { initialvalue: initialvalue, details: details, ID: ID, UserID: UserID },
                success: function (response) {

                    //alert(response.LogUserID);
                    // alert(called);
                }
            });*@
            } else {
                //swal("Cancelled", " ", "error");
            }
        });
    });

        </script>
    @*}
}*@
<script>
    function SaveTemplate() {

        //alert(CKEDITOR.instances.IDofEditor.document.getBody().getHtml());
        //var content = CKEDITOR.instances.IDofEditor.document.getBody().getHtml();
        CKEDITOR.config.enterMode = CKEDITOR.ENTER_BR;
        //CKEDITOR.instances.IDofEditor.execCommand('lite-acceptall');
        var content = CKEDITOR.instances.IDofEditor.getData();
        var url = window.location.href;
        var page = url.split('/');
        var CurrentUser = @CurrentUserID();
        var ID = page[page.length - 1];
        var VariableValue = document.getElementsByClassName("Variable_Value");
        var VariableName = document.getElementsByClassName("Variable_Name");
        var arrVariableNames = [];
        for (i = 0; i < VariableName.length; i++) {
            arrVariableNames.push(VariableName[i].innerHTML);
        }
        var arrVariableValues = [];
        for (i = 0; i < VariableValue.length; i++) {
            //  alert(VariableValue[i].value);
            arrVariableValues.push(VariableValue[i].value);
        }
        var my_array = ["234", "23423"];
        // json = Object.assign({}, my_array);
        //alert(VariableName);
        //alert(VariableValue.length);
        //  alert(VariableName.length);
        //var i;
        //var j;
        //for (i = 0; i < VariableValue.length; i++) {
        //      alert("Value" + VariableValue[i].value);
        //}

        // alert(json);
        // alert(VariableValues);
        // alert(VariableName);
        //alert(id);

        $.ajax({
            type: "POST",
            url: "/Contract/SaveTemplate",
            traditional: true,

            data: { content: content, ID: ID, arrVariableNames: arrVariableNames, arrVariableValues: arrVariableValues, CurrentUser: CurrentUser },

            //,VariableValue, VariableName },
            //data: JSON.stringify(my_array),//content, ID ,VariableValue, VariableName },

            success: function (response) {
                if (response == "success") {
                    swal("Contract drafted", {
                        icon: "success",
                    }).then(function (result) {
                        if (result) {
                            window.location = '/Contract/DraftView/' + ID;
                        }
                    });
                }
                else if (response == "Contact Admin") {
                    swal({
                        title: "Access Restricted",
                        text: "Restricted to modify the contract. Contact Administrator to create approval workflow. ",
                        }).then(function (error) {
                           if (error) {
                               window.location = '/Contract/DraftView/' + ID;
                           }
                    });
                }
                else {
                    swal("Unable to Save Data",{
                        icon: "error",
                        text: "Unable to Save Data. Please try again",
                        }).then(function (error) {
                           if (error) {
                               window.location = '/Contract/DraftView/' + ID;
                           }
                    });
                }
            },

        });
    }

     @*function SavePlaceHolder() {


        var url = window.location.href;
        var page = url.split('/');
        var CurrentUser = @CurrentUserID();
        var ID = page[page.length - 1];
        var VariableValue = document.getElementsByClassName("Variable_Value");
        var VariableName = document.getElementsByClassName("Variable_Name");
        var arrVariableNames = [];
        for (i = 0; i < VariableName.length; i++) {
            arrVariableNames.push(VariableName[i].innerHTML);
        }
        var arrVariableValues = [];
        for (i = 0; i < VariableValue.length; i++) {
            //  alert(VariableValue[i].value);
            arrVariableValues.push(VariableValue[i].value);
        }
        var my_array = ["234", "23423"];

        $.ajax({
            type: "POST",
            url: "/Contract/SaveContractPlaceHolder",
            traditional: true,

            data: { ID: ID, arrVariableNames: arrVariableNames, arrVariableValues: arrVariableValues, CurrentUser: CurrentUser },

            //,VariableValue, VariableName },
            //data: JSON.stringify(my_array),//content, ID ,VariableValue, VariableName },

            success: function (response) {
                if (response == "success") {
                    swal("Contract drafted", {
                        icon: "success",
                    }).then(function (result) {
                        if (result) {
                            window.location = '/Contract/DraftView/' + ID;
                        }
                    });
                }
                else {
                    swal("Unable to Save Data",{
                        icon: "error",
                        text: "Unable to Save Data. Please try again",
                        }).then(function (error) {
                           if (error) {
                               window.location = '/Contract/DraftView/' + ID;
                           }
                    });
                }
            },

        });
    }*@
</script>





<script>

    CKEDITOR.instances.IDofEditor.on('instanceReady', function () {
        var url = window.location.href;
        var page = url.split('/');
        var id = page[page.length - 1];
        var TemplateName = "";
        var TemplateContent = "";
        var HiddenContractContent = "";
        var OriginalID = "";
        var ReviewerID = "";
        var ContractReviewed = "";
        //alert(id);
        $.ajax({
            type: "POST",
            url: "/Contract/GetTemplateNameOnID",
            data: { id: id },


            success: function (response) {
                //  alert(response);
                //$("#AppendTemplateName").html(response);
                // alert(value.Template);
                if (response.ContractDraft === null) {
                    Contract = '';
                    CKEDITOR.instances.IDofEditor.setReadOnly(false);
                    $('#Save').show();
                    $('#Save_2').show();
                    $('#Cancel').show();
                    $('#Cancel_2').show();
                    try {
                        $("#TemplateVersionRestore1").removeAttr('disabled');
                        $("#TemplateVersionRestore2").removeAttr('disabled');
                    } catch (error) { }
                    try {
                        //document.getElementById("Initiate").disabled = true;
                        $("#Initiate").hide();
                        $("#Initiate_2").hide();
                    } catch (error) { }
                    try {
                        $("#AttachmentButton").hide();
                    } catch (error) { }
                    try {
                        //document.getElementById("Approve").disabled = true;
                        $("#Approve").hide();
                    } catch (error) { }
                    try {
                        //document.getElementById("Reject").disabled = true;
                        $("#Reject").hide();
                    } catch (error) { }
                    try {
                        document.getElementById("uploadFile").disabled = true;
                    } catch (error) { }
                    try {
                        document.getElementById("Browse").disabled = true;
                    } catch (error) { }

                    //document.getElementById("Initiate").disabled = true;
                    $("#backicon").hide();
                    //$('button').removeAttr('disabled');
                    $(".btn-link").removeAttr('disabled');
                    try {
                        $("#MoreVariable_id").show();
                        $("#MoreVariable_id_2").show();
                    } catch (error) { }
                    try {
                        $("#RemoveVariable_id").show();
                        $("#RemoveVariable_id_2").show();
                    } catch (error) { }
                    try {
                        $('input[type=checkbox]').removeAttr('disabled');
                    } catch (error) { }
                    $(".Variable_Value").removeAttr('readonly');

                    $("#DownloadButton").hide();
                    $("#Download_Button").hide();
                    //$("#VersionButton").hide();
                    //$('.badge').hide();
                    CKEDITOR.instances.IDofEditor.setReadOnly(false);
                    $("#Edit").hide();
                    //try {
                    //    $("#Edit_Variables").hide();
                    //    $("#Edit_Variables_2").hide();
                    //} catch (error) { }

                    document.getElementById('cke_1_top').style.display = '';
                }
                else {
                    Contract = response.ContractDraft;
                }

                Contract = Contract.replace(/\?/g, "");
                TemplateName = TemplateName + response.ContractName;
                TemplateContent = TemplateContent + Contract;
                //alert(TemplateContent);

                HiddenContractContent = '<div>' + HiddenContractContent + Contract + '</div>';
                OriginalID = OriginalID + response.OriginalContractID;
                TemplateNameID = response.ContractID + " - " + response.ContractName;
                ReviewerID = ReviewerID + response.ReviewerID;

                CKEDITOR.instances.IDofEditor.setData(TemplateContent);
                CKEDITOR.instances.IDofEditor4.setData(HiddenContractContent);
                $("#AppendTemplateName").html(TemplateNameID);
                $("#AppendTemplateName2").val(TemplateName);
                $("#AppendID").val(id);
                $("#OriginalID").html(OriginalID);
                $("#Reviewerid").html(ReviewerID);

                //alert(TemplateContent);
            }
        });
    });
</script>

<script>
    $(document).ready(function () {
        var url = window.location.href;
        var page = url.split('/');
        var id = page[page.length - 1];
        $.ajax({
            type: "POST",
            url: "/Contract/GetApproversForTemplate",
            data: { id: id },


            success: function (response) {
                // alert(response);
                //alert("Hello: " + response);
                var x = document.getElementById("TemplateApproversCompare");
                x.innerHTML = "<option selected disabled>--select--</option>";
                //x.innerHTML = "";
                $.each(response, function (index, value) {
                    var option = document.createElement("option");
                    option.text = value;
                    x.add(option);
                });

                var y = document.getElementById("TemplateApproversBetween");
                y.innerHTML = "<option selected disabled>--select--</option>";


                $.each(response, function (index, value) {
                    var option = document.createElement("option");
                    option.text = value;
                    y.add(option);
                });

            }
        });
    });
</script>

<script>
    $("#TemplateApproversCompare").change(function () {

        var selectvalue = this.value;
        //alert(selectvalue)
        var url = window.location.href;
        var page = url.split('/');
        var TemplateID = page[page.length - 1];
        var TemplateContent = "";
        var HiddenTemplateContent = "";
        var TemplateDocName = $("#AppendTemplateName").html();
        $.ajax({
            type: "POST",
            url: "/Contract/GetVersionCompare",
            data: { selectvalue: selectvalue, TemplateID: TemplateID },


            success: function (response) {
                console.log(response);
                //$("#TemplateCompareDivision").html(response);
                //$('#IDofEditor2').html(response);
                TemplateContent = TemplateContent + response;
                HiddenTemplateContent = '<div>' + HiddenTemplateContent + response + '</div>';

                CKEDITOR.instances.IDofEditor2.execCommand('lite-acceptall');

                CKEDITOR.instances.IDofEditor2.setData(TemplateContent);
                CKEDITOR.instances.IDofEditor5.setData(HiddenTemplateContent);
                CKEDITOR.instances.IDofEditor2.setReadOnly(true);

                CKEDITOR.instances.IDofEditor2.execCommand('lite-acceptall');


                //CKEDITOR.instances.IDofEditor.execCommand('lite-acceptall');
                //var FinalContent = CKEDITOR.instances.IDofEditor.getData();

                //////alert(FinalContent);

                //CKEDITOR.instances.IDofEditor2.setData(FinalContent);
                //CKEDITOR.instances.IDofEditor2.setReadOnly(true);

                $("#AppendVersionTemplateName1").val(TemplateDocName);
                $("#AppendVersionID1").val(TemplateID);
                if (TemplateContent != null) {
                    //$("#Version1Btn").show();
                    try {
                        $("#TemplateVersionRestore1").show();
                    } catch (error) { }
                }

                var Card1 = CKEDITOR.instances.IDofEditor2.getData();
                var Card2 = CKEDITOR.instances.IDofEditor3.getData();

                if ((Card1 != '') && (Card2 != '')) {

                    try {
                        $("#Compare_Button").show();
                    } catch{ }
                }
                else {

                    try {
                        $("#Compare_Button").hide();
                    } catch{ }
                }


                //CKEDITOR.instances['editor2'].setData(response);
            }
        });
    });

    $("#TemplateApproversBetween").change(function () {
        var selectvalue = this.value;
        //alert(selectvalue)
        var url = window.location.href;
        var page = url.split('/');
        var TemplateID = page[page.length - 1];
        TemplateContent = "";
        HiddenTemplateContent = "";

        var TemplateDocName = $("#AppendTemplateName").html();
        $.ajax({
            type: "POST",
            url: "/Contract/GetVersionCompare",
            data: { selectvalue: selectvalue, TemplateID: TemplateID },


            success: function (response) {
                //alert(response);
                // $("#TemplateBetweenDivision").html(response);
                TemplateContent = TemplateContent + response;
                HiddenTemplateContent = '<div>' + HiddenTemplateContent + response + '</div>';

                CKEDITOR.instances.IDofEditor3.execCommand('lite-acceptall');


                CKEDITOR.instances.IDofEditor3.setData(TemplateContent);
                CKEDITOR.instances.IDofEditor6.setData(HiddenTemplateContent)
                CKEDITOR.instances.IDofEditor3.setReadOnly(true);
                CKEDITOR.instances.IDofEditor3.execCommand('lite-acceptall');



                $("#AppendVersionTemplateName2").val(TemplateDocName);
                $("#AppendVersionID2").val(TemplateID);
                if (TemplateContent != null) {
                    // $("#Version2Btn").show();
                    try {
                        $("#TemplateVersionRestore2").show();
                    } catch (error) { }
                }
                var Card1 = CKEDITOR.instances.IDofEditor2.getData();
                var Card2 = CKEDITOR.instances.IDofEditor3.getData();

                if ((Card1 != '') && (Card2 != '')) {

                    try {
                        $("#Compare_Button").show();
                    } catch{ }
                }
                else {

                    try {
                        $("#Compare_Button").hide();
                    } catch{ }
                }
            }
        });
    });


</script>

<script>
    $("#TemplateVersionRestore1").click(function () {
        swal({
            title: 'Are you sure?',
            text: "If you proceed,current version of this contract will be lost and cannot be recovered.",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel !',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Restore !',
                    className: 'btn btn-success'
                }
            }
        }).then(function (value) {
            if (value == true) {

                var url = window.location.href;
                var page = url.split('/');
                var TemplateID = page[page.length - 1];
                var selectvalue = $("#TemplateApproversCompare").val();
                // alert(selectvalue);
                var content = "";
                $("#AddVersionModal").modal('hide');
                $.ajax({
                    type: "POST",
                    url: "/Contract/GetVersionCompareForRestore",
                    data: { selectvalue: selectvalue, TemplateID: TemplateID },


                    success: function (response) {
                        //  alert(response);
                        content = content + response;
                        CKEDITOR.instances.IDofEditor.setData(content);

                        swal("Contract Restored.", {
                            icon: "success",
                        }).then(function (result) {
                            if (result) {
                                window.location = '/Contract/DraftView/' + TemplateID;
                            }
                        });
                    },

                });

            }
        });
    });

    $("#TemplateVersionRestore2").click(function () {
        swal({
            title: 'Are you sure?',
            text: "If you proceed,current version of this contract will be lost and cannot be recovered.",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel !',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Restore !',
                    className: 'btn btn-success'
                }
            }
        }).then(function (value) {
            if (value == true) {
                var url = window.location.href;
                var page = url.split('/');
                var TemplateID = page[page.length - 1];
                var selectvalue = $("#TemplateApproversBetween").val();
                //  alert(selectvalue);
                var content = "";
                $("#AddVersionModal").modal('hide');
                $.ajax({
                    type: "POST",
                    url: "/Contract/GetVersionCompareForRestore",
                    data: { selectvalue: selectvalue, TemplateID: TemplateID },


                    success: function (response) {
                        content = content + response;
                        CKEDITOR.instances.IDofEditor.setData(content);
                        swal("Contract Restored.", {
                            icon: "success",
                        }).then(function (result) {
                            if (result) {
                                window.location = '/Contract/DraftView/' + TemplateID;
                            }
                        });
                    }
                });
            }
        });
    });

</script>



<script>
    $(document).ready(function () {
        var url = window.location.href;
        var page = url.split('/');
        var ContractID = page[page.length - 1];
        $.ajax({
            type: "POST",
            url: "/Contract/GetApproverComments",
            data: { ContractID: ContractID },

            success: function (response) {
                if (response[0] == "success") {
                    //  alert(response[1])
                    $("#Initiator_name").html(response[1]);
                    $("#Approver1_name").html(response[2]);
                    $("#Approver2_name").html(response[3]);
                    $("#Approver3_name").html(response[4]);
                    $("#Approver4_name").html(response[5]);
                    $("#Approver5_name").html(response[6]);
                    $("#Approver6_name").html(response[7]);
                    $("#Approver7_name").html(response[8]);
                    $("#Approver8_name").html(response[9]);
                    $("#Approver9_name").html(response[10]);
                    $("#Approver10_name").html(response[11]);
                }
            },

        });
    });
</script>
<script>
    function PreviousPage() {
        var url = window.location.href;
        // alert(url);
        url = url.replace("DraftView", "Details");

        //alert(url);
        window.location.href = url;
    }
</script>

<script>
    //function AddMoreVariable() {
    //    $("#Add_MoreVariable").append('<tr id="Remove"><td><textarea class="Variable_Name text_area Variable_textarea"></textarea></td><td><textarea class="Variable_Value text_area Variable_textarea"></textarea></td><td><center><button id="txt" class="btn btn-sm btn-success btn-sm-custom InsertButton" onclick="InsertVariable(this.id)">Insert</button></td></tr>');
    //}
    function AddPlaceholderToTable() {
        if ($(".Modal_Placeholder").val().length <= 0) {
            swal({
                title: 'Enter place holder to add.',
                icon: "warning",
            })

        }
        else {

            var all = $(".Variable_Name").map(function () {

                var VariableName = $(".Modal_Placeholder").val();
                VariableName = VariableName.trim();
                var VariableName2 = VariableName.replace(/ /g, "_");

                var BeginnewVal = this.innerHTML;
                BeginnewVal = BeginnewVal.trim();
                var newVal = BeginnewVal.replace(/ /g, "_");

                if (VariableName2 == newVal) { return this.innerHTML }
            }).get();

            if (all.length < 1) {

                var VariableName = $(".Modal_Placeholder").val();
                var VariableName2 = VariableName.replace(/ /g, "_");
                var FuncTag = "test2('" + VariableName.replace(/ /g, "_") + "')";
                // alert(VariableName);
                $("#Add_MoreVariable").append('<tr><td><input type="checkbox" name="record" class="larger"/></td><td class="' + VariableName2 + ' Variable_Name">' + VariableName + '</td><td><textarea maxlength="1800" id="txt' + VariableName2 + '" onkeyup = "' + FuncTag + ';" rows="1" class="text_area Variable_textarea Variable_Value"></textarea></td><td><center><button id="' + VariableName2 + '" class="btn btn-link" onclick="InsertVariable(this.id)"><i class="flaticon-plus"></i></button></td></tr>');
                $("#placeholder_value").val('');
                expandTextarea("text_area");
            }
            else {
                // alert("duplicate");

                swal({
                    title: 'Duplicate value, Cannot be added.',
                    text: 'Note: Place holder with SPACE & Underscore treated as same.    Eg: Vendor Name & Vendor_Name treated as same.',
                    icon: "warning",
                })
            }
        }
    }

    function RemoveModal() {
        $('#AddMoreVariableTable').modal('hide');
    }
</script>

<script>

    function ContractModificationType(selectedText) {
         //var url = window.location.href;
            //var page = url.split('/');
            //var ContractID = page[page.length - 1];
            //var selectedText = $(this).find("option:selected").text();
            // var TemplateType = $(this).val();
            //alert(selectedText);
            if (selectedText == "Amendments") {
               // var x = '<a href="@Url.Action("ContractDraftExtension", "Contract")" class="btn btn-sm btn-primary">Amendments</a>';
                var x = '&nbsp;<button type="button" class="btn btn-xs btn-light" onclick="SaveModificationContract(this.value);" value="Amendments">Amendments</button>';

                $('#ModificationButton').html(x);
            }

            else if (selectedText == "Extension") {
               // var x = '<a href="@Url.Action("ContractDraftExtension", "Contract")" class="btn btn-sm btn-primary">Extension</a>';
                var x = '&nbsp;<button type="button" class="btn btn-xs btn-light" onclick="SaveModificationContract(this.value);" value="Extension">Extension</button>';

                $('#ModificationButton').html(x);
            }

            else if (selectedText == "Modification") {
               // var x = '<a href="@Url.Action("ContractDraftExtension", "Contract")" class="btn btn-sm btn-primary">Modification</a>';
                var x = '&nbsp;<button type="button" class="btn btn-xs btn-light" onclick="SaveModificationContract(this.value);" value="Modification">Modification</button>';

                $('#ModificationButton').html(x);
            }

            else if (selectedText == "Termination") {
               // var x = '<a href="@Url.Action("ContractDraftExtension", "Contract")" class="btn btn-sm btn-primary">Termination</a>';
                var x = '&nbsp;<button type="button" class="btn btn-xs btn-light" onclick="SaveModificationContract(this.value);" value="Termination">Termination</button>';

                $('#ModificationButton').html(x);
            }

    }
</script>

<script>

    function SaveClonningContract() {
        //var ModificationType = "Cloning";
        var url = window.location.href;
        var page = url.split('/');
        var ContractID = page[page.length - 1];

        $.ajax({
            type: "POST",
            url: "/Contract/ClonningContract",
            data: { ContractID: ContractID },


            success: function (response) {
                if (response[0] == "sucess") {
                    window.location = '/Contract/DraftView/' + response[1];
                }
                else
                    swal("Error", {
                        icon: "error",
                    });
            }
        });

    }
</script>

<script>
    function SaveModificationContract(ModificationType) {
        //var ModificationType = $("#ContractModificationType").val();
        swal({
            title: 'Are you sure?',
            text: "You want to Addendum !",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel it !',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Continue !',
                    className: 'btn btn-success'
                },
            }
        }).then(function (value) {
            if (value == true) {
                   var url = window.location.href;
        var page = url.split('/');
        var ContractID = page[page.length - 1];
        var CurrentUser = @CurrentUserID();
        var VariableValue = document.getElementsByClassName("Variable_Value");
        var VariableName = document.getElementsByClassName("Variable_Name");
        var arrVariableNames = [];
        for (i = 0; i < VariableName.length; i++) {
            arrVariableNames.push(VariableName[i].innerHTML);
        }
        var arrVariableValues = [];
        for (i = 0; i < VariableValue.length; i++) {
            //  alert(VariableValue[i].value);
            arrVariableValues.push(VariableValue[i].value);
        }
        $.ajax({
            type: "POST",
            url: "/Contract/ModificationContract",
            data: { ModificationType: ModificationType, ContractID: ContractID, CurrentUser: CurrentUser, arrVariableNames: arrVariableNames, arrVariableValues: arrVariableValues },

            success: function (response) {
                if (response[0] == "sucess") {
                    window.location = '/Contract/ContractDraftExtension/' + response[1];
                }
                else
                    swal("Error", {
                        icon: "error",
                });
            }
        });

            }
        });

    }
</script>


<script type="text/javascript">
    $(function () {
        $('#datetimepicker7').datetimepicker({
            format: 'L',
            format: 'DD/MM/YYYY'
        });
    });

    $(function () {
        $('#datetimepicker8').datetimepicker({
            format: 'L',
            format: 'DD/MM/YYYY'
        });
    });
</script>

<script>
    function Initiate() {
        //CKEDITOR.instances.IDofEditor.execCommand('lite-acceptall');
        var content = CKEDITOR.instances.IDofEditor.getData();
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        var CurrentUserID = @CurrentUserID();
       var VariableValue = document.getElementsByClassName("Variable_Value");
        var VariableName = document.getElementsByClassName("Variable_Name");
        var arrVariableNames = [];
        for (i = 0; i < VariableName.length; i++) {
            arrVariableNames.push(VariableName[i].innerHTML);
        }
        var arrVariableValues = [];
        for (i = 0; i < VariableValue.length; i++) {
            //alert(VariableValue[i].value);
            arrVariableValues.push(VariableValue[i].value);
        }

        var Comments = document.getElementById("InitiateComment").value;
        swal({
            text: "Sure you want to initiate?",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Initiate',
                    className: 'btn btn-success'
                }
            }
        }).then(function (value) {
            if (value == true) {
        $.ajax({
            type: "POST",
            url: "/Contract/InitiateContract",
            traditional: true,

            data: { content: content, ID: ID, arrVariableNames: arrVariableNames, arrVariableValues: arrVariableValues, Comments: Comments, CurrentUserID: CurrentUserID},



            success: function (response) {
                if (response == "success") {
                    swal("Initiated", {
                        icon: "success",
                    }).then(function (result) {
                        if (result) {
                            window.location = '/Contract/DraftView/' + ID;
                        }
                    });
                }
                else {
                    swal("Cancelled", {
                        icon: "error",
                        text: response,
                        //}).then((error) => {
                        //    if (error) {

                        //    }
                    });
                }
            }
        });
                } else {

            }
        });
    }

    function Approve() {

        //CKEDITOR.instances.IDofEditor.execCommand('lite-acceptall');
        var content = CKEDITOR.instances.IDofEditor.getData();
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        var VariableValue = document.getElementsByClassName("Variable_Value");
        var VariableName = document.getElementsByClassName("Variable_Name");
        var arrVariableNames = [];
        for (i = 0; i < VariableName.length; i++) {
            arrVariableNames.push(VariableName[i].innerHTML);
        }
        var arrVariableValues = [];
        for (i = 0; i < VariableValue.length; i++) {
            //alert(VariableValue[i].value);
            arrVariableValues.push(VariableValue[i].value);
        }

        var Comments = document.getElementById("ApproveComment").value;
        swal({
            text: "Sure you want to Approve?",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel',
                    className: 'btn btn-danger'
                },
                confirm: {
                    text: 'Yes, Approve',
                    className: 'btn btn-success'
                }
            }
        }).then(function (value) {
            if (value == true) {
        $.ajax({
            type: "POST",
            url: "/Contract/ApproveContract",
            traditional: true,

            data: { content: content, ID: ID, arrVariableNames: arrVariableNames, arrVariableValues: arrVariableValues, Comments: Comments },


            success: function (response) {
                if (response[0] == "success") {
                    if (response[1] == "Approved") {
                        CKEDITOR.instances.IDofEditor.execCommand('lite-acceptall');
                        var finalcontent = CKEDITOR.instances.IDofEditor.getData();
                        $.ajax({
                            type: "POST",
                            url: "/Contract/AcceptChangesLastAprrover",
                            data: { ID: ID, finalcontent: finalcontent },

                            success: function (response) {

                            }
                        });
                    }
                    swal("Approved", {
                        icon: "success",
                    }).then(function (result) {
                        if (result) {
                            window.location = '/Contract/DraftView/' + ID;
                        }
                    });
                }
                else {
                    swal("Cancelled", {
                        icon: "error",
                        text: response,
                    });
                }
            }
        });
                 } else {

            }
        });
    }
</script>
<script>
    $(document).on('click', '.browse', function () {
        var file = $(this).parent().parent().parent().find('.file');
        file.trigger('click');
    });
    $(document).on('change', '.file', function () {
        $(this).parent().find('.form-control').val($(this).val().replace(/C:\\fakepath\\/i, ''));
        var data = $(this).parent().find('.form-control').val();
        var extension = data.substr(data.lastIndexOf('.') + 1).toLowerCase();

        var allowedExtensions = ['doc', 'docx', 'txt', 'pdf', 'xlx', 'xlsx', 'zip'];
        if (data.length > 0) {
            if (allowedExtensions.indexOf(extension) === -1) {
                //alert('Invalid file Format. Only ' + allowedExtensions.join(', ') + ' are allowed.');
                $.notify(
                    {
                        // options
                        title: 'Uploading Files',
                        message: 'Invalid file Format. Only ' + allowedExtensions.join(', ') + ' are allowed.',
                        target: '_blank',
                        icon: 'fa fa-exclamation-triangle'
                    },
                    {
                        // settings
                        element: 'body',
                        position: null,
                        type: "danger",
                        allow_dismiss: true,
                        newest_on_top: false,
                        showProgressbar: false,
                        placement: {
                            from: "top",
                            align: "right"
                        },
                        offset: 20,
                        spacing: 10,
                        z_index: 1031,
                        delay: 5000,
                        timer: 1000,
                        url_target: '_blank',
                        mouse_over: null,
                        animate: {
                            enter: 'animated fadeInDown',
                            exit: 'animated fadeOutUp'
                        },
                        onShow: null,
                        onShown: null,
                        onClose: null,
                        onClosed: null,
                        icon_type: 'class',
                        template: '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-{0}" role="alert">' +
                            '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>' +
                            '<span data-notify="icon"></span> ' +
                            '<span data-notify="title">{1}</span> ' +
                            '<span data-notify="message">{2}</span>' +
                            '<div class="progress" data-notify="progressbar">' +
                            '<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
                            '</div>' +
                            '<a href="{3}" target="{4}" data-notify="url"></a>' +
                            '</div>'
                    });
                $(this).parent().find('.form-control').val('');
                try {
                    $("#uploadFile").hide();
                } catch (error) { }
            }
        }
        else {
            $(this).parent().find('.form-control').val('');

        }
    });

</script>

<script>
    //$(".file").change(function () {
    //    var file = $(this).val();
    //    if (file != "") {

    //        $("#uploadFile").show();
    //        try {
    //            $("#DownloadFiles").hide();
    //        } catch (error) { }
    //    }
    //    else {

    //        $("#uploadFile").hide();
    //         try {
    //            $("#DownloadFiles").show();
    //        } catch (error) { }
    //    }
    //});
    $("#SupportingDocs1").change(function () {
        var file = $(this).val();
        if (file != "") {
            $("#Upload1").show();
            $("#Delete1").hide();
            $("#Download1").hide();
        }
    });

    function uploadfile1(Sequence, SupportingDocs) {
        $("#UsererrorCode").css({ "color": "green" });
        $("#UsererrorCode").html("File is uploading. Please wait....");
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];

        $.ajax({
            url: "/Contract/SaveSupportingFilesToDB",
            type: "POST",
            data: function () {
                var data = new FormData();
                data.append("Sequence", Sequence);
                data.append("ID", ID);
                data.append("SupportingDocs1", jQuery("#" + SupportingDocs).get(0).files[0]);
                return data;
            }(),
            contentType: false,
            processData: false,
            success: function (response) {
                if (response[0] == "success") {
                    //$("#DownloadFiles").show();
                    swal("File Uploaded", {
                        icon: "success",
                    }).then(function (result) {
                        if (result) {
                            //window.location = '/Contract/DraftView/' + ID;
                            $("#UsererrorCode").html("");
                            if (Sequence == 1) {
                                $("#Upload1").hide();
                                $("#Download1").show();
                                $("#Download1").html(response[1]);
                                $("#Delete1").show();
                                $("#SupportingDocs1").val("");
                            }
                            if (Sequence == 2) {
                                $("#Upload2").hide();
                                $("#Download2").show();
                                $("#Download2").html(response[2]);
                                $("#Delete2").show();
                                $("#SupportingDocs2").val("");
                            }
                            if (Sequence == 3) {
                                $("#Upload3").hide();
                                $("#Download3").show();
                                $("#Download3").html(response[3]);
                                $("#Delete3").show();
                                $("#SupportingDocs3").val("");
                            }
                            if (Sequence == 4) {
                                $("#Upload4").hide();
                                $("#Download4").show();
                                $("#Download4").html(response[4]);
                                $("#Delete4").show();
                                $("#SupportingDocs4").val("");
                            }
                            if (Sequence == 5) {
                                $("#Upload5").hide();
                                $("#Download5").show();
                                $("#Download5").html(response[5]);
                                $("#Delete5").show();
                                $("#SupportingDocs5").val("");
                            }
                        }
                    });
                }
                else {
                    $("#UsererrorCode").html("");
                    swal("Error in Uploading file", {
                        icon: "warning",
                    });
                }
            },
            error: function (jqXHR, textStatus, errorMessage) {
                console.log(errorMessage);
            }
        });

    }
    function deletefile1(SupportingDocSequence) {
        swal({
            title: 'Are you sure ?',
            text: "You won't be able to revert this !",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel it !',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes, Remove it !',
                    className: 'btn btn-danger'
                }
            }
        }).then(function (value) {
            if (value == true) {
                $("#UsererrorCode").css({ "color": "red" });
                $("#UsererrorCode").html("File is deleting. Please wait....");
                var url = window.location.href;
                var page = url.split('/');
                var ID = page[page.length - 1];
                $.ajax({
                    url: "/Contract/SupportingDeleteFromDB",
                    type: "POST",
                    data: { SupportingDocSequence: SupportingDocSequence, ID: ID },
                    success: function (response) {
                        if (response == "success") {
                            //$("#DownloadFiles").show();
                            swal("File Deleted", {
                                icon: "success",
                            }).then(function (result) {
                                if (result) {
                                    $("#UsererrorCode").html(" ");
                                    //window.location = '/Contract/DraftView/' + ID;
                                    $("#Download" + SupportingDocSequence).hide();
                                    $("#Download" + SupportingDocSequence).text("");
                                    $("#Upload" + SupportingDocSequence).hide();
                                    $("#SupportingDocs" + SupportingDocSequence).val("");
                                    $("#Delete" + SupportingDocSequence).hide();
                                }
                            });
                        }
                        else {
                            $("#UsererrorCode").html("");
                            swal("Error in deleting file", {
                                icon: "warning",
                            });
                        }
                    },
                    error: function (jqXHR, textStatus, errorMessage) {
                        console.log(errorMessage);
                    }
                });

            } else {
                swal("Your Data is safe", {
                    buttons: {
                        confirm: {
                            className: 'btn btn-success'
                        }
                    }
                });
            }
        });
    }

    $("#SupportingDocs2").change(function () {
        var file = $(this).val();
        if (file != "") {
            $("#Upload2").show();
            $("#Delete2").hide();
            $("#Download2").hide();
        }
    });
    $("#SupportingDocs3").change(function () {
        var file = $(this).val();
        if (file != "") {
            $("#Upload3").show();
            $("#Delete3").hide();
            $("#Download3").hide();
        }
    });
    $("#SupportingDocs4").change(function () {
        var file = $(this).val();
        if (file != "") {
            $("#Upload4").show();
            $("#Delete4").hide();
            $("#Download4").hide();
        }
    });
    $("#SupportingDocs5").change(function () {
        var file = $(this).val();
        if (file != "") {
            $("#Upload5").show();
            $("#Delete5").hide();
            $("#Download5").hide();
        }
    });
</script>

<script>
    $(function () {
        $.ajax({
            type: "POST",
            url: "/Contract/GetVendorName",
            data: '{name: "' + $("#txtName").val() + '" }',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {

                str = "";
                for (var i = 0; i < response.length; ++i) {
                    //alert(response[i]);
                    str += '<option value="' + response[i] + '" />'; // Storing options in variable
                }

                var my_list = document.getElementById("Datalist_VendorName");
                my_list.innerHTML = str;

            }

        });
        $.ajax({
            type: "POST",
            url: "/Contract/GetVendorCIN",
            data: '{name: "' + $("#txtName").val() + '" }',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {

                str = "";
                for (var i = 0; i < response.length; ++i) {
                    //alert(response[i]);
                    str += '<option value="' + response[i] + '" />'; // Storing options in variable
                }

                var my_list = document.getElementById("Datalist_VendorGSTN");
                my_list.innerHTML = str;

            }

        });
    });

    $("#Variable_VendorName").change(function () {
        var VendorName = this.value;
        $.ajax({
            type: "POST",
            url: "/Contract/GetVendorDetails",
            data: { VendorName: VendorName },


            success: function (response) {
                if (response[0] == "success") {
                    $("#Variable_VendorGSTN").val(response[2]);
                    $("#Variable_Signatory").val(response[3]);
                    $("#Variable_Address").val(response[4]);
                    $("#Branch1_Address").val(response[5]);
                    $("#Branch2_Address").val(response[6]);
                    $("#Branch3_Address").val(response[7]);
                    $("#Branch4_Address").val(response[8]);
                    $("#Branch5_Address").val(response[9]);
                    test1();
                }
            }
        });
    });

    $("#Variable_VendorGSTN").change(function () {
        var VendorCIN = this.value;
        $.ajax({
            type: "POST",
            url: "/Contract/GetVendorDetailsOnCIN",
            data: { VendorCIN: VendorCIN },


            success: function (response) {
                if (response[0] == "success") {
                    $("#Variable_VendorName").val(response[1]);
                    $("#Variable_Signatory").val(response[3]);
                    $("#Variable_Address").val(response[4]);
                    $("#Branch1_Address").val(response[5]);
                    $("#Branch2_Address").val(response[6]);
                    $("#Branch3_Address").val(response[7]);
                    $("#Branch4_Address").val(response[8]);
                    $("#Branch5_Address").val(response[9]);
                    test1();
                }
            }
        });
    });

</script>


<script>
    //$(document).ready(function () {
    //    var url = window.location.href;
    //    var page = url.split('/');
    //    var id = page[page.length - 1];
    //    $.ajax({
    //        type: "POST",
    //        url: "/Contract/GetPreviousUsers",
    //        data: { id: id },


    //        success: function (response) {
    //            // alert(response);
    //            //alert("Hello: " + response);
    //            var x = document.getElementById("GetPreviousUsersList");
    //            x.innerHTML = "";

    //            $.each(response, function (index, value) {
    //                var option = document.createElement("option");
    //                option.text = value;
    //                x.add(option);
    //            });

    //        }
    //    });
    //});

    $("#RejectComment").keyup(function () {
        if ($(this).val() == '') {

            $('#RejectButton').prop('disabled', true);
        }
        else {
            $('#RejectButton').prop('disabled', false);
        }

    });

    $("#ApproveComment").keyup(function () {
        if ($(this).val() == '') {

            $('#ApproveButton').prop('disabled', true);
        }
        else {
            $('#ApproveButton').prop('disabled', false);
        }

    });

    $("#InitiateComment").keyup(function () {
        if ($(this).val() == '') {

            $('#InitiateButton').prop('disabled', true);
        }
        else {
            $('#InitiateButton').prop('disabled', false);
        }

    });

    function Reject() {
        var url = window.location.href;
        var page = url.split('/');
        var ContractID = page[page.length - 1];
        var Comments = document.getElementById("RejectComment").value;

        // var RejectComments = $("#RejectComment").val();
        //var selectvalue = $("#GetPreviousUsersList").val();

        swal({
            text: "Sure you want to Reject?",
            type: 'warning',
            buttons: {
                cancel: {
                    visible: true,
                    text: 'No, Cancel',
                    className: 'btn btn-success'
                },
                confirm: {
                    text: 'Yes, Reject',
                    className: 'btn btn-danger'
                }
            }
        }).then(function (value) {
            if (value == true) {

                $.ajax({
                    type: "POST",
                    url: "/Contract/AssignToPreviousUser",
                    data: { ContractID: ContractID, Comments: Comments },

                    success: function (response) {
                        if (response == "success") {
                            swal("Rejected", {
                                icon: "success",
                            }).then(function (result) {
                                if (result) {
                                    window.location = '/Contract/DraftView/' + ContractID;
                                }
                            });
                        }
                        else {
                            swal("Cancelled", {
                                icon: "error",
                                text: response,
                                //}).then((error) => {
                                //    if (error) {

                                //    }
                            });
                        }
                    }
                });


            } else {
            }
        });

    }
</script>


<script>
    CKEDITOR.instances.IDofEditor.on('instanceReady', function () {
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        $(".hiddenContractID").val(ID);
        var File1 = "";
        var File2 = "";
        var File3 = "";
        var File4 = "";
        var File5 = "";
        $.ajax({
            type: "POST",
            url: "/Contract/GetUploadedFileToDownload",
            data: { ID: ID },

            success: function (response) {
                File1 = File1 + response[0];
                File2 = File2 + response[1];
                File3 = File3 + response[2];
                File4 = File4 + response[3];
                File5 = File5 + response[4];
                $("#Download1").html(File1);
                $("#Download2").html(File2);
                $("#Download3").html(File3);
                $("#Download4").html(File4);
                $("#Download5").html(File5);

                if (File1.length > 0) {
                    if (File1 != "null") {
                        try {
                            $("#Download1").show();
                            $("#Delete1").show();
                            $("#Upload1").hide();

                        } catch (error) { }
                    }
                }
                else {
                    try {
                        $("#Download1").hide();
                        $("#Delete1").hide();
                    } catch (error) { }
                }
                if (File2.length > 0) {
                    if (File2 != "null") {
                        try {
                            $("#Download2").show();
                            $("#Delete2").show();
                            $("#Upload2").hide();
                        } catch (error) { }
                    }
                }
                else {
                    try {
                        $("#Download2").hide();
                        $("#Delete2").hide();
                    } catch (error) { }

                }
                if (File3.length > 0) {
                    if (File3 != "null") {
                        try {
                            $("#Download3").show();
                            $("#Delete3").show();
                            $("#Upload3").hide();
                        } catch (error) { }
                    }
                }
                else {
                    try {
                        $("#Download3").hide();
                        $("#Delete3").hide();
                    } catch (error) { }

                }
                if (File4.length > 0) {
                    if (File4 != "null") {
                        try {
                            $("#Download4").show();
                            $("#Delete4").show();
                            $("#Upload4").hide();
                        } catch (error) { }
                    }
                }
                else {
                    try {
                        $("#Download4").hide();
                        $("#Delete4").hide();
                    } catch (error) { };
                }
                if (File5.length > 0) {
                    if (File5 != "null") {
                        try {
                            $("#Download5").show();
                            $("#Delete5").show();
                            $("#Upload5").hide();
                        } catch (error) { }
                    }
                }
                else {
                    try {
                        $("#Download").hide();
                        $("#Delete5").hide();
                    } catch (error) { }

                }
            }
        });
    });
</script>

<script>
    $(function () {
        $("input[name='radio']").click(function () {
            if ($("#customradiobutton").is(":checked")) {
                $("#CustomTextfield").removeAttr("disabled");
                //$("#txtPassportNumber").focus();
            }
            else {
                $("#CustomTextfield").attr("disabled", "disabled");
            }

        });
    });
</script>
<script>
    $(function () {
        $("input[name='radio1']").click(function () {
            if ($("#customradiobutton1").is(":checked")) {
                $("#CustomTextfield1").removeAttr("disabled");
                //$("#txtPassportNumber").focus();
            }
            else {
                $("#CustomTextfield1").attr("disabled", "disabled");
            }

        });
    });
</script>
<script>
    $(function () {
        $("input[name='radio2']").click(function () {
            if ($("#customradiobutton2").is(":checked")) {
                $("#CustomTextfield2").removeAttr("disabled");
                //$("#txtPassportNumber").focus();
            }
            else {
                $("#CustomTextfield2").attr("disabled", "disabled");
            }

        });
    });
</script>

<script>
    $(function () {
        // alert("hello");

        var tblLog = "";
        // var ID = $("#hiddenID").val();
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        $.ajax({
            type: "POST",
            url: "/Contract/getLogDetail",
            data: { ID: ID },


            success: function (response) {

                //alert(response.LogUserID);
                $.each($(response), function (index, value) {
                    tblLog = tblLog + '<tr><td><center>' + value.DateandTime + '</center></td><td><center>' + value.ModifiedBy + '</center></td><td style="text-align: left;">' + value.LogActivity + '</td><td style="text-align: left;">' + value.ChangedFrom + '</td><td style="text-align: left;">' + value.ChangedTo + '</td></tr>';
                });
                $("#tblContractLogList").html(tblLog);
            },

        });
    });
</script>

<script>
    function InvalidMargin(textbox) {
        if (textbox.value === '') {
            textbox.setCustomValidity('Enter an Margin Details');
            //document.getElementById("myDiv").style.borderColor = "red";
            textbox.style.borderColor = "red";
            //} else if (textbox.validity.typeMismatch) {
            //    textbox.setCustomValidity
            //        ('Please enter an email address which is valid!');
        }

        else {
            textbox.setCustomValidity('');
            textbox.style.borderColor = "#31ce36";
        }


        return true;
    }
    function InvalidPaperSize(textbox) {
        if (textbox.value === '') {
            textbox.setCustomValidity('Select the Paper Size');
            //document.getElementById("myDiv").style.borderColor = "red";
            textbox.style.borderColor = "red";
            //} else if (textbox.validity.typeMismatch) {
            //    textbox.setCustomValidity
            //        ('Please enter an email address which is valid!');
        }

        else {
            textbox.setCustomValidity('');
            textbox.style.borderColor = "#31ce36";
        }


        return true;
    }
    function InvalidCustomWaterMark(textbox) {
        if (textbox.value === '') {
            textbox.setCustomValidity('Enter Custom Watermark');
            //document.getElementById("myDiv").style.borderColor = "red";
            textbox.style.borderColor = "red";
            //} else if (textbox.validity.typeMismatch) {
            //    textbox.setCustomValidity
            //        ('Please enter an email address which is valid!');
        }

        else {
            textbox.setCustomValidity('');
            textbox.style.borderColor = "#31ce36";
        }


        return true;
    }
</script>

<script>
    function ExtensionPage(Type) {
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        $.ajax({
            type: "POST",
            url: "/Contract/getModificationID",
            data: { ID: ID, Type: Type },

            success: function (response) {
                window.location = "/Contract/ContractDraftExtension/" + response;

            },

        });


    }
</script>
<script>
    function initiate() {
        var content = CKEDITOR.instances.IDofEditor.getData();
        var DurationFrom = $('#Variable_DurationFrom').val();
        var DurationTo = $('#Variable_DurationTo').val();
        var VendorName = $('#Variable_VendorName').val();
        var VendorCin = $('#Variable_VendorGSTN').val();
        //var supportingdoc1 = $('#Download1').val();
        // var supportingdoc2 = $('#Download2').val();
        // var supportingdoc3 = $('#Download3').val();
        // var supportingdoc4 = $('#Download4').val();
        // var supportingdoc5 = $('#Download5').val();
        //var Allowed = [, 'First Party', 'Duration From', 'Duration To', 'Vendor Name', 'Vendor CIN', 'Atleast One Supporting Document has to be added'];
        var Allowed = [];


        if (content == '') {
            Allowed.push('Content');
        }

        if (DurationFrom.length < 1) {
            Allowed.push('Duration From');
        }
        if (DurationTo.length < 1) {
            Allowed.push('Duration To');
        }
        if (VendorName.length < 1) {
            Allowed.push('Vendor Name');
        }
        if (VendorCin.length < 1) {
            Allowed.push('Vendor GSTN');
        }
        //var download = "";
        //download = $("#Download5").text();
        if ((($("#Download1").text() == "") || ($("#Download1").text() == "null")) && (($("#Download2").text() == "") || ($("#Download2").text() == "null")) && (($("#Download3").text() == "") || ($("#Download3").text() == "null")) && (($("#Download4").text() == "") || ($("#Download4").text() == "null")) && (($("#Download5").text() == "") || ($("#Download5").text() == "null"))) {
            // if ((download == "") || (download == "null")) {
            Allowed.push('Minimum one Supporting File required !');
        }
        //if ( == || "null")) {
        //    //&& ($("#Download2").text() == "null") && ($("#Download3").text() == "null") && ($("#Download4").text() == "null") && ($("#Download5").text() == "null"))

        //    Allowed.push('Atleast One Supporting Document has to be added');
        //}
        //alert($("#Download2").text());

        if (Allowed.length < 1) {
            $("InitiateModal").show();
        }

        else {
            document.getElementById("Initiate").disabled = true;
            //alert(" The word is Empty Cant be Initiated");
            swal({
                title: 'Contract Initiation',
                text: "The " + Allowed.join(', ') + "",
                icon: "warning",
            }).then(function (value) {
                if (value == true) {
                    document.getElementById("Initiate").disabled = false;
                }
            })

        }
    }

</script>






@*<script>

        $(function () {
            $("#WaterMarker").change(function () {
                var selectedText = $(this).find("option:selected").text();
                // var TemplateType = $(this).val();
                //alert(selectedText);
                if (selectedText == "No Watermark") {
                    var x = '';
                    $('#watermark').html(x);
                }

                if (selectedText == "Draft") {
                    var x = '';
                    $('#watermark').html(x);
                }

                else if (selectedText == "Vendor copy") {
                    var x = '';
                    $("#watermark").html(x);
                }

                else if (selectedText == "Custom") {
                    var x = '<input type="text" id="watermarkPagesize" maxlength="20" name="watermark" class="form-control"   required/>';
                    $("#watermark").html(x);
                }

            });



            $("#versionWaterMarker").change(function () {
                var selectedText = $(this).find("option:selected").text();
                // var TemplateTypeversionWaterMarker = $(this).val();
                //alert(selectedText);
                if (selectedText == "No Watermark") {
                    var x = '';
                    $('#versionwatermark').html(x);
                }

                if (selectedText == "Draft") {
                    var x = '';
                    $('#versionwatermark').html(x);
                }

                else if (selectedText == "Vendor copy") {
                    var x = '';
                    $("#versionwatermark").html(x);
                }

                else if (selectedText == "Custom") {
                    var x = '<input type="text" id="watermarkPagesize" maxlength="20" name="watermark" class="form-control" required="required"> ';
                    $("#versionwatermark").html(x);
                }

            });

            $("#version2WaterMarker").change(function () {
                var selectedText = $(this).find("option:selected").text();
                // var TemplateTypeversionWaterMarker = $(this).val();
                //alert(selectedText);
                if (selectedText == "No Watermark") {
                    var x = '';
                    $('#version2watermark').html(x);
                }

                if (selectedText == "Draft") {
                    var x = '';
                    $('#version2watermark').html(x);
                }

                else if (selectedText == "Vendor copy") {
                    var x = '';
                    $("#version2watermark").html(x);
                }

                else if (selectedText == "Custom") {
                    var x = '<input type="text" id="watermarkPagesize" maxlength="20" name="watermark" class="form-control" required="required"> ';
                    $("#version2watermark").html(x);
                }

            });
        });

    </script>*@

<script>
    function Invalidversion1watermark(textbox) {
        if (textbox.value === '') {
            textbox.setCustomValidity
                ('Select an Water Mark');
            //document.getElementById("myDiv").style.borderColor = "red";
            textbox.style.borderColor = "red";
        }
        //else if (textbox.validity.patternMismatch) {
        //    textbox.setCustomValidity('Numbers and Special Characters are not allowed');
        //}
        else {
            textbox.setCustomValidity('');
            textbox.style.borderColor = "#31ce36";
        }

        return true;
    }

    function Invalidversion2watermark(textbox) {
        if (textbox.value === '') {
            textbox.setCustomValidity
                ('Select an Water Mark');
            //document.getElementById("myDiv").style.borderColor = "red";
            textbox.style.borderColor = "red";
        }
        //else if (textbox.validity.patternMismatch) {
        //    textbox.setCustomValidity('Numbers and Special Characters are not allowed');
        //}
        else {
            textbox.setCustomValidity('');
            textbox.style.borderColor = "#31ce36";
        }

        return true;
    }
</script>

<script>
    function ClausePreview(ID) {
        document.getElementById('cke_7_top').style.display = "none";
        var Template = "";
        var TemplateID = "";
        var TemplateName = "";
        //alert(ID);
        $.ajax({
            type: "POST",
            url: "/Contract/GetClauseForPreview",
            data: { ID: ID },
            success: function (response) {

                Template = Template + response[1];
                TemplateID = TemplateID + response[0];
                TemplateName = TemplateName + response[2];
                CKEDITOR.instances.IDofEditor7.setData(Template);
                $('.template_preview').attr("id", ID);
                // $("#IDofEditor41").html(response);
                CKEDITOR.instances.IDofEditor7.setReadOnly(true);
                $("#previewclauseid").html(TemplateID);
                //alert(TemplateID);
                $("#previewclausename").html(TemplateName);


                //CKEDITOR.instances['editor2'].setData(response);
            },
            failure: function (response) {
                alert(response);
            },
            error: function (response) {
                alert(response.responseText);

            }
        });

    }
</script>



<script>
    function savereview() {



        var url = window.location.href;
        var page = url.split('/');
        var id = page[page.length - 1];
         var currentid = "@CurrentUserID()";
        var Physicalcopycomments = $("#physicalcopy_Comments").val()
        //alert(Physicalcopyverified)
        var physicalcopylocation = $("#physicalcopy_Location").val();
        if ((Physicalcopycomments.length > 0) && (physicalcopylocation.length > 0)) {
                 swal({
                text: "Sure you want to Save ?",
                type: 'warning',
                buttons: {
                    cancel: {
                        visible: true,
                        text: 'No, Cancel !',
                        className: 'btn btn-danger'
                    },
                    confirm: {
                        text: 'Yes, Save',
                        className: 'btn btn-success'
                    }
                }
             }).then(function (value) {
                 if (value == true) {
                         $.ajax({
                    type: "POST",
                    url: "/Contract/SaveReviewforDB",
                    data: { id: id, Physicalcopycomments: Physicalcopycomments, physicalcopylocation: physicalcopylocation, currentid: currentid },
                    success: function (response) {
                        if (response == "success") {
                            //$("#DownloadFiles").show();
                            swal("Saved", {
                                icon: "success",
                            }).then(function (result) {
                                if (result) {
                                    window.location = '/Contract/DraftView/' + id;

                                }
                            });
                        }
                        // alert(response)
                    }
                         });
                     }
            });
        }
        else {
            swal({
                text: "Fields are required",
                icon: 'warning',
            });
        }
    }
</script>

<script>

   $("#physicalcopy_Comments").focus(function () {
        $(this).data('signedval', $(this).val());
    });
     $("#physicalcopy_Comments").change(function () {
        var initialvalue = "Reviewer Comments : " + $(this).data('signedval');
        var details = "Reviewer Comments : " + $(this).val();
          var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];

            var USerID = "@CurrentLoggedUserID - @CurrentLoggedUserName";
         $.ajax({
            type: "POST",
            url: "/Contract/SaveLog",
           data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },


            success: function (response) {

                //alert(response.LogUserID);
                // alert(called);
            },
            failure: function (response) {
                alert(response);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    });
</script>


<script>

    $("#physicalcopy_Location").focus(function () {
        $(this).data('desval', $(this).val());
    });
    $("#physicalcopy_Location").change(function () {
        var initialvalue = "Physical Copy Location  : " + $(this).data('desval');
        var details = "Physical Copy Location  : " + $(this).val();
         var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];

          var USerID = "@CurrentLoggedUserID - @CurrentLoggedUserName";

        $.ajax({
            type: "POST",
            url: "/Contract/SaveLog",
           data: { initialvalue: initialvalue, details: details, ID: ID, USerID: USerID },


            success: function (response) {

                //alert(response.LogUserID);
                // alert(called);
            },

        });
    });
</script>
<script>
    $(function () {
        var url = window.location.href;
        var page = url.split('/');
        var ID = page[page.length - 1];
        var Name = "";
        $.ajax({
            type: "POST",
            url: "/Contract/GetReviewerNameOnID",
            data: { ID: ID },


            success: function (response) {
                if (response == "error") {
                    $("#Reviewer_Name").html("");

                }
                else {
                    Name = Name + ' - ' + response;
                    $("#Reviewer_Name").html(Name);
                }
            },

        });
    });
</script>

<script>
    $("#Initiate_Cancel").click(function () {
        $("#InitiateComment").val("");
        $('#InitiateButton').prop('disabled', true);
        $("#InitiateModal").modal('hide');
    });

    $("#Approve_Cancel").click(function () {
        $("#ApproveComment").val("");
        $('#ApproveButton').prop('disabled', true);
        $("#ApproveModal").modal('hide');
    });

    $("#Reject_Cancel").click(function () {
        $("#RejectComment").val("");
        $('#RejectButton').prop('disabled', true);
        $("#RejectAndAssignModal").modal('hide');
    });
</script>


<script>

    $(function () {
        PaperType1Onchange();
        PaperType2Onchange();
        PaperType3Onchange();
    });

    function PaperType1Onchange() {
        var PaperType = $("#PaperType1").val();
        var PaperSize = $("#PaperSize1").val();
        $.ajax({
            type: "POST",
            url: "/Contract/GetPaperTypeDetails",
            data: { PaperType: PaperType, PaperSize: PaperSize },

            dataType: 'json',
            success: function (response) {
                if (response[6] == "success") {
                    $("#MarginTop1").val(response[2]);
                    $("#MarginLeft1").val(response[3]);
                    $("#MarginBottom1").val(response[4]);
                    $("#MarginRight1").val(response[5]);
                }
                else {
                    $("#MarginTop1").val("1");
                    $("#MarginLeft1").val("1");
                    $("#MarginBottom1").val("1");
                    $("#MarginRight1").val("1");
                }
            }
        });
    }
    function PaperType2Onchange() {
        var PaperType = $("#PaperType2").val();
        var PaperSize = $("#PaperSize2").val();
        $.ajax({
            type: "POST",
            url: "/Contract/GetPaperTypeDetails",
            data: { PaperType: PaperType, PaperSize: PaperSize },

            dataType: 'json',
            success: function (response) {
                if (response.length > 1) {
                    $("#MarginTop2").val(response[2]);
                    $("#MarginLeft2").val(response[3]);
                    $("#MarginBottom2").val(response[4]);
                    $("#MarginRight2").val(response[5]);
                }
            }
        });
    }
    function PaperType3Onchange() {
        var PaperType = $("#PaperType3").val();
        var PaperSize = $("#PaperSize3").val();
        $.ajax({
            type: "POST",
            url: "/Contract/GetPaperTypeDetails",
            data: { PaperType: PaperType, PaperSize: PaperSize },

            dataType: 'json',
            success: function (response) {
                if (response.length > 1) {
                    $("#MarginTop3").val(response[2]);
                    $("#MarginLeft3").val(response[3]);
                    $("#MarginBottom3").val(response[4]);
                    $("#MarginRight3").val(response[5]);
                }
            }
        });
    }

</script>


<script>
    function Version() {
        var Match, calculate_operations, consecutive_where, create_index, diff, find_match, find_matching_blocks, html_to_tokens, is_end_of_tag, is_start_of_tag, is_tag, is_whitespace, isnt_tag, op_map, recursively_find_matching_blocks, render_operations, wrap;
        is_end_of_tag = function (char) {
            return char === '>';
        };
        is_start_of_tag = function (char) {
            return char === '<';
        };
        is_whitespace = function (char) {
            return /^\s+$/.test(char);
        };
        is_tag = function (token) {
            return /^\s*<[^>]+>\s*$/.test(token);
        };
        isnt_tag = function (token) {
            return !is_tag(token);
        };
        Match = class Match {

            constructor(start_in_before1, start_in_after1, length1) {
                this.start_in_before = start_in_before1;
                this.start_in_after = start_in_after1;
                this.length = length1;
                this.end_in_before = (this.start_in_before + this.length) - 1;
                this.end_in_after = (this.start_in_after + this.length) - 1;
            }
        };
        html_to_tokens = function (html) {
            var char, current_word, i, len, mode, words;
            mode = 'char';
            current_word = '';
            words = [];
            for (i = 0, len = html.length; i < len; i++) {
                char = html[i];
                switch (mode) {
                    case 'tag':
                        if (is_end_of_tag(char)) {
                            current_word += '>';
                            words.push(current_word);
                            current_word = '';
                            if (is_whitespace(char)) {
                                mode = 'whitespace';
                            } else {
                                mode = 'char';
                            }
                        } else {
                            current_word += char;
                        }
                        break;
                    case 'char':
                        if (is_start_of_tag(char)) {
                            if (current_word) {
                                words.push(current_word);
                            }
                            current_word = '<';
                            mode = 'tag';
                        } else if (/\s/.test(char)) {
                            if (current_word) {
                                words.push(current_word);
                            }
                            current_word = char;
                            mode = 'whitespace';
                        } else if (/[\w\#]+/i.test(char)) {
                            current_word += char;
                        } else {
                            if (current_word) {
                                words.push(current_word);
                            }
                            current_word = char;
                        }
                        break;
                    case 'whitespace':
                        if (is_start_of_tag(char)) {
                            if (current_word) {
                                words.push(current_word);
                            }
                            current_word = '<';
                            mode = 'tag';
                        } else if (is_whitespace(char)) {
                            current_word += char;
                        } else {
                            if (current_word) {
                                words.push(current_word);
                            }
                            current_word = char;
                            mode = 'char';
                        }
                        break;
                    default:
                        throw new Error(`Unknown mode ${mode}`);
                }
            }
            if (current_word) {
                words.push(current_word);
            }
            return words;
        };
        find_match = function (before_tokens, after_tokens, index_of_before_locations_in_after_tokens, start_in_before, end_in_before, start_in_after, end_in_after) {
            var best_match_in_after, best_match_in_before, best_match_length, i, index_in_after, index_in_before, j, len, locations_in_after, looking_for, match, match_length_at, new_match_length, new_match_length_at, ref, ref1;
            best_match_in_before = start_in_before;
            best_match_in_after = start_in_after;
            best_match_length = 0;
            match_length_at = {};
            for (index_in_before = i = ref = start_in_before, ref1 = end_in_before;
                (ref <= ref1 ? i < ref1 : i > ref1); index_in_before = ref <= ref1 ? ++i : --i) {
                new_match_length_at = {};
                looking_for = before_tokens[index_in_before];
                locations_in_after = index_of_before_locations_in_after_tokens[looking_for];
                for (j = 0, len = locations_in_after.length; j < len; j++) {
                    index_in_after = locations_in_after[j];
                    if (index_in_after < start_in_after) {
                        continue;
                    }
                    if (index_in_after >= end_in_after) {
                        break;
                    }
                    if (match_length_at[index_in_after - 1] == null) {
                        match_length_at[index_in_after - 1] = 0;
                    }
                    new_match_length = match_length_at[index_in_after - 1] + 1;
                    new_match_length_at[index_in_after] = new_match_length;
                    if (new_match_length > best_match_length) {
                        best_match_in_before = index_in_before - new_match_length + 1;
                        best_match_in_after = index_in_after - new_match_length + 1;
                        best_match_length = new_match_length;
                    }
                }
                match_length_at = new_match_length_at;
            }
            if (best_match_length !== 0) {
                match = new Match(best_match_in_before, best_match_in_after, best_match_length);
            }
            return match;
        };
        recursively_find_matching_blocks = function (before_tokens, after_tokens, index_of_before_locations_in_after_tokens, start_in_before, end_in_before, start_in_after, end_in_after, matching_blocks) {
            var match;
            match = find_match(before_tokens, after_tokens, index_of_before_locations_in_after_tokens, start_in_before, end_in_before, start_in_after, end_in_after);
            if (match != null) {
                if (start_in_before < match.start_in_before && start_in_after < match.start_in_after) {
                    recursively_find_matching_blocks(before_tokens, after_tokens, index_of_before_locations_in_after_tokens, start_in_before, match.start_in_before, start_in_after, match.start_in_after, matching_blocks);
                }
                matching_blocks.push(match);
                if (match.end_in_before <= end_in_before && match.end_in_after <= end_in_after) {
                    recursively_find_matching_blocks(before_tokens, after_tokens, index_of_before_locations_in_after_tokens, match.end_in_before + 1, end_in_before, match.end_in_after + 1, end_in_after, matching_blocks);
                }
            }
            return matching_blocks;
        };
        create_index = function (p) {
            var i, idx, index, len, ref, token;
            if (p.find_these == null) {
                throw new Error('params must have find_these key');
            }
            if (p.in_these == null) {
                throw new Error('params must have in_these key');
            }
            index = {};
            ref = p.find_these;
            for (i = 0, len = ref.length; i < len; i++) {
                token = ref[i];
                index[token] = [];
                idx = p.in_these.indexOf(token);
                while (idx !== -1) {
                    index[token].push(idx);
                    idx = p.in_these.indexOf(token, idx + 1);
                }
            }
            return index;
        };
        find_matching_blocks = function (before_tokens, after_tokens) {
            var index_of_before_locations_in_after_tokens, matching_blocks;
            matching_blocks = [];
            index_of_before_locations_in_after_tokens = create_index({
                find_these: before_tokens,
                in_these: after_tokens
            });
            return recursively_find_matching_blocks(before_tokens, after_tokens, index_of_before_locations_in_after_tokens, 0, before_tokens.length, 0, after_tokens.length, matching_blocks);
        };
        calculate_operations = function (before_tokens, after_tokens) {
            var action_map, action_up_to_match_positions, i, index, is_single_whitespace, j, last_op, len, len1, match, match_starts_at_current_position_in_after, match_starts_at_current_position_in_before, matches, op, operations, position_in_after, position_in_before, post_processed;
            if (before_tokens == null) {
                throw new Error('before_tokens?');
            }
            if (after_tokens == null) {
                throw new Error('after_tokens?');
            }
            position_in_before = position_in_after = 0;
            operations = [];
            action_map = {
                'false,false': 'replace',
                'true,false': 'insert',
                'false,true': 'delete',
                'true,true': 'none'
            };
            matches = find_matching_blocks(before_tokens, after_tokens);
            matches.push(new Match(before_tokens.length, after_tokens.length, 0));
            for (index = i = 0, len = matches.length; i < len; index = ++i) {
                match = matches[index];
                match_starts_at_current_position_in_before = position_in_before === match.start_in_before;
                match_starts_at_current_position_in_after = position_in_after === match.start_in_after;
                action_up_to_match_positions = action_map[[match_starts_at_current_position_in_before, match_starts_at_current_position_in_after].toString()];
                if (action_up_to_match_positions !== 'none') {
                    operations.push({
                        action: action_up_to_match_positions,
                        start_in_before: position_in_before,
                        end_in_before: (action_up_to_match_positions !== 'insert' ? match.start_in_before - 1 : void 0),
                        start_in_after: position_in_after,
                        end_in_after: (action_up_to_match_positions !== 'delete' ? match.start_in_after - 1 : void 0)
                    });
                }
                if (match.length !== 0) {
                    operations.push({
                        action: 'equal',
                        start_in_before: match.start_in_before,
                        end_in_before: match.end_in_before,
                        start_in_after: match.start_in_after,
                        end_in_after: match.end_in_after
                    });
                }
                position_in_before = match.end_in_before + 1;
                position_in_after = match.end_in_after + 1;
            }
            post_processed = [];
            last_op = {
                action: 'none'
            };
            is_single_whitespace = function (op) {
                if (op.action !== 'equal') {
                    return false;
                }
                if (op.end_in_before - op.start_in_before !== 0) {
                    return false;
                }
                return /^\s$/.test(before_tokens.slice(op.start_in_before, +op.end_in_before + 1 || 9e9));
            };
            for (j = 0, len1 = operations.length; j < len1; j++) {
                op = operations[j];
                if (((is_single_whitespace(op)) && last_op.action === 'replace') || (op.action === 'replace' && last_op.action === 'replace')) {
                    last_op.end_in_before = op.end_in_before;
                    last_op.end_in_after = op.end_in_after;
                } else {
                    post_processed.push(op);
                    last_op = op;
                }
            }
            return post_processed;
        };
        consecutive_where = function (start, content, predicate) {
            var answer, i, index, last_matching_index, len, token;
            content = content.slice(start, +content.length + 1 || 9e9);
            last_matching_index = void 0;
            for (index = i = 0, len = content.length; i < len; index = ++i) {
                token = content[index];
                answer = predicate(token);
                if (answer === true) {
                    last_matching_index = index;
                }
                if (answer === false) {
                    break;
                }
            }
            if (last_matching_index != null) {
                return content.slice(0, +last_matching_index + 1 || 9e9);
            }
            return [];
        };
        wrap = function (tag, content) {
            var length, non_tags, position, rendering, tags;
            rendering = '';
            position = 0;
            length = content.length;
            while (true) {
                if (position >= length) {
                    break;
                }
                non_tags = consecutive_where(position, content, isnt_tag);
                position += non_tags.length;
                if (non_tags.length !== 0) {
                    rendering += `<${tag}>${non_tags.join('')}</${tag}>`;
                }
                if (position >= length) {
                    break;
                }
                tags = consecutive_where(position, content, is_tag);
                position += tags.length;
                rendering += tags.join('');
            }
            return rendering;
        };
        op_map = {
            equal: function (op, before_tokens, after_tokens) {
                return before_tokens.slice(op.start_in_before, +op.end_in_before + 1 || 9e9).join('');
            },
            insert: function (op, before_tokens, after_tokens) {
                var val;
                val = after_tokens.slice(op.start_in_after, +op.end_in_after + 1 || 9e9);
                return wrap('ins', val);
            },
            delete: function (op, before_tokens, after_tokens) {
                var val;
                val = before_tokens.slice(op.start_in_before, +op.end_in_before + 1 || 9e9);
                return wrap('del', val);
            }
        };
        op_map.replace = function (op, before_tokens, after_tokens) {
            return (op_map.delete(op, before_tokens, after_tokens)) + (op_map.insert(op, before_tokens, after_tokens));
        };
        render_operations = function (before_tokens, after_tokens, operations) {
            var i, len, op, rendering;
            rendering = '';
            for (i = 0, len = operations.length; i < len; i++) {
                op = operations[i];
                rendering += op_map[op.action](op, before_tokens, after_tokens);
            }
            return rendering;
        };
        diff = function (before, after) {
            var ops;
            if (before === after) {
                return before;
            }
            before = html_to_tokens(before);
            after = html_to_tokens(after);
            ops = calculate_operations(before, after);
            return render_operations(before, after, ops);
        };
        diff.html_to_tokens = html_to_tokens;
        diff.find_matching_blocks = find_matching_blocks;
        find_matching_blocks.find_match = find_match;
        find_matching_blocks.create_index = create_index;
        diff.calculate_operations = calculate_operations;
        diff.render_operations = render_operations;
        if (typeof define === 'function') {
            define([], function () {
                return diff;
            });
        } else if (typeof module !== "undefined" && module !== null) {
            module.exports = diff;
        } else {

            this.htmldiff = diff;
        }


        CKEDITOR.instances.IDofEditor3.execCommand('lite-acceptall');
        CKEDITOR.instances.IDofEditor2.execCommand('lite-acceptall');

        let originalHTML = CKEDITOR.instances.IDofEditor2.getData();

        let newHTML = CKEDITOR.instances.IDofEditor3.getData();
        // Diff HTML strings
        let output = htmldiff(originalHTML, newHTML);

        // Show HTML diff output as HTML (crazy right?)!
        //document.getElementById("outputNew").innerHTML = output;

        //CKEDITOR.instances.IDofEditor3.setData("");
        CKEDITOR.instances.IDofEditor3.setData(output);

        $("#CompareCode").html("");
         try {
            $("#TemplateApproversCompare").removeAttr('disabled');
            $("#TemplateApproversBetween").removeAttr('disabled');
        } catch (error) { }

        //document.getElementById("IDofEditor3").innerHTML = output;
        //document.getElementById("outputNew").innerHTML = newHTML;
    }

    function SetText() {
        $("#CompareCode").html("Please wait while its loading.");
        $("#CompareCode").css({ "color": "green" });

        try {
            //$("#Version1Btn").hide();
            //$("#Version2Btn").hide();
            $("#TemplateVersionRestore1").show();
            $("#TemplateVersionRestore2").hide();
        } catch (error) { }
        try {
            $("#TemplateApproversCompare").attr('disabled', 'disabled');
            $("#TemplateApproversBetween").attr('disabled', 'disabled');
        } catch (error) { }
    }
</script>


<script>
    function CompareVersion() {
        SetText();
        setTimeout(function () {
            Version();
        }, 2000);

    }
</script>

@{
    string IDS = Request.Url.AbsoluteUri.Split('/').Last();
    if (Model.Contract.Where(x => x.ContractID.ToString() == IDS).Where(x => x.ContractModificationType == "Amendments" || x.ContractModificationType == "Termination" || x.ContractModificationType == "Extension").Any())
    {
        <script>
            $(function () {
                document.getElementById("dropdownMenuButton").style.display = "none";
            });
        </script>
    }
}